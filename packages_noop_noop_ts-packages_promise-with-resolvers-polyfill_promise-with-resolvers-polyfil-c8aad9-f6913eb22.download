"use strict";(globalThis.webpackChunk_github_ui_github_ui=globalThis.webpackChunk_github_ui_github_ui||[]).push([["lazy-react-partial-actions-custom-images-retention-policy","lazy-react-partial-actions-policies","lazy-react-partial-actions-survey","lazy-react-partial-browser-geo-location","lazy-react-partial-codespaces-survey","lazy-react-partial-configure-mcp-server-partial","lazy-react-partial-consent-experience","lazy-react-partial-copilot-assisted-review-upsell","lazy-react-partial-copilot-code-review-feedback","lazy-react-partial-copilot-code-review-upsell","lazy-react-partial-copilot-code-review-view-session","lazy-react-partial-copilot-content-exclusion","lazy-react-partial-copilot-survey","lazy-react-partial-custom-copilot-code-review-comment","lazy-react-partial-custom-signup-content-manager","lazy-react-partial-date-picker-partial","lazy-react-partial-delete-configuration-dialog","lazy-react-partial-education-schools-auto-complete","lazy-react-partial-email-subscription-form","lazy-react-partial-external-group-team-mismatch-widget","lazy-react-partial-growth-banner-partial","lazy-react-partial-network-configurations-select-panel","lazy-react-partial-new-agent-task-button","lazy-react-partial-react-partial-anchor-example","lazy-react-partial-react-sandbox-sidenav","lazy-react-partial-search-results","lazy-react-partial-security-center-pagination","lazy-react-partial-single-sign-on-dropdown-partial","lazy-react-partial-sponsors-dashboard-your-sponsors","lazy-react-partial-sponsors-newsletters","lazy-react-partial-trade-screening-status-banner","packages_noop_noop_ts-packages_promise-with-resolvers-polyfill_promise-with-resolvers-polyfil-c8aad9"],{6224:(e,t,a)=>{a.d(t,{A:()=>n});let n={container:"UserMessage-module__container--qQMdD",mention:"UserMessage-module__mention--iKJnY",command:"UserMessage-module__command--gs71n"}},6236:(e,t,a)=>{a.d(t,{E:()=>m});var n=a(74848),r=a(77430),i=a(29731),s=a(96379),l=a(26607),o=a(94236),c=a(86877),d=a(5524),u=a(96540);function m({onSelect:e,repoId:t}){let a,m,[h,p]=(0,u.useState)([]),[f,g]=(0,u.useState)(!1),[y,x]=(0,u.useState)(void 0),v=(0,u.useCallback)(t=>{x(t),e(t)},[e]),_=(0,u.useCallback)(()=>{p([]),g(!0)},[]);return(0,u.useEffect)(()=>{(async()=>{try{let e=t?`/github-copilot/chat/custom_copilots_owners?repo_id=${t}`:"/github-copilot/chat/custom_copilots_owners",a=await (0,s.lS)(e),n=await a.json(),r=n?.owners;if(!a.ok||!r)return void _();p(r),r[0]&&v(r[0])}catch{_()}})()},[_,v,t]),(0,n.jsx)("div",{className:"mt-2 mb-1",children:(0,n.jsxs)(c.A,{children:[(0,n.jsx)(c.A.Label,{required:!0,children:"Owner"}),(0,n.jsxs)(o.W,{children:[(a=y?.name||"Choose an owner",m=y?(0,n.jsx)(r.r,{src:y.avatarUrl},y.avatarUrl):void 0,(0,n.jsx)(o.W.Button,{"data-testid":"owner-dropdown-anchor",alignContent:"start","aria-label":a,leadingVisual:m,children:a})),(0,n.jsx)(o.W.Overlay,{responsiveVariant:"fullscreen",width:"large",maxHeight:"large",className:"SpacesOwnerDropdown-module__ownerDropdownOverlay--bEFXy",children:(0,n.jsx)(d.l,{children:(0,n.jsx)(d.l.Group,{className:"SpacesOwnerDropdown-module__ownerListGroup--U2Z7L",children:(0,n.jsxs)(d.l,{selectionVariant:"single",children:[h&&h.map(e=>{let{name:t,avatarUrl:a,displayName:i}=e;return(0,n.jsxs)(d.l.Item,{selected:t===y?.name,onSelect:()=>v(e),children:[(0,n.jsx)(d.l.LeadingVisual,{children:(0,n.jsx)(r.r,{src:a})}),t,(0,n.jsx)(d.l.Description,{children:i})]},t)}),!h.length&&!f&&(0,n.jsx)(d.l.Item,{disabled:!0,children:"Fetching owners\u2026"},"fetching-owners"),f&&(0,n.jsx)(d.l.Item,{disabled:!0,className:"SpacesOwnerDropdown-module__errorListItem--eq64y",children:"An error occurred while loading owners. Please reopen the dialog to try again."},"error-fetching-owners")]})})})})]}),(0,n.jsx)(c.A.Caption,{children:y?"User"===y.type?(0,n.jsxs)("div",{className:"mt-2 d-flex flex-row flex-shrink flex-items-center",children:[(0,n.jsx)(l.A,{className:"mr-1",children:"Private"}),(0,n.jsx)("span",{...(0,i.G)("owner-user-caption"),children:"Only you will be able to see this space."})]}):(0,n.jsxs)("div",{className:"mt-2 d-flex flex-row flex-shrink",children:[(0,n.jsx)(l.A,{className:"SpacesOwnerDropdown-module__orgLabel--W_FiN",children:"Private"}),(0,n.jsx)("span",{...(0,i.G)("owner-org-caption"),children:"Only visible to you and organization admins. You can share it later."})]}):"Where we will store your space."})]})})}try{m.displayName||(m.displayName="SpacesOwnerDropdown")}catch{}},7730:(e,t,a)=>{a.d(t,{g:()=>i});var n=a(21728),r=a(96540);function i(e){let t,a=(0,n.c)(2),[i,s]=(0,r.useState)(!1);return a[0]!==e?(t=()=>{let t=e.current,a=t?.lastElementChild;if(!a)return;let n=new IntersectionObserver(e=>{let[t]=e;return s(t?.isIntersecting??!0)},{root:t,threshold:1});return n.observe(a),()=>n.disconnect()},a[0]=e,a[1]=t):t=a[1],(0,r.useEffect)(t),i}},13171:(e,t,a)=>{a.d(t,{r:()=>eO});var n,r=a(74848),i=a(21728),s=a(25407),l=a(71315),o=a(38621),c=a(19579),d=a(69726),u=a(21373),m=a(77430),h=a(81960),p=a(46251),f=a(26607);let g=e=>{let t,a=(0,i.c)(2),{initials:n}=e;return a[0]!==n?(t=(0,r.jsx)("div",{className:"Monogram-module__monogram--MgMG7",children:n}),a[0]=n,a[1]=t):t=a[1],t};try{g.displayName||(g.displayName="Monogram")}catch{}let y=e=>{let t,a,n,s,l,o=(0,i.c)(14),{size:c,information:d}=e,u=void 0===c?48:c;return o[0]!==d.avatar_url||o[1]!==d.username||o[2]!==u?(t=d.avatar_url?(0,r.jsx)(m.r,{square:!0,size:u,src:d.avatar_url,alt:d.username||"User avatar"}):(0,r.jsx)(g,{initials:d.username.charAt(0)}),o[0]=d.avatar_url,o[1]=d.username,o[2]=u,o[3]=t):t=o[3],o[4]!==d.username?(a=(0,r.jsx)(h.A,{as:"h2",variant:"small",children:d.username}),o[4]=d.username,o[5]=a):a=o[5],o[6]!==d.rank?(n=(0,r.jsx)(p.B,{direction:"horizontal",wrap:"wrap",children:(0,r.jsx)(f.A,{children:d.rank},d.rank)}),o[6]=d.rank,o[7]=n):n=o[7],o[8]!==a||o[9]!==n?(s=(0,r.jsxs)("div",{className:"Contact-module__contact-info-container--sz7D3",children:[a,n]}),o[8]=a,o[9]=n,o[10]=s):s=o[10],o[11]!==t||o[12]!==s?(l=(0,r.jsxs)("div",{className:"Contact-module__contact-container--DsJZr",children:[t,s]}),o[11]=t,o[12]=s,o[13]=l):l=o[13],l},x=e=>{let t,a,n,s=(0,i.c)(5),{contacts:l}=e;return s[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,r.jsx)(h.A,{as:"h1",variant:"medium",children:"Who to talk to"}),s[0]=t):t=s[0],s[1]!==l?(a=l?.map(v),s[1]=l,s[2]=a):a=s[2],s[3]!==a?(n=(0,r.jsxs)("div",{className:"Contact-module__contacts-container--ggMhC",children:[t,(0,r.jsx)("div",{className:"Contact-module__contact-list--NoW0r",children:a})]}),s[3]=a,s[4]=n):n=s[4],n};try{y.displayName||(y.displayName="Contact")}catch{}try{x.displayName||(x.displayName="ContactList")}catch{}function v(e){return(0,r.jsx)(y,{information:e},e.id)}var _=a(65411),C=a(96379),j=a(96540);let b=e=>{let t,a,n,m,h,p,f,g,y,v,b,S,w,N,I,E=(0,i.c)(44),{currentTab:A,setCurrentTab:T,loading:R,setLoading:k,makeCAPIRequest:L,fileContext:P}=e,M=void 0===R||R,O=P?.repoOwner,F=P?.repoName;E[0]===Symbol.for("react.memo_cache_sentinel")?(t=new URLSearchParams(l.cg?.location.search).get("issue")||"",E[0]=t):t=E[0];let D=t;E[1]!==O||E[2]!==F?(a=O&&F&&D?(0,s.dRG)({owner:O,repo:F,issueNumber:Number(D)}):void 0,E[1]=O,E[2]=F,E[3]=a):a=E[3];let $=a;E[4]!==P||E[5]!==L||E[6]!==k?(n={fileContext:P,setLoading:k,issueNumber:D,makeCAPIRequest:L},E[4]=P,E[5]=L,E[6]=k,E[7]=n):n=E[7];let{collaborators:B}=(({setLoading:e,issueNumber:t,makeCAPIRequest:a,fileContext:n})=>{let[r,i]=(0,j.useState)([]),{repoOwner:s,repoName:l,ref:o,path:c}=n??{},d=(0,j.useCallback)(async()=>{try{if(!n)return"";let e=await (0,C.lS)(`/${s}/${l}/collaborator_prompt/${c}?ref=${o}${t?`&issue=${t}`:""}`);if(!e.ok)throw Error("Something went wrong");let r=await e.text(),i={messages:[{role:"user",content:r}],model:"gpt-4o-mini",stream:!1,response_format:{type:"json_schema",json_schema:{name:"Collaborators",description:"List of metadata objects for the top collaborators",strict:!0,schema:{type:"object",additionalProperties:!1,properties:{collaborators:{type:"array",items:{type:"object",additionalProperties:!1,properties:{id:{type:"integer",description:"The collaborator's GitHub user ID."},username:{type:"string",description:"The collaborator's GitHub handle."},avatar_url:{type:"string",description:"The URL of the collaborator's GitHub user avatar."},rank:{type:"string",description:"The rank assignment of the collaborator."},explanation:{type:"string",description:"A brief 1-2 sentence description of the rank assignment."}},required:["id","username","avatar_url","rank","explanation"]}}},required:["collaborators"]}},temperature:0}},d=new _.J([]),u=await d.getAuthToken(),m=await a({basePath:"https://api.githubcopilot.com",body:i,path:"/chat/completions",method:"POST",streamingResponse:!1,authToken:u,integrationId:"copilot-directory"});if(!m.ok)throw Error("Something went wrong");let h=await m.json();return h.choices[0]?.message?.content}catch{throw Error("Something went wrong")}},[]);return(0,j.useEffect)(()=>{r?.length||d().then(t=>{e(!1),i(JSON.parse(t)?.collaborators)},()=>{e(!1)})},[]),{collaborators:r,getCollaborators:d}})(n);E[8]!==$?(m=()=>{$&&(window.location.href=$)},E[8]=$,E[9]=m):m=E[9];let z=m,U="chat"===A?"page":void 0;E[10]!==T?(h=()=>T("chat"),E[10]=T,E[11]=h):h=E[11],E[12]!==U||E[13]!==h?(p=(0,r.jsx)(c.O.Item,{"aria-current":U,onSelect:h,children:"Chat"}),E[12]=U,E[13]=h,E[14]=p):p=E[14];let W="directory"===A?"page":void 0;E[15]!==B?.length||E[16]!==M||E[17]!==T?(f=()=>{!M&&B?.length&&T("directory")},E[15]=B?.length,E[16]=M,E[17]=T,E[18]=f):f=E[18],E[19]!==B?.length?(g=B?.length?{}:{className:"CopilotMetadata-module__muted--B9Loh"},E[19]=B?.length,E[20]=g):g=E[20];let V=B?.length||M?"Directory":"Directory unavailable";return E[21]!==g||E[22]!==V?(y=(0,r.jsx)("span",{...g,children:V}),E[21]=g,E[22]=V,E[23]=y):y=E[23],E[24]!==M?(v=M&&(0,r.jsx)("div",{className:"CopilotMetadata-module__spinner-container--EidxZ",children:(0,r.jsx)(d.A,{size:"small"})}),E[24]=M,E[25]=v):v=E[25],E[26]!==y||E[27]!==v?(b=(0,r.jsxs)("div",{className:"CopilotMetadata-module__tab-container--qijcK",children:[y,v]}),E[26]=y,E[27]=v,E[28]=b):b=E[28],E[29]!==f||E[30]!==b||E[31]!==W?(S=(0,r.jsx)(c.O.Item,{"aria-current":W,onSelect:f,children:b}),E[29]=f,E[30]=b,E[31]=W,E[32]=S):S=E[32],E[33]!==S||E[34]!==p?(w=(0,r.jsxs)(c.O,{"aria-label":"Repository",children:[p,S]}),E[33]=S,E[34]=p,E[35]=w):w=E[35],E[36]!==B||E[37]!==A||E[38]!==$||E[39]!==z?(N="directory"===A&&(0,r.jsxs)("div",{className:"CopilotMetadata-module__metadata-container--C3sG4",children:[(0,r.jsx)("div",{children:(0,r.jsx)(x,{contacts:B})}),$&&(0,r.jsx)("div",{className:"CopilotMetadata-module__referrer-button--DOYxm",children:(0,r.jsx)(u.Q,{variant:"link",leadingVisual:o.ArrowLeftIcon,onClick:z,children:`Return to Issue${D?` ${D}`:""}`})})]}),E[36]=B,E[37]=A,E[38]=$,E[39]=z,E[40]=N):N=E[40],E[41]!==w||E[42]!==N?(I=(0,r.jsxs)("div",{children:[w,N]}),E[41]=w,E[42]=N,E[43]=I):I=E[43],I};try{b.displayName||(b.displayName="CopilotMetadata")}catch{}var S=a(69599),w=a(53627),N=a(53419),I=a(88431),E=a(10095),A=a(35811),T=a(34164),R=a(87419),k=a(88392),L=a(25641),P=a(73952),M=a(51213),O=a(35247),F=a(2635),D=a(33592),$=a(72303),B=a(46062),z=a(68637),U=a(97315),W=a(53731),V=a(30558),H=a(63262),q=a(7104),K=a(32744),G=a(5524);let Q=e=>{var t;let a,n,s,l=(0,i.c)(10),{suggestionKind:c}=e,d=(0,F.Pk)(),u=(0,D.b)();l[0]!==u||l[1]!==d?(a=e=>{u.sendChatMessage({thread:(0,$.W)(d),content:e.prompt??e.question,intent:e.intent,modeOverride:e.mode,references:d.currentReferences,topic:d.currentTopic,context:d.context}),(0,N.BI)("copilot_generated_suggestion_click",{intent:e.intent,mode:e.mode,contextType:d.context?.[0]?.type,content:e.question})},l[0]=u,l[1]=d,l[2]=a):a=l[2];let m=a;l[3]!==m?(n=(0,j.memo)(function(e){let{suggestion:t}=e;return(0,r.jsxs)(G.l.Item,{onSelect:()=>m(t),className:"CopilotSuggestions-module__suggestionItem--hVOB9",children:[(0,r.jsx)(G.l.LeadingVisual,{children:(0,r.jsx)(E.A,{icon:o.PaperAirplaneIcon})}),(0,r.jsxs)("span",{children:[" ",t.question]})]})}),l[3]=m,l[4]=n):n=l[4];let h=n,p="loading"===d.messagesLoading.state||!!d.streamingMessage,{suggestions:f}=d,g=d.currentReferences[0],y=1===d.currentReferences.length&&g?.type==="repository"&&g.id===d.currentRepository?.id,x=!!(!p&&y);return l[5]!==h||l[6]!==x||l[7]!==c||l[8]!==f?(s=x&&f&&f.suggestions?(0,r.jsxs)(G.l,{className:(0,T.$)("copilot-suggestions","CopilotSuggestions-module__suggestionsList--vzbN1"),children:["initial"===c&&(0,r.jsx)(G.l.Heading,{as:"h2",className:"CopilotSuggestions-module__suggestionListHeading--W7rpU",children:(t=f.referenceType)?`Ask about the ${t.replace(/-/g," ")}:`:"Ask anything:"}),f?.suggestions.map(e=>(0,r.jsx)(h,{suggestion:e},e.question))]}):null,l[5]=h,l[6]=x,l[7]=c,l[8]=f,l[9]=s):s=l[9],s},Z=(0,j.memo)(Q);try{Q.displayName||(Q.displayName="CopilotSuggestions")}catch{}try{(n=CopilotSuggestion).displayName||(n.displayName="CopilotSuggestion")}catch{}var J=a(93412),Y=a(35673),X=a(79184),ee=a(74753),et=a(73077),ea=a(26108);function en(e){let t,a,n,s,l,c,d,u=(0,i.c)(16),{icon:m,content:h,actions:p,onDismiss:f}=e,g=(0,j.useRef)(null),[y,x]=(0,j.useState)(!1);u[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>{let e=g.current;if(!e)return;let t=new ResizeObserver(t=>{for(let a of t)a.target===e&&(a.contentRect.height>40?x(!0):x(!1))});return t.observe(e),()=>{t.disconnect()}},a=[],u[0]=t,u[1]=a):(t=u[0],a=u[1]),(0,j.useEffect)(t,a);let v=`CustomBanner-module__container--QLdBn ${y?"CustomBanner-module__expanded--NUbF0":""}`;return u[2]!==m?(n=(0,r.jsx)("div",{className:"CustomBanner-module__icon--_7NPB",children:m}),u[2]=m,u[3]=n):n=u[3],u[4]!==h?(s=(0,r.jsx)("div",{className:"CustomBanner-module__content--szVMr",children:h}),u[4]=h,u[5]=s):s=u[5],u[6]!==f?(l=f&&(0,r.jsx)(ea.K,{className:"CustomBanner-module__iconButton--BUeu0",variant:"invisible",icon:o.XIcon,size:"medium","aria-label":"Close",onClick:f}),u[6]=f,u[7]=l):l=u[7],u[8]!==p||u[9]!==l?(c=(0,r.jsxs)("div",{className:"CustomBanner-module__actions--zeIqy",children:[p,l]}),u[8]=p,u[9]=l,u[10]=c):c=u[10],u[11]!==v||u[12]!==n||u[13]!==s||u[14]!==c?(d=(0,r.jsxs)("div",{ref:g,className:v,children:[n,s,c]}),u[11]=v,u[12]=n,u[13]=s,u[14]=c,u[15]=d):d=u[15],d}try{en.displayName||(en.displayName="CustomBanner")}catch{}function er(){let e,t,a,n,s,l=(0,i.c)(7),{resetDate:c}=(0,X.xR)();l[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)(o.InfoIcon,{}),l[0]=e):e=l[0];let d=e;l[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,r.jsx)(ee.s,{children:(0,r.jsx)("h2",{children:"Usage limit reached"})}),l[1]=t):t=l[1],l[2]!==c?(a=(0,r.jsxs)(r.Fragment,{children:[t,"You have reached your free plan limit. It will reset on ",c]}),l[2]=c,l[3]=a):a=l[3];let u=a;l[4]===Symbol.for("react.memo_cache_sentinel")?(n=(0,r.jsx)(et.z,{as:"a",href:"https://github.com/features/copilot#pricing",onClick:ei,children:"Upgrade"}),l[4]=n):n=l[4];let m=n;return l[5]!==u?(s=(0,r.jsx)(en,{icon:d,content:u,actions:m}),l[5]=u,l[6]=s):s=l[6],s}function ei(){(0,N.BI)("dotcom_chat.activate",{target:"QUOTA_EXCEEDED_BANNER_LINK_UPGRADE",mode:"assistive"})}try{er.displayName||(er.displayName="QuotaExceededBanner")}catch{}var es=a(74807),el=a(57352);function eo(){let e,t,a,n,s,l,o,c,d,u,m,h,p=(0,i.c)(19),{resetDate:f}=(0,X.xR)(),[g,y]=(0,j.useState)(!1),[x,v]=(0,j.useState)(!1);p[0]===Symbol.for("react.memo_cache_sentinel")?(e=()=>{y(!0),v(!0)},p[0]=e):e=p[0];let _=e;p[1]===Symbol.for("react.memo_cache_sentinel")?(t=()=>{y(!1)},p[1]=t):t=p[1];let C=t;p[2]===Symbol.for("react.memo_cache_sentinel")?(a=()=>{v(!1)},p[2]=a):a=p[2];let b=a,S=g||x;return p[3]!==g||p[4]!==S?(n=S?(0,r.jsx)(es.N,{animationType:"jumpWiggle",loopAnimation:g,size:80,onAnimationEnd:b}):(0,r.jsx)(es.N,{animationType:"static",loopAnimation:!1,size:80}),p[3]=g,p[4]=S,p[5]=n):n=p[5],p[6]===Symbol.for("react.memo_cache_sentinel")?(s=(0,r.jsx)("h2",{className:"QuotaExceededEmptyState-module__heading--jMYRX",children:"You\u2019ve reached your free plan limit"}),p[6]=s):s=p[6],p[7]!==f?(l=(0,r.jsxs)("p",{className:"QuotaExceededEmptyState-module__description--SvMpU",children:["Your limits will reset on ",f,"."]}),p[7]=f,p[8]=l):l=p[8],p[9]===Symbol.for("react.memo_cache_sentinel")?(o=(0,r.jsx)(et.z,{as:"a",variant:"primary",href:"https://github.com/github-copilot/pro",onMouseEnter:_,onMouseLeave:C,onClick:ec,children:"Upgrade"}),p[9]=o):o=p[9],p[10]!==l?(c=(0,r.jsxs)("div",{className:"QuotaExceededEmptyState-module__copy--Ul81N",children:[s,l,o]}),p[10]=l,p[11]=c):c=p[11],p[12]!==n||p[13]!==c?(d=(0,r.jsxs)("div",{className:"QuotaExceededEmptyState-module__main--rwRZl",children:[n,c]}),p[12]=n,p[13]=c,p[14]=d):d=p[14],p[15]===Symbol.for("react.memo_cache_sentinel")?(u=(0,r.jsx)("strong",{children:"Part of an organization?"}),p[15]=u):u=p[15],p[16]===Symbol.for("react.memo_cache_sentinel")?(m=(0,r.jsxs)("div",{className:"QuotaExceededEmptyState-module__footer--lM9PT",children:[u,(0,r.jsxs)("span",{children:["Upgrade to"," ",(0,r.jsx)(el.A,{href:"https://github.com/github-copilot/business_signup/choose_business_type?cft=copilot_li.features_copilot.cfb",inline:!0,children:"Copilot Business"})," ","to enable across teams."]})]}),p[16]=m):m=p[16],p[17]!==d?(h=(0,r.jsxs)("div",{className:"QuotaExceededEmptyState-module__container--UBt9E",children:[d,m]}),p[17]=d,p[18]=h):h=p[18],h}function ec(){(0,N.BI)("dotcom_chat.activate",{target:"QUOTA_EXCEEDED_EMPTY_STATE_LINK_UPGRADE",mode:"assistive"})}try{eo.displayName||(eo.displayName="QuotaExceededEmptyState")}catch{}var ed=a(79064);function eu(){let e,t,a,n,s,l,c,d=(0,i.c)(9),{isLicensedLimited:u,chatQuotaRemaining:m}=(0,X.xR)(),[h,p]=(0,j.useState)(eh);d[0]!==m||d[1]!==u?(e=()=>{if(u&&void 0!==m){let e=ed.Jt.getMeterBannerFlag();m>0&&m<=10?null===e?(ed.Jt.setMeterBannerFlag(!0),p(!0)):p(e):(ed.Jt.removeMeterBannerFlag(),p(!1))}},t=[u,m],d[0]=m,d[1]=u,d[2]=e,d[3]=t):(e=d[2],t=d[3]),(0,j.useEffect)(e,t),d[4]===Symbol.for("react.memo_cache_sentinel")?(a=()=>{ed.Jt.setMeterBannerFlag(!1),p(!1)},d[4]=a):a=d[4];let f=a;if(!h||void 0===m)return null;d[5]===Symbol.for("react.memo_cache_sentinel")?(n=(0,r.jsx)(o.InfoIcon,{}),d[5]=n):n=d[5];let g=n;d[6]===Symbol.for("react.memo_cache_sentinel")?(s=(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(ee.s,{children:(0,r.jsx)("h2",{children:"Usage limit approaching"})}),"You only have a few free responses remaining."]}),d[6]=s):s=d[6];let y=s;d[7]===Symbol.for("react.memo_cache_sentinel")?(l=(0,r.jsx)(et.z,{as:"a",href:"https://github.com/features/copilot#pricing",onClick:em,children:"Upgrade"}),d[7]=l):l=d[7];let x=l;return d[8]===Symbol.for("react.memo_cache_sentinel")?(c=(0,r.jsx)("div",{className:"QuotaMeterBanner-module__container--BWRlc",children:(0,r.jsx)(en,{icon:g,content:y,actions:x,onDismiss:f})}),d[8]=c):c=d[8],c}function em(){(0,N.BI)("dotcom_chat.activate",{target:"QUOTA_METER_BANNER_LINK_UPGRADE",mode:"assistive"})}function eh(){return ed.Jt.getMeterBannerFlag()??!1}try{eu.displayName||(eu.displayName="QuotaMeterBanner")}catch{}var ep=a(33544),ef=a(78328);function eg(e){let t,a,n,s=(0,i.c)(4),{mode:l}=e;s[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,r.jsx)("div",{className:"ChatWithCopilotHeader-module__iconContainer--XyD0H",children:(0,r.jsx)(ef.A,{})}),a=(0,r.jsx)(h.A,{as:"h1",className:"ChatWithCopilotHeader-module__headerTitle--ovUdi",children:"Ask Copilot"}),s[0]=t,s[1]=a):(t=s[0],a=s[1]);let o="immersive"===l?5:3;return s[2]!==o?(n=(0,r.jsxs)(r.Fragment,{children:[t,a,(0,r.jsx)(A.EY,{as:"p",sx:{mb:o},className:"ChatWithCopilotHeader-module__descriptionText--bb_1f",children:"Select a repository to get started. Ask questions about your codebase to get answers fast and learn your way around."})]}),s[2]=o,s[3]=n):n=s[3],n}try{eg.displayName||(eg.displayName="ChatWithCopilotHeader")}catch{}function ey(e){let t,a=(0,i.c)(4),{docset:n,size:s}=e,l="organization"===n.ownerType;return a[0]!==n.avatarUrl||a[1]!==s||a[2]!==l?(t=(0,r.jsx)(m.r,{src:n.avatarUrl,square:l,size:s}),a[0]=n.avatarUrl,a[1]=s,a[2]=l,a[3]=t):t=a[3],t}try{ey.displayName||(ey.displayName="KnowledgeBaseAvatar")}catch{}var ex=a(70170),ev=a(99511),e_=a(26408),eC=a(26239),ej=a(27844);let eb="TopicList-module__mutedLeadingVisual--zyTv5";function eS(){let e,t,a,n,s,l,c,u,m,h,p,f=(0,i.c)(23),g=(0,D.b)(),{mode:y,selectedThreadID:x}=(0,F.Pk)(),[v,_]=(0,j.useState)("");f[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,ex.s)(e=>_(e),400,{start:!1}),f[0]=e):e=f[0];let C=e,{repositories:b,loading:S,resetTopRepoResults:N}=(0,e_.U)(v,!0,4);f[1]!==g||f[2]!==y||f[3]!==N||f[4]!==x?(t=async e=>{if(N(),void 0===e){g.showTopicPicker(!1),g.clearCurrentTopic(),g.clearCurrentReferences(),"immersive"===y&&(0,w.kd)("/copilot"),x&&ed.Jt.setSelectedTopic(x,null);return}await g.fetchCurrentRepo(Number(e)),g.showTopicPicker(!1)},f[1]=g,f[2]=y,f[3]=N,f[4]=x,f[5]=t):t=f[5];let I=t;e:{if(S){a="Loading repositories";break e}if(0===b.length){a="No repositories found";break e}if(1===b.length){a="1 repository found";break e}a=`${b.length} repositories found`}let E=a;return f[6]===Symbol.for("react.memo_cache_sentinel")?(n=(0,r.jsx)("div",{className:"TopicList-module__searchInputContainer--MpQGB",children:(0,r.jsx)(ev.A,{id:eC.uN,leadingVisual:o.SearchIcon,name:"topic-search","aria-label":"Search repositories to chat about",placeholder:"Search repositories to chat about",onChange:e=>C(e.target.value),className:"TopicList-module__TextInput--tm_7r"})}),f[6]=n):n=f[6],f[7]!==E?(s=(0,r.jsx)("div",{role:"status",className:"sr-only",children:E}),f[7]=E,f[8]=s):s=f[8],f[9]!==I||f[10]!==S||f[11]!==b?(l=S?(0,r.jsx)("li",{className:"TopicList-module__loadingContainer--gQUvo",children:(0,r.jsx)(d.A,{})}):0===b.length?(0,r.jsxs)(G.l.Item,{disabled:!0,children:[(0,r.jsx)(G.l.LeadingVisual,{className:eb,children:(0,r.jsx)(o.CircleSlashIcon,{})}),(0,r.jsx)("span",{className:eb,children:"No results found"})]}):(0,r.jsx)(r.Fragment,{children:b.length>0&&(0,r.jsxs)(G.l.Group,{children:[(0,r.jsx)(G.l.GroupHeading,{as:"h3",children:"Recent repositories"}),b.map(e=>(0,r.jsx)(ej.W,{repo:e,onSelect:I,trailingVisualComponent:(0,r.jsx)(o.ArrowRightIcon,{})},e.nwo))]})}),f[9]=I,f[10]=S,f[11]=b,f[12]=l):l=f[12],f[13]===Symbol.for("react.memo_cache_sentinel")?(c=(0,r.jsx)(G.l.Divider,{className:"TopicList-module__ActionList_Divider--tKVd_"}),f[13]=c):c=f[13],f[14]!==I?(u=()=>I(void 0),f[14]=I,f[15]=u):u=f[15],f[16]===Symbol.for("react.memo_cache_sentinel")?(m=(0,r.jsx)(G.l.TrailingVisual,{children:(0,r.jsx)(o.ArrowRightIcon,{})}),f[16]=m):m=f[16],f[17]!==u?(h=(0,r.jsxs)(G.l.Item,{id:"chat-with-no-context",onSelect:u,className:"TopicList-module__generalPurposeItem--UKLE6",children:["General purpose chat",m]},"chat-with-no-context"),f[17]=u,f[18]=h):h=f[18],f[19]!==s||f[20]!==l||f[21]!==h?(p=(0,r.jsxs)("div",{className:"TopicList-module__TopicListContainer--q95Ja",children:[n,(0,r.jsxs)(G.l,{children:[s,l,c,h]})]}),f[19]=s,f[20]=l,f[21]=h,f[22]=p):p=f[22],p}try{eS.displayName||(eS.displayName="TopicList")}catch{}let ew=()=>{let e,t,a,n,s,l,o=(0,i.c)(14),c=(0,F.Pk)();e:{let t;if(!c.ssoOrganizations){let t;o[0]===Symbol.for("react.memo_cache_sentinel")?(t=[],o[0]=t):t=o[0],e=t;break e}o[1]!==c.ssoOrganizations?(t=c.ssoOrganizations.map(eA),o[1]=c.ssoOrganizations,o[2]=t):t=o[2],e=t}let d=e;return o[3]!==c.mode?(t=(0,r.jsx)(eg,{mode:c.mode}),o[3]=c.mode,o[4]=t):t=o[4],o[5]===Symbol.for("react.memo_cache_sentinel")?(a=(0,r.jsx)("div",{className:"TopicPicker-module__topicListContainer--q3K2a",children:(0,r.jsx)(eS,{})}),o[5]=a):a=o[5],o[6]!==d?(n=!(0,S.G7)("global_sso_banner")&&(0,r.jsx)(ep.x,{portalContainerName:Y.E5,protectedOrgs:d,redirectURI:eT,className:"TopicPicker-module__SingleSignOnBanner--WOn5V"}),o[6]=d,o[7]=n):n=o[7],o[8]!==c.currentTopic?(s=(0,r.jsx)(eN,{currentTopic:c.currentTopic}),o[8]=c.currentTopic,o[9]=s):s=o[9],o[10]!==t||o[11]!==n||o[12]!==s?(l=(0,r.jsx)("div",{className:"TopicPicker-module__TopicPickerContainer--jqRrB",children:(0,r.jsxs)("div",{className:"TopicPicker-module__mainContentContainer--EAEDK",children:[t,a,n,s]})}),o[10]=t,o[11]=n,o[12]=s,o[13]=l):l=o[13],l};function eN(e){let t,a=(0,i.c)(2),{currentTopic:n}=e;return(0,L.P)(n)?(a[0]!==n?(t=(0,r.jsx)("div",{className:"TopicPicker-module__topicDescriptionContainer--CGD3V",children:(0,r.jsx)(eI,{docset:n})}),a[0]=n,a[1]=t):t=a[1],t):null}function eI(e){let t,a,n,s,l,o,c,d,u=(0,i.c)(16),{docset:m}=e;return u[0]!==m?(t=(0,r.jsx)(ey,{docset:m,size:24}),u[0]=m,u[1]=t):t=u[1],u[2]!==m.name?(a=(0,r.jsx)(h.A,{as:"h3",className:"TopicPicker-module__Heading--m61pA",children:m.name}),u[2]=m.name,u[3]=a):a=u[3],u[4]===Symbol.for("react.memo_cache_sentinel")?(n=(0,r.jsx)("span",{className:"TopicPicker-module__statusText--EdXY0",children:"Knowledge base added to conversation"}),u[4]=n):n=u[4],u[5]!==t||u[6]!==a?(s=(0,r.jsxs)("div",{className:"TopicPicker-module__docsetHeaderContainer--E0Vtq",children:[t,a," ",n]}),u[5]=t,u[6]=a,u[7]=s):s=u[7],u[8]===Symbol.for("react.memo_cache_sentinel")?(l=(0,r.jsx)(h.A,{as:"h4",className:"TopicPicker-module__repositoriesSubheading--ihIfq",children:"Repositories in this knowledge base"}),u[8]=l):l=u[8],u[9]!==m.repos?(o=m.repos.map(eE),u[9]=m.repos,u[10]=o):o=u[10],u[11]!==o?(c=(0,r.jsx)("div",{className:"TopicPicker-module__repositoriesContainer--x7mXz",children:o}),u[11]=o,u[12]=c):c=u[12],u[13]!==s||u[14]!==c?(d=(0,r.jsxs)("div",{className:"TopicPicker-module__docsetDescriptionCard--IYOzX",children:[s,l,c]}),u[13]=s,u[14]=c,u[15]=d):d=u[15],d}function eE(e){return(0,r.jsxs)("div",{className:"TopicPicker-module__repositoryItem--hnv1a",children:[(0,r.jsx)(o.RepoIcon,{}),` ${e}`]},e)}try{ew.displayName||(ew.displayName="TopicPicker")}catch{}try{eN.displayName||(eN.displayName="TopicDescription")}catch{}try{eI.displayName||(eI.displayName="DocsetDescription")}catch{}function eA(e){return e.login}function eT(){return`/search/refresh_blackbird_caches?return_to=${location.href}`}let eR=({disableTopicPicker:e,inputRef:t,showQuotaExceededEmptyState:a})=>{let n=(0,F.Pk)(),{isWaitingOnCopilot:i,showTopicPicker:s,streamingMessage:l}=n,{scrollToBottom:o}=(0,q.b)(),{messages:c,groupedMessages:d}=(0,k.a)(n);return(0,I.N)(()=>o("instant"),[o]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("h2",{className:"sr-only",children:"Copilot Chat"}),a?(0,r.jsx)(eo,{}):s&&!e?(0,r.jsx)(ew,{}):(0,r.jsx)("div",{className:"Chat-module__ChatMainContainer--r_Lbb",children:(0,r.jsxs)("div",{className:(0,T.$)("copilot-messages-container","Chat-module__messagesContainer--pUaGC"),children:[0===c.length&&(0,r.jsx)("p",{className:"Chat-module__legalText--nFibb",children:(0,r.jsx)(J.h,{})}),d.map((e,a)=>(0,r.jsx)(H.i,{isLastGroup:a===d.length-1,children:e.map((s,o)=>{let u=a===d.length-1&&o===e.length-1;return(s===l||s.id===M.Wp||!ek(s)||!O.W.dotcomChatClientSideSkills||s.error||eL(s,u,n))&&(0,r.jsx)(V.c,{isLatestMessage:u,isFirstReply:1===c.length,isStreaming:s.id===l?.id||u&&i,message:s,inputRef:t},o)})},a)),n.clientSkillConfirmation&&O.W.dotcomChatClientSideSkills&&(0,r.jsx)("div",{className:"m-3",children:(0,r.jsx)(K.m,{confirmation:n.clientSkillConfirmation,handleConfirmation:e=>n.clientSkillConfirmation?.onSubmit?.("accepted"===e.state),isLatestMessage:!0})})]})})]})},ek=e=>!e.content&&(!e.confirmations||0===e.confirmations.length)&&(!e.clientConfirmations||0===e.clientConfirmations.length),eL=(e,t,a)=>(e.clientSkillsRequests&&e.clientSkillsRequests.length>0||e.clientToolResults&&e.clientToolResults.length>0)&&t&&!a.streamingMessage&&!a.clientSkillConfirmation,eP=()=>(0,r.jsxs)("div",{className:"Chat-module__loadingStateContainer--jXyyu",children:[(0,r.jsx)(d.A,{size:"large"}),(0,r.jsx)("div",{className:"Chat-module__loadingText--XRJo1",children:"Loading conversation\u2026"})]}),eM=()=>{let{mode:e,reviewLab:t}=(0,F.Pk)();return(0,r.jsxs)(A.az,{sx:{pl:"immersive"===e?3:2},className:"Chat-module__errorContainer--Ci2Ci",children:[(0,r.jsx)(E.A,{icon:o.AlertIcon}),"Failed to load previous messages.",t&&(0,r.jsx)(r.Fragment,{children:"\xa0You are in a review lab. Please check that you are connected to the Developer VPN."})]})},eO=({inputRef:e})=>{let t=(0,F.Pk)(),a=(0,D.b)(),{currentReferences:n,messagesLoading:i,messagesRestored:s,threadsLoading:l,currentTopic:c,messages:d,mode:u,selectedThreadID:m,showTopicPicker:h,context:p}=t,f=(0,$.W)(t),g=(0,j.useMemo)(()=>(0,L.k4)(Object.keys(z.Pe)).slice(0,4).map(e=>({heading:e,content:(0,L.k4)(z.Pe[e])[0]})),[]),{textAreaRef:y}=(0,R.Y)(e),{chatQuotaExceeded:x,isLicensedLimited:v,reloadQuota:_}=(0,X.xR)(),{ambientError:C}=(0,F.Pk)(),[I,E]=(0,j.useState)(!0),[A,k]=(0,j.useState)("chat"),M=(0,S.G7)("copilot_metadata_poc"),O=!!p&&p[0]&&("file"===p[0].type||"file-v2"===p[0].type),V=(0,B.GF)(t.availableModels);(0,j.useEffect)(()=>{if(!m||"assistive"===u)return;let e=`${L.Jz}/c/${m}`;window.location.pathname!==e&&0!==d.length&&(0,w.kd)(e)},[m,u,d.length]);let H=(0,j.useCallback)(async(e,r)=>{if(""===e.trim())return;_("user_submit");let i=[...n,...r||[]];await a.sendChatMessage({thread:f,content:e,references:i,topic:c,context:p,customInstructions:t.customInstructions,skillOptions:t.skillOptions,model:V})},[_,a,f,n,c,p,t.customInstructions,t.skillOptions,V]),K=s&&d.length>0,G="loading"===i.state&&t.selectedThreadID&&!h&&!K,Q="error"===i.state||"error"===l.state,J="loaded"===i.state||K,ee=x&&(h||!f),[et]=(0,j.useState)(t.renderAttachKnowledgeBaseHerePopover),ea=(0,P.B)(d),en=!!(!G&&!t.currentTopic&&!h&&0===ea.length&&!et&&0===n.length);return(0,r.jsxs)(r.Fragment,{children:[M&&O&&(0,r.jsx)(b,{fileContext:p[0],loading:I,setLoading:E,currentTab:A,setCurrentTab:k,makeCAPIRequest:L.p}),(!M||!!M&&"chat"===A)&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(q.$,{className:"copilot-chat-messages",style:{flex:"1 1 auto"},children:[G&&(0,r.jsx)(eP,{}),Q&&(0,r.jsx)(eM,{}),J&&!G&&(0,r.jsx)(eR,{inputRef:y,showQuotaExceededEmptyState:ee}),(0,r.jsx)(Y.Cb,{})]}),en&&(0,r.jsx)("div",{className:(0,T.$)("copilot-chat-messages","Chat-module__suggestedPromptsGrid--DPria"),children:g.map((e,n)=>(0,r.jsx)(eF,{heading:e.heading,content:e.content,onSubmit:()=>{a.sendChatMessage({thread:(0,$.W)(t),content:e.content,references:t.currentReferences,topic:t.currentTopic,context:t.context}),(0,N.BI)("copilot_chat_suggestion_click",{topic:t.currentTopic?.name})}},n))}),!G&&!h&&!ee&&(0,r.jsx)("div",{className:(0,T.$)("copilot-chat-input copilot-chat-input-outer","Chat-module__chatInputContainer--yKT4X"),children:x?(0,r.jsx)(er,{}):(0,r.jsxs)(r.Fragment,{children:[!en&&0===ea.length&&!t.showTopicPicker&&(0,r.jsx)(Z,{suggestionKind:"initial"}),(0,r.jsxs)("div",{children:[v&&(0,r.jsx)(eu,{}),C&&(0,r.jsx)(U.P,{ambientError:C}),(0,r.jsx)(W.V,{modes:[{name:"Chat",supportsMCP:!0,supportsAttachments:!0,supportsModelSwitching:!0,supportsSpaces:!0,supportsAutocompletion:!0,icon:(0,r.jsx)(o.CommentIcon,{})}],textAreaRef:y,onSubmit:H,isStreaming:!!t.streamingMessage,size:"small"},m)]})]})})]}),(0,r.jsx)(Y.zc,{})]})};function eF({heading:e,content:t,onSubmit:a}){return(0,r.jsxs)(u.Q,{onClick:a,className:"Chat-module__suggestedPromptButton--VrQUl",children:[(0,r.jsx)(h.A,{as:"h3",className:"Chat-module__promptHeading--CccY2",children:e}),(0,r.jsx)("p",{className:"Chat-module__promptDescription--gkjS8",children:t})]})}try{eR.displayName||(eR.displayName="Messages")}catch{}try{eP.displayName||(eP.displayName="Loading")}catch{}try{eM.displayName||(eM.displayName="Error")}catch{}try{eO.displayName||(eO.displayName="Chat")}catch{}try{eF.displayName||(eF.displayName="SuggestedPrompt")}catch{}},14521:(e,t,a)=>{a.d(t,{G:()=>c});var n=a(21728),r=a(79802),i=a(96540),s=a(2635),l=a(23657),o=a(72303);function c(){let e,t=(0,n.c)(1),a=(0,i.useRef)(null);t[0]===Symbol.for("react.memo_cache_sentinel")?(e=e=>{let t=(0,o.W)(e),n=(0,r.O)(t);return(0,l.Ym)(a.current,n)?a.current:(a.current=n,n)},t[0]=e):e=t[0];let c=(0,s.pn)(e);return(0,l.iI)()||c}},15838:(e,t,a)=>{a.d(t,{Cd:()=>o,E5:()=>l,Im:()=>c,nW:()=>s});var n=a(11083),r=a(94416);let i="stats:soft-nav-duration",s={turbo:"TURBO",react:"REACT","turbo.frame":"FRAME",ui:"UI",hard:"HARD"};function l(){window.performance.clearResourceTimings(),window.performance.mark(i)}function o(e){(0,n.i)({turboFailureReason:e,turboStartUrl:(0,r.dR)(),turboEndUrl:window.location.href})}function c(){let e=function(){if(0===performance.getEntriesByName(i).length)return null;performance.measure(i,i);let e=performance.getEntriesByName(i).pop();return e?e.duration:null}();if(!e)return;let t=s[(0,r.di)()],a=Math.round(e);t===s.react&&document.dispatchEvent(new CustomEvent("staffbar-update",{detail:{duration:a}})),(0,n.i)({requestUrl:window.location.href,softNavigationTiming:{mechanism:t,destination:(0,r.fX)()||"rails",duration:a,initiator:(0,r.Pv)()||"rails"}})}},16378:(e,t,a)=>{a.d(t,{O:()=>i,_:()=>s});var n=a(47970),r=a(99054);function i(e){let t=new Set;return(0,n.YR)(e,e=>{"reference-mention"===e.type&&void 0!==e.data.mentionedReferenceId&&t.add(e.data.mentionedReferenceId)}),t}function s(e){return r.qj.test(e.split(/\s/)[0]??"")}},17485:(e,t,a)=>{a.d(t,{C:()=>s});var n=a(25536),r=a(14521),i=a(96540);function s(){let e=(0,r.G)(),{selectedCopilotSpaceId:t,setSelectedCopilotSpaceId:a,selectedThreadId:s}=(0,n.O)(),l=!!s||!!e;(0,i.useEffect)(()=>{a(e||void 0)},[e,a]);let o=t||e,c=(0,i.useCallback)(e=>{l||a({id:e.id,owner:e.owner})},[a,l]),d=(0,i.useCallback)(()=>{l||a(void 0)},[a,l]);return{activeCopilotSpaceId:o,readOnly:l,handleSpaceSelect:c,clearSpaceSelection:d}}},17925:(e,t,a)=>{a.d(t,{V:()=>r,x:()=>i});var n=a(35247);function r(e,t){if(0===t.length||!n.W.chatInputCommands)return null;let a=RegExp(`^\\/(${t.join("|")})(?:\\s|$)`,"i"),r=e.match(a);return r&&r[1]?r[1].toLowerCase():null}function i(e,t){return!!t&&e.trim().toLowerCase()===`/${t.toLowerCase()}`}},20263:(e,t,a)=>{a.d(t,{BC:()=>o,JU:()=>d,Pk:()=>l});var n=a(74848),r=a(35811),i=a(99418),s=a(96540);let l=u(r.az),o=u(r.EY),c=(0,s.forwardRef)((e,t)=>(0,n.jsx)("div",{ref:t,...e}));c.displayName="Div";let d=u(c);function u(e){let t=(0,s.forwardRef)((t,a)=>{let{sanitizedHTML:r,props:s}=function(e){let{html:t,domPurifyConfig:a,...n}=e,r={...a,RETURN_DOM:!1,RETURN_DOM_FRAGMENT:!1};return{sanitizedHTML:i.default.sanitize(t,r),props:n}}(t);return(0,n.jsx)(e,{ref:a,...s,dangerouslySetInnerHTML:{__html:r}})});return t.displayName=`UnsafeHTML${e.displayName||e.name}`,t}try{d.displayName||(d.displayName="UnsafeHTMLDiv")}catch{}},26408:(e,t,a)=>{a.d(t,{U:()=>d});var n=a(81171),r=a(82490),i=a(96540),s=a(18312),l=a(2635),o=a(33592),c=a(23657);function d(e,t,a,m,h=!1){let[p,f]=(0,i.useState)(),g=(0,i.useCallback)(()=>f(void 0),[]),{topRepositoriesCache:y,currentRepository:x}=(0,l.Pk)(),v=(0,o.b)(),[_,C]=(0,i.useState)([]),[j,b]=(0,i.useState)(!y&&"initial"),S=(0,i.useRef)(void 0),w=(0,s.useRelayEnvironment)(),N=m&&""!==m.trim();if(p&&!y&&!e&&!N){let e=u(p||[]),{ownerLogin:t,name:a}=x??{};x&&!e.find(e=>`${e.ownerLogin}/${e.name}`==`${t}/${a}`)&&e.splice(0,0,{databaseId:x.id,isInOrganization:"Organization"===x.ownerType,name:x.name,nwo:`${x.ownerLogin}/${x.name}`,ownerLogin:x.ownerLogin,ownerAvatarUrl:`/${x.ownerLogin}.png?s=40`}),setTimeout(()=>v.setTopRepositoryTopics(e),10),b(!1),f(void 0)}let I=(0,i.useCallback)(async()=>{try{let e=await (0,n.St)(w,{first:a,owner:N?m:void 0});f(e)}catch{}finally{b(!1)}},[N,m,w,f,a]);return((0,i.useEffect)(()=>{t&&!N&&I()},[I,N,t,m]),(0,i.useEffect)(()=>{let t=async e=>{b(!0);let{repositories:t}=await (0,n.vO)(w,{query:N?(0,c.rl)(m,e,h):(0,r.J)(e,{includeForks:h}),onStart:e=>{S.current?.unsubscribe(),S.current=e}});C(t.length?u(t):[]),b(!1)};e||N?t(e):y&&C(y)},[e,N,m,w,y,h]),(0,i.useEffect)(()=>{v.setTopRepositoryTopics(void 0)},[v,m]),!y||e||N)?{repositories:_,loading:j,resetTopRepoResults:g}:{repositories:y,loading:!1,resetTopRepoResults:g}}function u(e){return e.map(({owner:{login:e,avatarUrl:t},isInOrganization:a,name:n,databaseId:r})=>({databaseId:r??0,isInOrganization:a,name:n,nwo:`${e}/${n}`,ownerLogin:e,ownerAvatarUrl:t}))}},27844:(e,t,a)=>{a.d(t,{W:()=>l});var n=a(74848),r=a(21728),i=a(77430),s=a(5524);function l(e){let t,a,l,o,c=(0,r.c)(14),{onSelect:d,repo:u,selected:m,trailingVisualComponent:h}=e,{databaseId:p,isInOrganization:f,nwo:g,ownerAvatarUrl:y}=u;return c[0]!==p||c[1]!==d?(t=()=>d(p),c[0]=p,c[1]=d,c[2]=t):t=c[2],c[3]!==f||c[4]!==y?(a=(0,n.jsx)(s.l.LeadingVisual,{children:(0,n.jsx)(i.r,{src:y,square:f,size:16})}),c[3]=f,c[4]=y,c[5]=a):a=c[5],c[6]!==h?(l=h&&(0,n.jsx)(s.l.TrailingVisual,{children:h}),c[6]=h,c[7]=l):l=c[7],c[8]!==g||c[9]!==m||c[10]!==t||c[11]!==a||c[12]!==l?(o=(0,n.jsxs)(s.l.Item,{onSelect:t,selected:m,children:[a,g,l]},g),c[8]=g,c[9]=m,c[10]=t,c[11]=a,c[12]=l,c[13]=o):o=c[13],o}try{l.displayName||(l.displayName="RepositoryListItem")}catch{}},28600:(e,t,a)=>{a.d(t,{A:()=>l});let{getItem:n,setItem:r,removeItem:i}=(0,a(82075).A)("localStorage"),s="REACT_PROFILING_ENABLED",l={enable:()=>r(s,"true"),disable:()=>i(s),isEnabled:()=>!!n(s)}},30459:(e,t,a)=>{a.d(t,{S:()=>o,s:()=>l});var n=a(21728),r=a(96540),i=a(53419),s=a(49936);function l(){let e,t,a=(0,n.c)(6),l=(0,r.useContext)(s.I);if(!l)throw Error("useAnalytics must be used within an AnalyticsContext");let{appName:o,category:c,metadata:d}=l;a[0]!==o||a[1]!==c||a[2]!==d?(e=(e,t,a)=>{let n={react:!0,app_name:o,category:c,...d};(0,i.BI)(e,{...n,...void 0===a?{}:a,target:t})},a[0]=o,a[1]=c,a[2]=d,a[3]=e):e=a[3];let u=e;return a[4]!==u?(t={sendAnalyticsEvent:u},a[4]=u,a[5]=t):t=a[5],t}function o(){let e,t,a=(0,n.c)(4),{sendAnalyticsEvent:r}=l();a[0]!==r?(e=e=>{r("analytics.click",void 0,void 0===e?{}:e)},a[0]=r,a[1]=e):e=a[1];let i=e;return a[2]!==i?(t={sendClickAnalyticsEvent:i},a[2]=i,a[3]=t):t=a[3],t}},30558:(e,t,a)=>{a.d(t,{c:()=>k});var n=a(74848),r=a(4817),i=a(98755),s=a(77430),l=a(53419),o=a(29731),c=a(38621),d=a(35811),u=a(34164),m=a(96540),h=a(52940),p=a(25641),f=a(2635),g=a(33592),y=a(55009),x=a(77939),v=a(46665),_=a(59524),C=a(88752),j=a(32744),b=a(82178),S=a(94517),w=a(73010),N=a(11633),I=a(31958),E=a(42983),A=a(82151),T=a(45244);let R=({isLatestMessage:e,isFirstReply:t,isStreaming:a,onClickReference:R,...k})=>{let{message:L}=(0,v.V)(),P=(0,f.Pk)(),M=(0,g.b)(),{author:O,handleConfirmationAction:F,handleRetryErrorMessage:D,hasClientConfirmations:$,isAI:B,isCopilot:z,isError:U,isAgentError:W,isInterrupted:V,isUser:H,myRef:q,rendererConfig:K,renderFeedback:G,shouldShowMessageActions:Q,skillExecutionToUseForRespondingText:Z,showRetryButton:J}=(0,h.p)({excludeFeedback:k.excludeFeedback,inputRef:k.inputRef,isLatestMessage:e,isStreaming:a,excludeReferencesFromFocusZone:!0}),Y=L.clientToolResults&&L.clientToolResults.length>0,X=L.clientSkillsRequests&&L.clientSkillsRequests.length>0,ee=H&&!Y,et=a||Y||X,ea=et&&e,en=z||Y,er=(0,m.useMemo)(()=>(0,p.rT)(L.references??[]),[L.references]),ei=(0,m.useMemo)(()=>(0,p.H2)(L.references??[]),[L.references]),es=(0,m.useMemo)(()=>M.maxMessagesReached(),[M]),el=er.filter(e=>"image"!==e.type&&"org-instructions"!==e.type),eo=(0,m.useMemo)(()=>L.mediaContent?.filter(e=>e.mediaType.startsWith("image/")),[L.mediaContent]),ec=(0,m.useMemo)(()=>void 0!==eo&&eo.length>0,[eo]),ed=(0,m.useCallback)(e=>{let t=e.target.href,a=er.find(e=>e.url===t);a&&"immersive"===P.mode&&(M.selectReference(a),e.preventDefault())},[M,er,P.mode]),eu=(0,m.useCallback)(e=>{M.setWrapCodeLines(e)},[M]);return(0,n.jsxs)("div",{className:(0,u.$)("message-container",x.A.messageContainer,ee&&x.A.user,B&&x.A.ai),ref:q,...(0,o.G)(`message-${U?"error":a?"streaming":L.id}`),children:[ee&&ec&&(0,n.jsx)("div",{children:eo?.map(e=>(0,n.jsx)(y.o,{src:e?.url||"",alt:"Uploaded image",mode:P.mode},e?.url||""))}),en||Y?(0,n.jsx)(b.W,{isLoading:et&&e,isError:U&&L.error?.type!=="agentUnauthorized",mode:P.mode,isFirstMessage:t,isLoadingSkills:(L.skillExecutions??[]).length>0&&et&&""===L.content&&e,message:L.content||"",createdAt:L.createdAt}):B?(0,n.jsx)("div",{className:x.A.avatar,children:(0,n.jsx)(s.r,{src:O.avatarURL,size:24,"aria-label":`${O.name} avatar`,alt:`${O.name} avatar`,"data-testid":"chat-message-author-avatar"})}):null,ee&&(0,n.jsx)(C.t,{size:"small",className:"mb-2",references:el,message:L,onClickReference:R}),(0,n.jsxs)("div",{className:(0,u.$)(x.A.message,ee&&x.A.user),children:[$&&L.clientConfirmations?.length?(0,n.jsx)(d.az,{className:(0,u.$)("my-1",x.A.clientConfirmationContainer),sx:{justifyContent:ee?"flex-end":""},"data-testid":"chat-message-client-confirmations",children:(0,n.jsxs)("span",{className:x.A.confirmationStatusText,children:[(0,n.jsx)(c.CheckIcon,{})," ",L.clientConfirmations?.[0]?.userLogin||"User"," ",L.clientConfirmations?.[0]?.state," the action"]})}):null,z&&ea&&!L.content&&(0,n.jsx)(T.b,{className:(0,u.$)(x.A.skillExecutionText,"mb-2 mt-1 ml-2"),children:`${(0,N.WA)(Z)}...`}),(0,n.jsx)("div",{className:(0,u.$)(x.A.messageContent,!!$&&x.A.hasClientConfirmations),children:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:(0,u.$)("js-snippet-clipboard-copy-unpositioned",x.A.messageContentWrapper),children:["assistant"===L.role&&L.content&&(er?.length?(0,n.jsx)(C.s,{className:"mb-2",references:er}):null),"assistant"===L.role&&(ei.length?(0,n.jsx)(_.Q,{mcpToolResults:ei}):null),!$&&(ee?(0,n.jsx)(A.R,{}):L.content&&(0,n.jsx)(r.To,{markdown:L.content,onLinkClick:ed,chatMode:"assistive",wrapCodeLines:P.wrapCodeLines,onWrapCodeLinesChange:eu,...K})),U?(0,n.jsx)(S.K,{manager:M}):null,W&&L.agentErrors?.length?(0,n.jsx)(S.h,{errors:L.agentErrors}):null,V?(0,n.jsx)(I.h,{messageHasContent:!!L.content||!!L.skillExecutions?.length}):null,(z||(0,p.yh)(O))&&(0,p.Ye)(L.confirmations).map((t,a)=>"indexrepo"===t.confirmation.name?null:(0,n.jsx)(j.m,{confirmation:t,handleConfirmation:F,isLatestMessage:e},a))]}),!Q&&J&&(0,n.jsx)(E.$,{handleRetryMessage:D,disabled:es}),Q&&(0,n.jsxs)(d.az,{className:(0,u.$)("message-actions",x.A.messageActionsContainer),"data-testid":"message-action-bar",sx:{position:e?void 0:"absolute",bottom:e?void 0:"-2.25rem",borderRadius:e?void 0:2,boxShadow:e?void 0:"var(--shadow-floating-small)",opacity:e?void 0:0,pointerEvents:e?void 0:"none","&::before":{content:e?void 0:'""',position:"absolute"}},children:[G&&(0,n.jsx)(w.G,{iconSize:"small"}),z&&!!L.content&&!a&&(0,n.jsx)(i.T,{textToCopy:L.content??"",ariaLabel:"Copy to clipboard",size:"small",className:"d-flex flex-items-center",onCopy:()=>{(0,l.BI)("copilot_chat.activate",{target:"CHAT_MESSAGE_COPY",mode:P.mode})}}),J&&(0,n.jsx)(E.$,{handleRetryMessage:D,disabled:es})]})]})})]})]})},k=({message:e,...t})=>(0,n.jsx)(v.$,{message:e,children:(0,n.jsx)(R,{...t})});try{R.displayName||(R.displayName="InnerChatMessage")}catch{}try{k.displayName||(k.displayName="ChatMessage")}catch{}},31971:(e,t,a)=>{a.d(t,{M:()=>n});function n(e){switch(e.type){case"repository":return{repository_id:e.repositoryId};case"github_file":return{repository_id:e.repositoryId,file_path:e.filePath,sha:e.sha};case"free_text":return{text:e.text,name:e.name};case"github_issue":case"github_pull_request":return{repository_id:e.repositoryId,number:e.number};case"uploaded_text_file":return{name:e.name};case"media_content":return{media_type:e.mediaType,name:e.name,url:e.url,height:e.height,width:e.width};default:throw Error("Unsupported resource")}}},33544:(e,t,a)=>{a.d(t,{x:()=>f});var n=a(74848),r=a(38621),i=a(57352),s=a(94236),l=a(5524),o=a(35811),c=a(88934),d=a(96540),u=a(11083),m=a(62227),h=a(34164),p=a(69599);function f({className:e,portalContainerName:t,protectedOrgs:a,maxVisibleOrgNames:s=3,redirectURI:l,useFullWidthStyle:f,forceWrap:x,sx:v}){let _=(0,c.zy)(),C=(0,d.useRef)(!1);if((0,d.useEffect)(()=>{(0,p.G7)("record_sso_banner_metrics")&&!C.current&&a&&a.length>0&&((0,u.i)({incrementKey:(0,p.G7)("global_sso_banner")?"LEGACY_SSO_BANNER_DISPLAYED_WITH_GLOBAL_BANNER_ENABLED":"LEGACY_SSO_BANNER_DISPLAYED",requestUrl:window.location.href}),C.current=!0)},[a]),!a||0===a.length)return null;let j=Math.max(0,a.length-s),b=1===a.length||j>0?(0,n.jsx)("b",{children:a.slice(0,s).join(", ")}):(0,n.jsxs)("span",{children:[(0,n.jsx)("b",{children:a.slice(0,a.length-1).join(", ")}),a.length>2&&","," and ",(0,n.jsx)("b",{children:a[a.length-1]})]});return(0,n.jsx)(o.az,{sx:v,className:e,"data-testid":"sso-banner",children:(0,n.jsx)("div",{className:m.A.Box,children:(0,n.jsx)("section",{"aria-label":"Single sign-on information",children:(0,n.jsx)(o.Hx,{sx:{borderRadius:2*!f,borderWidth:f?"1px 0":1},className:m.A.Flash,children:1===a.length?(0,n.jsxs)("div",{children:[(0,n.jsx)(r.ShieldLockIcon,{className:m.A.ShieldLockIcon}),(0,n.jsx)(i.A,{inline:!0,href:`/orgs/${a[0]}/sso?return_to=${y({location:_,redirectURI:l})}`,children:"Single sign-on"})," ","to see results in the ",(0,n.jsx)("b",{children:a[0]})," organization."]}):(0,n.jsxs)("div",{className:m.A.Box_1,children:[(0,n.jsx)(r.ShieldLockIcon,{className:m.A.Octicon}),(0,n.jsxs)("div",{className:(0,h.$)(m.A.Box_2,x&&m.A.ForceWrap),children:[(0,n.jsxs)("p",{className:m.A.ProtectedOrgs_FullList,children:["Single sign-on to see results in ",0===j&&"the ",s>0&&(0,n.jsxs)(n.Fragment,{children:[b," "]}),j>0&&(0,n.jsxs)(n.Fragment,{children:[s>0&&"and ",j," other"," "]}),a.length>1&&1!==j?"organizations":"organization","."]}),(0,n.jsx)("p",{className:m.A.ProtectedOrgs_Shortened,children:"Single sign-on to see results in your organizations"}),(0,n.jsx)("div",{style:{flexShrink:0},children:(0,n.jsx)(g,{portalContainerName:t,protectedOrgs:a,redirectURI:l})})]})]})})})})})}function g({portalContainerName:e,protectedOrgs:t,redirectURI:a}){let r=(0,c.zy)();return(0,n.jsxs)(s.W,{children:[(0,n.jsx)(s.W.Button,{size:"small",children:"Select an organization"}),(0,n.jsx)(s.W.Overlay,{portalContainerName:e,children:(0,n.jsx)(l.l,{children:t.map(e=>(0,n.jsx)(l.l.Item,{onSelect:()=>{window.location.href=`/orgs/${encodeURIComponent(e)}/sso?return_to=${y({location:r,redirectURI:a})}`},children:e},`org-${e}`))})})]})}function y({location:e,redirectURI:t}){return encodeURIComponent(t?t(e):e.pathname+e.search+e.hash)}try{f.displayName||(f.displayName="SingleSignOnBanner")}catch{}try{g.displayName||(g.displayName="SingleSignOnButton")}catch{}},35673:(e,t,a)=>{a.d(t,{UJ:()=>g,E5:()=>o,Dq:()=>c,Gj:()=>d,f1:()=>u,cB:()=>m,zc:()=>h,Cb:()=>p,hl:()=>f});var n=a(74848),r=a(21728),i=a(56149),s=a(94236),l=a(96540);let o="copilotChatMenuPortalRoot",c="copilotChatMessagesMenuPortalRoot",d="copilotChatPortalRoot",u="copilotChatTopicPickerPortalRoot",m=()=>{let e,t,a,s=(0,r.c)(3),o=(0,l.useRef)(null);return s[0]===Symbol.for("react.memo_cache_sentinel")?(e=()=>{(0,i.cw)(o.current,d)},t=[],s[0]=e,s[1]=t):(e=s[0],t=s[1]),(0,l.useEffect)(e,t),s[2]===Symbol.for("react.memo_cache_sentinel")?(a=(0,n.jsx)("div",{ref:o,className:"PortalContainerUtils-module__chatPortalContainer--Otmle"}),s[2]=a):a=s[2],a},h=()=>{let e,t,a,s=(0,r.c)(3),c=(0,l.useRef)(null);return s[0]===Symbol.for("react.memo_cache_sentinel")?(e=()=>{(0,i.cw)(c.current,o)},t=[],s[0]=e,s[1]=t):(e=s[0],t=s[1]),(0,l.useEffect)(e,t),s[2]===Symbol.for("react.memo_cache_sentinel")?(a=(0,n.jsx)("div",{ref:c,className:"PortalContainerUtils-module__menuPortalContainer--D7AeL"}),s[2]=a):a=s[2],a},p=()=>{let e,t,a,s=(0,r.c)(3),o=(0,l.useRef)(null);return s[0]===Symbol.for("react.memo_cache_sentinel")?(e=()=>{(0,i.cw)(o.current,c)},t=[],s[0]=e,s[1]=t):(e=s[0],t=s[1]),(0,l.useEffect)(e,t),s[2]===Symbol.for("react.memo_cache_sentinel")?(a=(0,n.jsx)("div",{ref:o}),s[2]=a):a=s[2],a},f=()=>{let e,t,a,s=(0,r.c)(3),o=(0,l.useRef)(null);return s[0]===Symbol.for("react.memo_cache_sentinel")?(e=()=>{(0,i.cw)(o.current,u)},t=[],s[0]=e,s[1]=t):(e=s[0],t=s[1]),(0,l.useEffect)(e,t),s[2]===Symbol.for("react.memo_cache_sentinel")?(a=(0,n.jsx)("div",{ref:o}),s[2]=a):a=s[2],a},g=e=>{let t,a,i,c,d,u,m=(0,r.c)(10);m[0]!==e?({children:t,portalContainerName:i,...a}=e,m[0]=e,m[1]=t,m[2]=a,m[3]=i):(t=m[1],a=m[2],i=m[3]);let[h,p]=(0,l.useState)(y);if(m[4]===Symbol.for("react.memo_cache_sentinel")?(c=()=>p(!0),d=[],m[4]=c,m[5]=d):(c=m[4],d=m[5]),(0,l.useEffect)(c,d),!h)return null;let f=i||o;return m[6]!==t||m[7]!==a||m[8]!==f?(u=(0,n.jsx)(s.W.Overlay,{...a,portalContainerName:f,children:t}),m[6]=t,m[7]=a,m[8]=f,m[9]=u):u=m[9],u};try{m.displayName||(m.displayName="ChatPortalContainer")}catch{}try{h.displayName||(h.displayName="MenuPortalContainer")}catch{}try{p.displayName||(p.displayName="MessagesPortalContainer")}catch{}try{f.displayName||(f.displayName="TopicPickerPortalContainer")}catch{}try{g.displayName||(g.displayName="ActionMenuOverlay")}catch{}function y(){return"undefined"!=typeof document}},39176:(e,t,a)=>{a.d(t,{k:()=>n});function n(e){return function e(t,a){let n=t[a];return n?n.items.map(a=>({data:a,items:"directory"===a.contentType?e(t,a.path):[]})).sort((e,t)=>"directory"===e.data.contentType&&"directory"!==t.data.contentType?-1:"directory"!==e.data.contentType&&"directory"===t.data.contentType?1:e.data.name.localeCompare(t.data.name)):[]}(function(e){let{paths:t,directories:a}=e,n={},r=new Set(a);for(let e of(n[""]={items:[],totalCount:0},[...a].sort())){let t=e.substring(0,e.lastIndexOf("/"))||"",a={name:e.substring(e.lastIndexOf("/")+1),path:e,contentType:"directory"};n[t]||(n[t]={items:[],totalCount:0}),n[t].items.push(a),n[e]||(n[e]={items:[],totalCount:0})}for(let e of t.filter(e=>!r.has(e)).sort()){let t=e.substring(0,e.lastIndexOf("/"))||"",a={name:e.substring(e.lastIndexOf("/")+1),path:e,contentType:"file"};n[t]||(n[t]={items:[],totalCount:0}),n[t].items.push(a)}for(let e in n){let t=n[e];t&&t.items.sort((e,t)=>"directory"===e.contentType&&"directory"!==t.contentType?-1:"directory"!==e.contentType&&"directory"===t.contentType?1:e.name.localeCompare(t.name))}let i=e=>{let t=n[e];return t?t.items.reduce((e,t)=>"directory"===t.contentType?e+1+i(t.path):e+1,0):0};for(let e in n){let t=n[e];t&&(t.totalCount=i(e))}return n}(e),"")}},40064:(e,t,a)=>{a.d(t,{V:()=>m});var n=a(74848),r=a(96540),i=a(43258),s=a(38621),l=a(52870),o=a(56149);let c={info:"",success:"Toast--success",error:"Toast--error"},d={info:(0,n.jsx)(s.InfoIcon,{}),success:(0,n.jsx)(s.CheckIcon,{}),error:(0,n.jsx)(s.StopIcon,{})},u=({message:e,timeToLive:t,icon:a,type:i="info",role:s="log"})=>{let[u,m]=r.useState(!0),{safeSetTimeout:h}=(0,l.A)();return(0,r.useEffect)(()=>{t&&h(()=>m(!1),t-300)},[h,t]),(0,n.jsx)(o.ZL,{children:(0,n.jsx)("div",{className:"p-1 position-fixed bottom-0 left-0 mb-3 ml-3",children:(0,n.jsxs)("div",{className:`Toast ${c[i]} ${u?"Toast--animateIn":"Toast--animateOut"}`,id:"ui-app-toast","data-testid":`ui-app-toast-${i}`,role:s,children:[(0,n.jsx)("span",{className:"Toast-icon",children:a||d[i]}),(0,n.jsx)("span",{className:"Toast-content",children:e})]})})})};try{u.displayName||(u.displayName="Toast")}catch{}function m(){let{toasts:e,persistedToast:t}=(0,r.useContext)(i.T8);return(0,n.jsxs)(n.Fragment,{children:[e.map((e,t)=>(0,n.jsx)(u,{message:e.message,icon:e.icon,timeToLive:i.Qn,type:e.type,role:e.role},t)),t&&(0,n.jsx)(u,{message:t.message,icon:t.icon,type:t.type,role:t.role})]})}try{m.displayName||(m.displayName="Toasts")}catch{}},44956:(e,t,a)=>{a.d(t,{m:()=>i});var n=a(74848),r=a(21373);function i({onSave:e,onCancel:t,saveButtonText:a,isLoading:i=!1,loadingAnnouncement:s="",disabled:l=!1}){return(0,n.jsxs)("div",{className:"SpaceDialogFooter-module__footerContainer--J2LGP",children:[(0,n.jsx)(r.Q,{variant:"default",onClick:t,children:"Cancel"}),(0,n.jsx)(r.Q,{variant:"primary",loading:i,loadingAnnouncement:s,onClick:e,disabled:l,children:a})]})}try{i.displayName||(i.displayName="SpaceDialogFooter")}catch{}},46642:(e,t,a)=>{a.d(t,{P:()=>d});var n=a(74848),r=a(96540),i=a(38621),s=a(69497),l=a(21373),o=a(70170),c=a(86391);function d({currentSelection:e,repositoryLoader:t,onSelect:a,selectionVariant:d,selectAllOption:u,additionalButtonProps:m,buttonText:h="",width:p,truncateMaxWidth:f,height:g,fullscreenOnNarrow:y,defaultOwner:x,onLoad:v,loadingElement:_}){let[C,j]=(0,r.useState)(""),[b,S]=(0,r.useState)([]),[w,N]=(0,r.useState)(!0),I=(0,r.useCallback)((0,o.s)(async e=>{try{let a=await t(e,x);S(a),v?.(a)}catch{}N(!1)},200),[t,x]);(0,r.useEffect)(()=>{N(!0),I(C)},[C,I,N]);let E=(0,r.useCallback)(e=>{"single"===d?!e[0]||e[0]._all?a(void 0):a(e[0]):a(e)},[d,a]),A=(0,r.useMemo)(()=>"multiple"===d?e||[]:e?[e]:[],[d,e]),T=(0,r.useCallback)(e=>{let t,a="medium"===p?35:"large"===p?60:24;return(e.name.length>a&&(t=`${e.name.substring(0,a)}...`),e._all)?{id:e.name,text:"All repositories",source:e,groupId:"all"}:{id:e.name,text:t||e.name,source:e,groupId:"select",disabled:!1===e.enabled,leadingVisual:()=>e.private?(0,n.jsx)(i.RepoLockedIcon,{size:16}):(0,n.jsx)(i.RepoIcon,{size:16})}},[p]),R=(0,r.useCallback)(e=>e.name,[]),k=(0,r.useMemo)(()=>{let e=[];return e.push(...A.filter(e=>b.every(t=>t.name!==e.name))||[]),e.push(...b),u&&e.push({name:"$all$",_all:!0}),e},[b,u,A]),L=h,P=i.RepoIcon;return L||("multiple"===d?L=A.length>0?`${A.length} repositor${A.length>1?"ies":"y"}`:"Select repositories":A.length>0&&A[0]?(L=A[0].name,P=A[0].private?i.RepoLockedIcon:i.RepoIcon):L=u?"All repositories":"Select a repository"),_&&w&&!e?_:(0,n.jsx)(c.O,{renderAnchor:({"aria-labelledby":e,...t})=>(0,n.jsx)(l.Q,{leadingVisual:P,trailingAction:i.TriangleDownIcon,"aria-labelledby":e,...t,...m,children:(0,n.jsx)(s.A,{title:L,maxWidth:f??195,children:L})}),placeholderText:"Search",items:k,loading:w,groups:u?[{groupId:"all"},{groupId:"select"}]:[],selectionVariant:d,initialSelectedItems:A,onSelectionChange:E,filterItems:j,getItemKey:R,convertToItemProps:T,title:"Select a repository",width:p,height:g,responsiveOnNarrow:y})}try{d.displayName||(d.displayName="ReposSelector")}catch{}},49851:(e,t,a)=>{a.d(t,{Dy:()=>o,FD:()=>h,GS:()=>i,KJ:()=>s,LP:()=>c,OZ:()=>y,c9:()=>g,gh:()=>f,hO:()=>u,j6:()=>d,md:()=>m,wB:()=>p});var n=a(74848),r=a(21728);let i=e=>{let t,a,i,s,l,o,c,d=(0,r.c)(10);d[0]!==e?(t=void 0===e?{}:e,d[0]=e,d[1]=t):t=d[1];let{size:u,className:m}=t,h=void 0===u?16:u;return d[2]===Symbol.for("react.memo_cache_sentinel")?(a={display:"inline-block",verticalAlign:"text-bottom"},d[2]=a):a=d[2],d[3]===Symbol.for("react.memo_cache_sentinel")?(i=(0,n.jsx)("path",{d:"M11.1997 3.60004H12.4797C13.5401 3.60004 14.3997 4.45965 14.3997 5.52004V10.64C14.3997 11.7005 13.5401 12.56 12.4797 12.56H11.1997",stroke:"currentColor",strokeLinecap:"round"}),s=(0,n.jsx)("path",{d:"M4.79985 12.56H3.51985C2.45947 12.56 1.59985 11.7005 1.59985 10.64V5.52004C1.59985 4.45965 2.45947 3.60004 3.51985 3.60004H4.79985",stroke:"currentColor",strokeLinecap:"round"}),l=(0,n.jsx)("path",{d:"M8.00015 5.2C8.8838 5.2 9.60015 4.48366 9.60015 3.6C9.60015 2.71634 8.8838 2 8.00015 2C7.11649 2 6.40015 2.71634 6.40015 3.6C6.40015 4.48366 7.11649 5.2 8.00015 5.2Z",fill:"currentColor"}),o=(0,n.jsx)("path",{d:"M8.00015 14.16C8.8838 14.16 9.60015 13.4437 9.60015 12.56C9.60015 11.6764 8.8838 10.96 8.00015 10.96C7.11649 10.96 6.40015 11.6764 6.40015 12.56C6.40015 13.4437 7.11649 14.16 8.00015 14.16Z",fill:"currentColor"}),d[3]=i,d[4]=s,d[5]=l,d[6]=o):(i=d[3],s=d[4],l=d[5],o=d[6]),d[7]!==m||d[8]!==h?(c=(0,n.jsxs)("svg",{className:m,width:h,height:h,style:a,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",children:[i,s,l,o]}),d[7]=m,d[8]=h,d[9]=c):c=d[9],c},s=e=>{let t,a,i,s,l=(0,r.c)(7);l[0]!==e?(t=void 0===e?{}:e,l[0]=e,l[1]=t):t=l[1];let{size:o,className:c}=t,d=void 0===o?16:o;return l[2]===Symbol.for("react.memo_cache_sentinel")?(a={display:"inline-block",verticalAlign:"text-bottom"},i=(0,n.jsx)("path",{fill:"currentColor",fillRule:"evenodd",d:"M14.515.456a1.555 1.555 0 00-2.2 0L6.58 6.19a1.556 1.556 0 00-.396.673l-.825 2.89a.667.667 0 00.824.824l2.89-.826c.254-.072.485-.209.672-.396l5.735-5.734a1.556 1.556 0 000-2.2l-.965-.965zm-1.257.942a.222.222 0 01.314 0l.965.966a.222.222 0 010 .314L13.415 3.8l-1.28-1.28 1.123-1.122zm-2.065 2.066l1.279 1.279-3.67 3.67a.221.221 0 01-.096.056l-1.736.496.496-1.736c.01-.036.03-.07.057-.096l3.67-3.67zM1.639 4.778a2.25 2.25 0 012.25-2.25h3.154a.75.75 0 000-1.5H3.889a3.75 3.75 0 00-3.75 3.75v7.333a3.75 3.75 0 003.75 3.75h7.333a3.75 3.75 0 003.75-3.75V8.445a.75.75 0 00-1.5 0v3.666a2.25 2.25 0 01-2.25 2.25H3.889a2.25 2.25 0 01-2.25-2.25V4.778z",clipRule:"evenodd"}),l[2]=a,l[3]=i):(a=l[2],i=l[3]),l[4]!==c||l[5]!==d?(s=(0,n.jsx)("svg",{className:c,width:d,height:d,fill:"none",viewBox:"0 0 16 16","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",style:a,children:i}),l[4]=c,l[5]=d,l[6]=s):s=l[6],s},l=e=>{let t,a,i,s,l=(0,r.c)(7);l[0]!==e?(t=void 0===e?{}:e,l[0]=e,l[1]=t):t=l[1];let{size:o,className:c}=t,d=void 0===o?16:o;return l[2]===Symbol.for("react.memo_cache_sentinel")?(a={display:"inline-block",verticalAlign:"text-bottom"},i=(0,n.jsx)("path",{fill:"currentColor",fillRule:"evenodd",d:"M13 .5H3A2.5 2.5 0 0 0 .5 3v10A2.5 2.5 0 0 0 3 15.5h10a2.5 2.5 0 0 0 2.5-2.5V3A2.5 2.5 0 0 0 13 .5M2 3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1zm6 6.25a1.25 1.25 0 1 0 0-2.5 1.25 1.25 0 0 0 0 2.5M12.25 5a1.25 1.25 0 1 1-2.5 0 1.25 1.25 0 0 1 2.5 0M5 12.25a1.25 1.25 0 1 0 0-2.5 1.25 1.25 0 0 0 0 2.5",clipRule:"evenodd"}),l[2]=a,l[3]=i):(a=l[2],i=l[3]),l[4]!==c||l[5]!==d?(s=(0,n.jsx)("svg",{className:c,width:d,height:d,fill:"none",viewBox:"0 0 16 16","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",style:a,children:i}),l[4]=c,l[5]=d,l[6]=s):s=l[6],s},o=e=>{let t,a,i,s,l,o=(0,r.c)(8);o[0]!==e?(t=void 0===e?{}:e,o[0]=e,o[1]=t):t=o[1];let{size:c,className:d}=t,u=void 0===c?16:c;return o[2]===Symbol.for("react.memo_cache_sentinel")?(a={display:"inline-block",verticalAlign:"text-bottom"},i=(0,n.jsx)("path",{d:"M7.41299 14.25H1.75C1.19772 14.25 0.75 13.8023 0.75 13.25V2.75C0.75 2.19772 1.19772 1.75 1.75 1.75H5C5.31476 1.75 5.61115 1.89819 5.8 2.15L6.7 3.35C6.88885 3.60181 7.18524 3.75 7.5 3.75H14.25C14.8023 3.75 15.25 4.19772 15.25 4.75V8.48779",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),s=(0,n.jsx)("path",{d:"M12.265 9.15977C12.3446 8.94235 12.6521 8.94235 12.7317 9.15977L12.9693 9.80865C13.3464 10.8387 14.158 11.6503 15.1881 12.0274L15.8369 12.265C16.0544 12.3446 16.0544 12.6521 15.8369 12.7317L15.1881 12.9692C14.158 13.3463 13.3464 14.158 12.9693 15.188L12.7317 15.8369C12.6521 16.0543 12.3446 16.0543 12.265 15.8369L12.0275 15.188C11.6504 14.158 10.8387 13.3463 9.80871 12.9692L9.15983 12.7317C8.94241 12.6521 8.94241 12.3446 9.15983 12.265L9.80871 12.0274C10.8387 11.6503 11.6504 10.8387 12.0275 9.80865L12.265 9.15977Z",fill:"currentColor"}),o[2]=a,o[3]=i,o[4]=s):(a=o[2],i=o[3],s=o[4]),o[5]!==d||o[6]!==u?(l=(0,n.jsxs)("svg",{className:d,width:u,height:u,fill:"none",viewBox:"0 0 16 16","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",style:a,children:[i,s]}),o[5]=d,o[6]=u,o[7]=l):l=o[7],l},c=e=>{let t,a,i,s,l,o=(0,r.c)(8);o[0]!==e?(t=void 0===e?{}:e,o[0]=e,o[1]=t):t=o[1];let{size:c,className:d}=t,u=void 0===c?16:c;return o[2]===Symbol.for("react.memo_cache_sentinel")?(a={display:"inline-block",verticalAlign:"text-bottom"},i=(0,n.jsx)("path",{d:"M16.0376 9.67565V5.82038C16.0376 5.69043 15.9257 5.58508 15.7876 5.58508H11.6914C11.4687 5.58508 11.3571 5.83853 11.5146 5.98676L15.6108 9.84196C15.7683 9.99019 16.0376 9.88525 16.0376 9.67565Z",fill:"currentColor"}),s=(0,n.jsx)("path",{d:"M1.89601 3.25629C4.26064 1.03075 8.04807 0.960969 10.5015 3.04765L10.7339 3.25629L10.7857 3.3096C11.0259 3.58685 11.0085 3.99602 10.7339 4.25445C10.4593 4.51252 10.0254 4.52825 9.73097 4.30225L9.67336 4.25445L9.4966 4.09544C7.63201 2.50983 4.75358 2.56313 2.95656 4.25445C1.10158 6.00031 1.10158 8.83023 2.95656 10.5761C4.81155 12.322 7.8184 12.3219 9.67336 10.5761L13.563 6.91622C13.8559 6.64063 14.3307 6.64058 14.6236 6.91622C14.9163 7.19186 14.9163 7.63873 14.6236 7.91438L10.7339 11.5752C8.29328 13.8718 4.33667 13.8718 1.89601 11.5752C-0.544758 9.27799 -0.544771 5.55349 1.89601 3.25629Z",fill:"currentColor"}),o[2]=a,o[3]=i,o[4]=s):(a=o[2],i=o[3],s=o[4]),o[5]!==d||o[6]!==u?(l=(0,n.jsxs)("svg",{className:d,width:u,height:u,fill:"none",viewBox:"0 0 16 16","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",style:a,children:[i,s]}),o[5]=d,o[6]=u,o[7]=l):l=o[7],l},d=e=>{let t,a,i,s,l,o=(0,r.c)(8);o[0]!==e?(t=void 0===e?{}:e,o[0]=e,o[1]=t):t=o[1];let{size:c,className:d}=t,u=void 0===c?16:c;return o[2]===Symbol.for("react.memo_cache_sentinel")?(a={display:"inline-block",verticalAlign:"text-bottom"},o[2]=a):a=o[2],o[3]===Symbol.for("react.memo_cache_sentinel")?(i=(0,n.jsxs)("g",{clipPath:"url(#boolean-on-a)",children:[(0,n.jsx)("rect",{x:"1.25",y:"1.25",width:"13.5",height:"13.5",rx:"1.75",stroke:"currentColor",strokeWidth:"1.5"}),(0,n.jsx)("rect",{x:"7",y:"5",width:"2",height:"6",rx:"1",fill:"currentColor"})]}),o[3]=i):i=o[3],o[4]===Symbol.for("react.memo_cache_sentinel")?(s=(0,n.jsx)("defs",{children:(0,n.jsx)("clipPath",{id:"boolean-on-a",children:(0,n.jsx)("rect",{width:"16",height:"16",fill:"white"})})}),o[4]=s):s=o[4],o[5]!==d||o[6]!==u?(l=(0,n.jsxs)("svg",{className:d,xmlns:"http://www.w3.org/2000/svg",width:u,height:u,fill:"none",viewBox:"0 0 16 16","aria-hidden":"true",style:a,children:[i,s]}),o[5]=d,o[6]=u,o[7]=l):l=o[7],l},u=e=>{let t,a,i,s,l,o=(0,r.c)(8);o[0]!==e?(t=void 0===e?{}:e,o[0]=e,o[1]=t):t=o[1];let{size:c,className:d}=t,u=void 0===c?16:c;return o[2]===Symbol.for("react.memo_cache_sentinel")?(a={display:"inline-block",verticalAlign:"text-bottom"},o[2]=a):a=o[2],o[3]===Symbol.for("react.memo_cache_sentinel")?(i=(0,n.jsxs)("g",{clipPath:"url(#boolean-off-a)",children:[(0,n.jsx)("rect",{x:"1.25",y:"1.25",width:"13.5",height:"13.5",rx:"1.75",stroke:"currentColor",strokeWidth:"1.5"}),(0,n.jsx)("circle",{cx:"8",cy:"8",r:"2.25",stroke:"currentColor",strokeWidth:"1.5"})]}),o[3]=i):i=o[3],o[4]===Symbol.for("react.memo_cache_sentinel")?(s=(0,n.jsx)("defs",{children:(0,n.jsx)("clipPath",{id:"boolean-off-a",children:(0,n.jsx)("rect",{width:"16",height:"16",fill:"white"})})}),o[4]=s):s=o[4],o[5]!==d||o[6]!==u?(l=(0,n.jsxs)("svg",{className:d,xmlns:"http://www.w3.org/2000/svg",width:u,height:u,fill:"none",viewBox:"0 0 16 16","aria-hidden":"true",style:a,children:[i,s]}),o[5]=d,o[6]=u,o[7]=l):l=o[7],l},m=e=>{let t,a,i,s,l,o,c,d=(0,r.c)(10);d[0]!==e?(t=void 0===e?{}:e,d[0]=e,d[1]=t):t=d[1];let{size:u,className:m}=t,h=void 0===u?16:u;return d[2]===Symbol.for("react.memo_cache_sentinel")?(a={display:"inline-block",verticalAlign:"text-bottom"},i=(0,n.jsx)("rect",{x:"1.25",y:"3.25",width:"13.5",height:"9.5",rx:"1.75",stroke:"currentColor",strokeWidth:"1.5"}),s=(0,n.jsx)("path",{d:"M6 6L6 10",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),l=(0,n.jsx)("path",{d:"M4 6H8",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),o=(0,n.jsx)("path",{d:"M9 10L12 10",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),d[2]=a,d[3]=i,d[4]=s,d[5]=l,d[6]=o):(a=d[2],i=d[3],s=d[4],l=d[5],o=d[6]),d[7]!==m||d[8]!==h?(c=(0,n.jsxs)("svg",{className:m,xmlns:"http://www.w3.org/2000/svg",width:h,height:h,fill:"none",viewBox:"0 0 16 16","aria-hidden":"true",style:a,children:[i,s,l,o]}),d[7]=m,d[8]=h,d[9]=c):c=d[9],c},h=e=>{let t,a,i,s,l,o,c,d,u,m=(0,r.c)(12);m[0]!==e?(t=void 0===e?{}:e,m[0]=e,m[1]=t):t=m[1];let{size:h,className:p}=t,f=void 0===h?16:h;return m[2]===Symbol.for("react.memo_cache_sentinel")?(a={display:"inline-block",verticalAlign:"text-bottom"},i=(0,n.jsx)("path",{d:"M13 11.25L12.25 11.25L12.25 12.75L13 12.75L13 12L13 11.25ZM14 12.75C14.4142 12.75 14.75 12.4142 14.75 12C14.75 11.5858 14.4142 11.25 14 11.25L14 12L14 12.75ZM13 12L13 12.75L14 12.75L14 12L14 11.25L13 11.25L13 12Z",fill:"currentColor"}),s=(0,n.jsx)("path",{d:"M2 11.25C1.58579 11.25 1.25 11.5858 1.25 12C1.25 12.4142 1.58579 12.75 2 12.75L2 12L2 11.25ZM7 12.75L7.75 12.75L7.75 11.25L7 11.25L7 12L7 12.75ZM2 12L2 12.75L7 12.75L7 12L7 11.25L2 11.25L2 12Z",fill:"currentColor"}),l=(0,n.jsx)("circle",{cx:"10",cy:"12",r:"2.25",stroke:"currentColor",strokeWidth:"1.5"}),o=(0,n.jsx)("path",{d:"M2 3.25C1.58579 3.25 1.25 3.58579 1.25 4C1.25 4.41421 1.58579 4.75 2 4.75L2 4L2 3.25ZM3 4.75L3.75 4.75L3.75 3.25L3 3.25L3 4L3 4.75ZM2 4L2 4.75L3 4.75L3 4L3 3.25L2 3.25L2 4Z",fill:"currentColor"}),c=(0,n.jsx)("path",{d:"M9 3.25L8.25 3.25L8.25 4.75L9 4.75L9 4L9 3.25ZM14 4.75C14.4142 4.75 14.75 4.41421 14.75 4C14.75 3.58579 14.4142 3.25 14 3.25L14 4L14 4.75ZM9 4L9 4.75L14 4.75L14 4L14 3.25L9 3.25L9 4Z",fill:"currentColor"}),d=(0,n.jsx)("circle",{cx:"6",cy:"4",r:"2.25",stroke:"currentColor",strokeWidth:"1.5"}),m[2]=a,m[3]=i,m[4]=s,m[5]=l,m[6]=o,m[7]=c,m[8]=d):(a=m[2],i=m[3],s=m[4],l=m[5],o=m[6],c=m[7],d=m[8]),m[9]!==p||m[10]!==f?(u=(0,n.jsxs)("svg",{className:p,xmlns:"http://www.w3.org/2000/svg",width:f,height:f,fill:"none",viewBox:"0 0 16 16","aria-hidden":"true",style:a,children:[i,s,l,o,c,d]}),m[9]=p,m[10]=f,m[11]=u):u=m[11],u},p=e=>{let t,a,i,s,l,o=(0,r.c)(8);o[0]!==e?(t=void 0===e?{}:e,o[0]=e,o[1]=t):t=o[1];let{size:c,className:d}=t,u=void 0===c?16:c;return o[2]===Symbol.for("react.memo_cache_sentinel")?(a={display:"inline-block",verticalAlign:"text-bottom"},i=(0,n.jsx)("rect",{x:"1.25",y:"3.25",width:"13.5",height:"9.5",rx:"1.75",stroke:"currentColor",strokeWidth:"1.5"}),s=(0,n.jsx)("path",{d:"M9.81055 7.75L11.1895 7.75L10.5 8.43945L9.81055 7.75Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),o[2]=a,o[3]=i,o[4]=s):(a=o[2],i=o[3],s=o[4]),o[5]!==d||o[6]!==u?(l=(0,n.jsxs)("svg",{className:d,xmlns:"http://www.w3.org/2000/svg",width:u,height:u,fill:"none",viewBox:"0 0 16 16","aria-hidden":"true",style:a,children:[i,s]}),o[5]=d,o[6]=u,o[7]=l):l=o[7],l},f=e=>{let t,a,i,s,l,o=(0,r.c)(8);o[0]!==e?(t=void 0===e?{}:e,o[0]=e,o[1]=t):t=o[1];let{size:c,className:d}=t,u=void 0===c?16:c;return o[2]===Symbol.for("react.memo_cache_sentinel")?(a={display:"inline-block",verticalAlign:"text-bottom"},i=(0,n.jsx)("path",{d:"M15.2596 9.99995C15.4583 10.0025 15.6481 10.0834 15.787 10.2255C15.9258 10.3678 16.0022 10.5599 15.9999 10.7587C15.9974 10.9577 15.9166 11.1481 15.7743 11.2871L11.2167 15.7363C11.0753 15.8738 10.8855 15.9505 10.6883 15.9492C10.4909 15.9477 10.3013 15.8683 10.162 15.7285L8.21861 13.7783C8.08642 13.6359 8.01462 13.4472 8.01841 13.2529C8.02225 13.0587 8.10151 12.8734 8.23911 12.7363C8.37676 12.5992 8.56243 12.5206 8.75669 12.5175C8.95096 12.5145 9.1392 12.587 9.28111 12.7197L10.7001 14.1455L14.7264 10.2128C14.8688 10.074 15.0608 9.99751 15.2596 9.99995Z",fill:"currentColor"}),s=(0,n.jsx)("path",{d:"M11.75 1C12.9926 1 14 2.00736 14 3.25C14 4.22966 13.3739 5.06319 12.5 5.37207V6C12.5 7.38071 11.3807 8.5 10 8.5H6C5.44772 8.5 5 8.94772 5 9.5V10.6279C5.87389 10.9368 6.5 11.7703 6.5 12.75C6.5 13.9926 5.49264 15 4.25 15C3.00736 15 2 13.9926 2 12.75C2 11.7703 2.62611 10.9368 3.5 10.6279V5.37207C2.62611 5.06319 2 4.22966 2 3.25C2 2.00736 3.00736 1 4.25 1C5.49264 1 6.5 2.00736 6.5 3.25C6.5 4.22966 5.87389 5.06319 5 5.37207V7.20801C5.30623 7.07421 5.64445 7 6 7H10C10.5523 7 11 6.55228 11 6V5.37207C10.1261 5.06319 9.5 4.22966 9.5 3.25C9.5 2.00736 10.5074 1 11.75 1ZM4.25 12C3.83579 12 3.5 12.3358 3.5 12.75C3.5 13.1642 3.83579 13.5 4.25 13.5C4.66421 13.5 5 13.1642 5 12.75C5 12.3358 4.66421 12 4.25 12ZM4.25 2.5C3.83579 2.5 3.5 2.83579 3.5 3.25C3.5 3.66421 3.83579 4 4.25 4C4.66421 4 5 3.66421 5 3.25C5 2.83579 4.66421 2.5 4.25 2.5ZM11.75 2.5C11.3358 2.5 11 2.83579 11 3.25C11 3.66421 11.3358 4 11.75 4C12.1642 4 12.5 3.66421 12.5 3.25C12.5 2.83579 12.1642 2.5 11.75 2.5Z",fill:"currentColor"}),o[2]=a,o[3]=i,o[4]=s):(a=o[2],i=o[3],s=o[4]),o[5]!==d||o[6]!==u?(l=(0,n.jsxs)("svg",{className:d,xmlns:"http://www.w3.org/2000/svg",width:u,height:u,fill:"none",viewBox:"0 0 16 16","aria-hidden":"true",style:a,children:[i,s]}),o[5]=d,o[6]=u,o[7]=l):l=o[7],l},g=e=>{let t,a,i,s,l,o=(0,r.c)(8);o[0]!==e?(t=void 0===e?{}:e,o[0]=e,o[1]=t):t=o[1];let{size:c,className:d}=t,u=void 0===c?16:c;return o[2]===Symbol.for("react.memo_cache_sentinel")?(a={display:"inline-block",verticalAlign:"text-bottom"},i=(0,n.jsx)("path",{d:"M10.3359 0C10.7999 0 11.2452 0.183715 11.5732 0.512695L14.4873 3.42676C14.8163 3.75475 15 4.20008 15 4.66406V8.25098C15 8.66519 14.6642 9.00098 14.25 9.00098C13.8358 9.00098 13.5 8.66519 13.5 8.25098V6H10.75C10.2859 6 9.84088 5.81549 9.5127 5.4873C9.18451 5.15912 9 4.71413 9 4.25V1.5H3.75C3.6837 1.5 3.62013 1.52636 3.57324 1.57324C3.52636 1.62013 3.5 1.6837 3.5 1.75V14.25C3.5 14.388 3.612 14.5 3.75 14.5H7C7.41421 14.5 7.75 14.8358 7.75 15.25C7.75 15.6642 7.41421 16 7 16H3.75C3.28587 16 2.84088 15.8155 2.5127 15.4873C2.18451 15.1591 2 14.7141 2 14.25V1.75C2 0.784 2.784 0 3.75 0H10.3359ZM10.5 4.25C10.5 4.388 10.612 4.5 10.75 4.5H13.4385L13.4268 4.4873L10.5127 1.57324L10.5 1.56152V4.25Z",fill:"currentColor"}),s=(0,n.jsx)("path",{d:"M15.2588 10C15.4577 10.0024 15.6481 10.0833 15.7871 10.2256C15.926 10.3679 16.0023 10.56 16 10.7588C15.9976 10.9577 15.9167 11.1481 15.7744 11.2871L11.2168 15.7363C11.0754 15.874 10.8849 15.9507 10.6875 15.9492C10.4901 15.9476 10.3014 15.8675 10.1621 15.7275L8.21875 13.7783C8.08653 13.6359 8.01476 13.4472 8.01855 13.2529C8.02239 13.0587 8.10162 12.8734 8.23926 12.7363C8.37693 12.5992 8.56253 12.5206 8.75684 12.5176C8.95115 12.5145 9.13933 12.587 9.28125 12.7197L10.7002 14.1445L14.7256 10.2129C14.8679 10.074 15.06 9.99767 15.2588 10Z",fill:"currentColor"}),o[2]=a,o[3]=i,o[4]=s):(a=o[2],i=o[3],s=o[4]),o[5]!==d||o[6]!==u?(l=(0,n.jsxs)("svg",{className:d,xmlns:"http://www.w3.org/2000/svg",width:u,height:u,fill:"none",viewBox:"0 0 16 16","aria-hidden":"true",style:a,children:[i,s]}),o[5]=d,o[6]=u,o[7]=l):l=o[7],l},y={compose:s,dice:l,loops:c,node:i,spaces:o,booleanOn:d,booleanOff:u,input:m,range:h,select:p,gitBranchCheck:f,fileCheck:g};try{i.displayName||(i.displayName="NodeIcon")}catch{}try{s.displayName||(s.displayName="ComposeIcon")}catch{}try{l.displayName||(l.displayName="DiceIcon")}catch{}try{o.displayName||(o.displayName="SpacesIcon")}catch{}try{c.displayName||(c.displayName="LoopsIcon")}catch{}try{d.displayName||(d.displayName="BooleanOnIcon")}catch{}try{u.displayName||(u.displayName="BooleanOffIcon")}catch{}try{m.displayName||(m.displayName="InputIcon")}catch{}try{h.displayName||(h.displayName="RangeIcon")}catch{}try{p.displayName||(p.displayName="SelectIcon")}catch{}try{f.displayName||(f.displayName="GitBranchCheckIcon")}catch{}try{g.displayName||(g.displayName="FileCheckIcon")}catch{}},49936:(e,t,a)=>{a.d(t,{I:()=>n});let n=(0,a(96540).createContext)(null)},51407:(e,t,a)=>{a.d(t,{Y:()=>n});function n(){let e={};return e.promise=new Promise((t,a)=>{e.resolve=t,e.reject=a}),e}},51563:(e,t,a)=>{a.d(t,{$:()=>d});var n=a(33592),r=a(23657),i=a(72011),s=a(97665),l=a(94747),o=a(96379),c=a(31971);let d=e=>{let t=(0,n.b)(),a=(0,s.jE)(),{mutateAsync:d,...u}=(0,l.n)({onSuccess:async()=>{a.invalidateQueries({queryKey:i.O6}),e&&await a.invalidateQueries({queryKey:(0,i.dp)(e)})},mutationFn:async a=>{let n=e?(0,r.fn)(e):"/custom_copilots",i={custom_copilot:{owner_id:a.ownerId,owner_type:a.ownerType,name:a.name,icon_type:a.iconType,icon_color:a.iconColor,description:a.description,general_instructions:a.generalInstructions,resources_attributes:a.resources?.map(e=>({id:e.databaseId,copilot_chat_attachment_id:e.copilotChatAttachmentId,resource_type:e.type,_destroy:e.markedForDestroy,metadata:(0,c.M)(e)})),visibility:a.visibility,base_role:a.baseRole}},s=await (0,o.lS)(n,{method:e?"PUT":"POST",body:i}),l=await s.json();if(!s.ok)throw l.errorMessages;return t?.dispatch({type:"SET_CUSTOM_COPILOT",customCopilot:l}),l}});return{upsertCopilotSpace:d,...u}}},53627:(e,t,a)=>{a.d(t,{C3:()=>l,JV:()=>r,K3:()=>u,MM:()=>o,OE:()=>m,Zu:()=>d,bj:()=>i,jc:()=>c,kd:()=>s});var n=a(71315);function r(){return n.Kn?.state||{}}function i(e){h(r(),"",e)}function s(e){n.Kn?.pushState({appId:r().appId},"",e),p()}function l(e){h({...r(),...e},"",location.href)}function o(e){i(`?${e.toString()}${n.fV.hash}`)}function c(){i(n.fV.pathname+n.fV.hash)}function d(e){i(e.startsWith("#")?e:`#${e}`)}function u(){i(n.fV.pathname+n.fV.search)}function m(){n.Kn?.back()}function h(e,t,a){n.Kn?.replaceState(e,t,a),p()}function p(){n.cg?.dispatchEvent(new CustomEvent("statechange",{bubbles:!1,cancelable:!1}))}},53731:(e,t,a)=>{a.d(t,{V:()=>ax});var n,r=a(74848),i=a(21728),s=a(25641),l=a(35247),o=a(76872),c=a(84646),d=a(2635),u=a(79802);function m(){let{threads:e}=(0,d.Pk)(),t=Array.from(e.values()).sort((e,t)=>new Date(t.updatedAt).getTime()-new Date(e.updatedAt).getTime()).map(e=>(0,u.O)(e)).filter(e=>null!==e),a=(0,c.jS)(!0),{data:n}=a;if(void 0===n)return a;let r=new Set,i=[...t.map(e=>n.find(t=>e.id===t.id&&e.owner===t.owner)).filter(e=>{if(void 0===e)return!1;let t=`${e.owner}:${e.id}`;return!r.has(t)&&(r.add(t),!0)}),...[...n].sort((e,t)=>new Date(t.updatedAt).getTime()-new Date(e.updatedAt).getTime()).filter(e=>{let t=`${e.owner}:${e.id}`;return!r.has(t)})].slice(0,5);return{...a,data:i}}var h=a(17485),p=a(53419),f=a(82595),g=a(96540),y=a(34164);let x=(0,g.forwardRef)((e,t)=>{let a,n,s,l,o,c,d,u,m,h,p,f,g,x,v,_,C=(0,i.c)(33);if(C[0]!==e){let{icon:t,isSelected:r,onClick:i,hasMenu:m,isMenuOpen:h,selectedItemLabel:p,children:f,...g}=e;s=t,c=i,d=p,a=f,o=void 0!==r&&r,n=void 0!==m&&m,l=void 0!==h&&h,u=Object.keys(g).reduce((e,t)=>(t.startsWith("aria-")&&(e[t]=g[t]),e),{}),C[0]=e,C[1]=a,C[2]=n,C[3]=s,C[4]=l,C[5]=o,C[6]=c,C[7]=d,C[8]=u}else a=C[1],n=C[2],s=C[3],l=C[4],o=C[5],c=C[6],d=C[7],u=C[8];let j=u;C[9]!==n||C[10]!==l||C[11]!==o?(m=()=>n?{"aria-haspopup":"menu","aria-expanded":l}:{"aria-pressed":o},C[9]=n,C[10]=l,C[11]=o,C[12]=m):m=C[12];let b=m;C[13]!==b?(h=b(),C[13]=b,C[14]=h):h=C[14],C[15]!==j||C[16]!==h?(p={...j,...h},C[15]=j,C[16]=h,C[17]=p):p=C[17];let S=p,w=n&&d?d:a;C[18]!==c?(f=e=>{c&&c(e)},C[18]=c,C[19]=f):f=C[19];let N=f,I=o&&"ToggleButton-module__selected--fx0LM";return C[20]!==I?(g=(0,y.$)("ToggleButton-module__toggleButton--JlWKX",I),C[20]=I,C[21]=g):g=C[21],C[22]!==s?(x=!!s&&(0,r.jsx)("span",{className:"ToggleButton-module__icon--mJLXC",children:s}),C[22]=s,C[23]=x):x=C[23],C[24]!==w?(v=(0,r.jsx)("span",{className:"ToggleButton-module__textContent--xX6cl",children:w}),C[24]=w,C[25]=v):v=C[25],C[26]!==S||C[27]!==N||C[28]!==t||C[29]!==g||C[30]!==x||C[31]!==v?(_=(0,r.jsxs)("button",{ref:t,type:"button",className:g,onClick:N,...S,children:[x,v]}),C[26]=S,C[27]=N,C[28]=t,C[29]=g,C[30]=x,C[31]=v,C[32]=_):_=C[32],_});x.displayName="ToggleButton";var v=a(88934),_=a(94236),C=a(46251),j=a(69726),b=a(5524);function S(){let[e,t]=(0,g.useState)(!1),a=(0,v.Zp)(),{handleSpaceSelect:n,clearSpaceSelection:i,activeCopilotSpaceId:d,readOnly:u}=(0,h.C)(),y=(0,g.useRef)(null),S=(0,g.useRef)(null),[w,N]=(0,g.useState)(!1),I=()=>{N(!0),(0,p.BI)("dotcom_chat.activate",{target:"SPACES_INPUT_CREATE_SPACE",mode:"immersive"})},{data:E=[],isLoading:A}=m(),{data:T=[],isLoading:R}=(0,c.jS)(!0),k=(0,c.BV)(),L=A||R;if((0,g.useEffect)(()=>{if(L&&e&&y.current)y.current.focus();else if(!L&&e&&S.current){let e=setTimeout(()=>{S.current?.focus()},0);return()=>clearTimeout(e)}},[L,e]),!k||u)return;let P=d?T.find(e=>e.id===d.id&&e.owner===d.owner):void 0,M=P?P.name:"Spaces",O="260px";return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(_.W,{open:e,onOpenChange:e=>{l.W.spacesAsAttachmentsEnabled&&e&&(0,p.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_COPILOT_SPACES",mode:"immersive"}),t(e)},children:[(0,r.jsx)(_.W.Anchor,{children:(0,r.jsx)(x,{icon:(0,r.jsx)(f.I,{icon:"spaces"}),isSelected:!!P,onClick:()=>{},hasMenu:!0,"aria-label":"Select a copilot space for this conversation",isMenuOpen:e,selectedItemLabel:M,children:M})}),(0,r.jsx)(_.W.Overlay,{style:E.length>0?{width:O}:{},children:L?(0,r.jsxs)(C.B,{direction:"horizontal",align:"center",justify:"center",padding:"normal",style:{width:O},children:[(0,r.jsx)("div",{ref:y,role:"status",className:"sr-only",tabIndex:-1,children:"Loading spaces"}),(0,r.jsx)(j.A,{})]}):(0,r.jsx)(b.l,{selectionVariant:"single",role:"menu","aria-label":"Select a space",children:E.length>0?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(b.l.Group,{children:[(0,r.jsx)(b.l.GroupHeading,{"aria-label":"Recent spaces",children:"Recent"}),E.map((e,a)=>{let s=!!d&&e.id===d.id&&e.owner===d.owner;return(0,r.jsx)(b.l.Item,{ref:0===a?S:void 0,role:"menuitemradio",onSelect:()=>{d&&e.id===d.id&&e.owner===d.owner?i():(n({id:e.id,owner:e.owner}),(0,p.BI)("dotcom_chat.activate",{target:"SPACES_INPUT_SELECT_SPACE",space:`${e.owner}/${e.id}`})),t(!1)},selected:s,"aria-checked":s,children:(0,r.jsx)("span",{children:e.name})},`${e.owner}, ${e.id}`)})]}),(0,r.jsx)(b.l.Divider,{}),(0,r.jsx)(b.l.Item,{onSelect:()=>{a(s.VR),(0,p.BI)("dotcom_chat.activate",{target:"SPACES_INPUT_VIEW_ALL_SPACES",mode:"immersive"})},children:"View all spaces"}),(0,r.jsx)(b.l.Divider,{}),(0,r.jsx)(b.l.Item,{onSelect:I,children:"Create a space"})]}):(0,r.jsx)(b.l.Item,{ref:S,onSelect:I,children:"Create your first space"})})})]}),w?(0,r.jsx)(o.D,{closeDialog:()=>{(0,p.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_CREATE_DIALOG_CLOSE",mode:"immersive"}),N(!1)}}):null]})}try{S.displayName||(S.displayName="SpacesSelect")}catch{}var w=a(29731),N=a(83494),I=a(96459),E=a(8625),A=a(38621),T=a(52870),R=a(59121),k=a(21373),L=a(26108),P=a(94747),M=a(96379),O=a(7277),F=a(47970),D=a(33592),$=a(79216),B=a(97949);let z=/^(?:https:\/\/)?(?:www\.)?(figma\.com\/.+)$/,U=class FigmaNotAuthorizedError extends Error{constructor(){super(),this.name="FigmaNotAuthorizedError"}};async function W(e){let t=await (0,M.lS)(`/copilot/immersive/figma-link?item_url=${e}`);if(!t.ok){if(403===t.status)throw new U;throw Error(`Failed to fetch Figma reference data (${t.status}: ${t.statusText})`)}return await t.json()}async function V(e){let{itemUrl:t}=e,a=await (0,M.lS)(`/copilot/chat-links?item_url=${t}`);if(!a.ok)throw Error(`Failed to fetch reference data (${a.status}: ${a.statusText})`);return await a.json()}var H=a(91474),q=a(88431),K=a(17925),G=a(79064),Q=a(72303);let Z=async(e,t,a,n,r,i)=>{if((e[0]??"")!=="/")return!1;e=e.substring(1);let s=(({manager:e,chatState:t,availableCommands:a})=>{let n="assistive"===t.mode?[{label:"Delete chat",key:"delete",icon:A.TrashIcon,action:async(t,a)=>{e.dispatch({type:"SLASH_COMMANDS_LOADING"});try{let t=(0,Q.W)(a);if(!t)throw Error("Thread not found");await e.deleteThread(t),(0,p.BI)("dotcom_chat.activate",{target:"SLASH_COMMAND_DELETE_THREAD",mode:a.mode}),e.dispatch({type:"SLASH_COMMANDS_LOADED"})}catch{e.dispatch({type:"SLASH_COMMANDS_ERROR"})}return!0}},{label:"Rename conversation",key:"rename",icon:A.PencilIcon,action:async(t,a)=>{e.dispatch({type:"SLASH_COMMANDS_LOADING"});try{let n=(0,Q.W)(a);if(!n)throw Error("Thread not found");await e.renameThread(n,t),(0,p.BI)("dotcom_chat.activate",{target:"SLASH_COMMAND_RENAME",mode:a.mode}),e.dispatch({type:"SLASH_COMMANDS_LOADED"})}catch{e.dispatch({type:"SLASH_COMMANDS_ERROR"})}return!0}},{label:"Start a new conversation",key:"new",icon:A.PlusIcon,action:async(t,a)=>{e.dispatch({type:"SLASH_COMMANDS_LOADING"});try{await e.selectThread(null),(0,p.BI)("dotcom_chat.activate",{target:"SLASH_COMMAND_NEW_THREAD",mode:a.mode}),e.dispatch({type:"SLASH_COMMANDS_LOADED"})}catch{e.dispatch({type:"SLASH_COMMANDS_ERROR"})}return!0}}]:[];if("immersive"===t.mode&&l.W.chatInputCommands)for(let t of a)t.execute&&n.push({key:t.key,action:async(a,n,r)=>await t.execute(a,n,r,e)});return n})({manager:a,chatState:t,availableCommands:r}).filter(t=>{let a=(e.split(" ",1)[0]??"").toLowerCase().trim();return t.key.toLowerCase().includes(a)});if(1!==s.length)return!1;let o=s[0],c=e.substring(o.key.length).trim();return i&&(i.selectedRepo||i.selectedBranch||i.selectedCustomAgent)&&(c=JSON.stringify({text:c,selectedRepo:i.selectedRepo,selectedBranch:i.selectedBranch,selectedCustomAgent:i.selectedCustomAgent})),(0,p.BI)("dotcom_chat.activate",{target:"SLASH_COMMAND_EXECUTED",mode:t.mode,command:o.key}),await o.action(c,t,n)};var J=a(46062),Y=a(56708),X=a(61180);function ee(e,t,a){if("immersive"===e&&/^\/copilot(\/agents|\/spaces\/[a-zA-Z0-9-_]+\/[0-9]+)?\/?$/.test(t)){let e=a.get("prompt");if(e)return e}}function et(e){if(e){let t=`${e.ownerLogin}/${e.name}`;return{id:e.id,nameWithOwner:t,enabled:!0,name:t,owner:e.ownerLogin,nameOnly:e.name,defaultBranch:e.defaultBranch||"main",visibility:e.visibility}}}var ea=a(26239),en=a(60905),er=a(76166),ei=a(72439),es=a(23657),el=a(72206);function eo({openCreateSpaceDialog:e,setPendingSpace:t,clearSpaceSelection:a,activeCopilotSpaceId:n,readOnly:i}){let l=(0,D.b)(),[d,u]=(0,g.useState)(!1),h=(0,v.Zp)(),f=(0,g.useRef)(null),y=(0,g.useRef)(null),[x,S]=(0,g.useState)(!1),w=()=>{S(!0),e(!0),(0,p.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_COPILOT_SPACES_CREATE_SPACE",mode:"immersive"})},{data:N=[],isLoading:I}=m(),{isLoading:E}=(0,c.jS)(!0),T=(0,c.BV)(),R=I||E;if((0,g.useEffect)(()=>{if(R&&d&&f.current)f.current.focus();else if(!R&&d&&y.current){let e=setTimeout(()=>{y.current?.focus()},0);return()=>clearTimeout(e)}},[R,d]),!T||i)return;let k="260px";return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(_.W,{open:d,onOpenChange:e=>{e&&(0,p.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_COPILOT_SPACES",mode:"immersive"}),u(e)},children:[(0,r.jsx)(_.W.Anchor,{children:(0,r.jsxs)(b.l.Item,{onSelect:()=>{(0,p.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_COPILOT_SPACES",mode:"immersive"})},children:[(0,r.jsx)(b.l.LeadingVisual,{children:(0,r.jsx)(A.SpaceIcon,{})}),"Spaces\u2026"]})}),(0,r.jsx)(_.W.Overlay,{style:N.length>0?{width:k}:{},children:R?(0,r.jsxs)(C.B,{direction:"horizontal",align:"center",justify:"center",padding:"normal",style:{width:k},children:[(0,r.jsx)("div",{ref:f,role:"status",className:"sr-only",tabIndex:-1,children:"Loading spaces"}),(0,r.jsx)(j.A,{})]}):(0,r.jsx)(b.l,{selectionVariant:"single",role:"menu","aria-label":"Select a space",children:N.length>0?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(b.l.Group,{children:[(0,r.jsx)(b.l.GroupHeading,{"aria-label":"Recent spaces",children:"Recent"}),N.map((e,i)=>{let s=!!n&&e.id===n.id&&e.owner===n.owner;return(0,r.jsx)(b.l.Item,{ref:0===i?y:void 0,role:"menuitemradio",onSelect:()=>{n&&e.id===n.id&&e.owner===n.owner?a():(l.addReference({...e,type:"copilot-space"},"spaces"),t({id:e.id,owner:e.owner}),(0,p.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_COPILOT_SPACES_SELECT_SPACE",space:`${e.owner}/${e.id}`})),u(!1)},selected:s,"aria-checked":s,children:(0,r.jsx)("span",{children:e.name})},`${e.owner}, ${e.id}`)})]}),(0,r.jsx)(b.l.Divider,{}),(0,r.jsx)(b.l.Item,{onSelect:()=>{h(s.VR),(0,p.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_COPILOT_SPACES_VIEW_ALL_SPACES",mode:"immersive"})},children:"View all spaces"}),(0,r.jsx)(b.l.Divider,{}),(0,r.jsx)(b.l.Item,{onSelect:w,children:"Create a space"})]}):(0,r.jsx)(b.l.Item,{ref:y,onSelect:w,children:"Create your first space"})})})]}),x?(0,r.jsx)(o.D,{closeDialog:()=>{(0,p.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_CREATE_DIALOG_CLOSE",mode:"immersive"}),S(!1)}}):null]})}try{eo.displayName||(eo.displayName="SpacesSelectNew")}catch{}var ec=a(14521),ed=a(47789),eu=a(99054),em=a(77430);function eh(e){let t,a,n,s,l,o,c=(0,i.c)(24),{onSelectPanel:d,onSelectAgent:u}=e,{availableAgents:m,showLimit:h,disabled:f,loading:g}=(0,eu.JE)(),y=m&&m.length>0;if(g){let e;return c[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsxs)(b.l.Item,{disabled:!0,children:[(0,r.jsx)(b.l.LeadingVisual,{children:(0,r.jsx)(A.AppsIcon,{})}),"Extensions\u2026"]}),c[0]=e):e=c[0],e}if(f){let e,t,a;return c[1]!==d?(e=()=>{(0,p.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_EXTENSION_NOT_SUPPORTED",mode:"immersive"}),d("agents-not-supported")},c[1]=d,c[2]=e):e=c[2],c[3]===Symbol.for("react.memo_cache_sentinel")?(t=(0,r.jsx)(b.l.LeadingVisual,{children:(0,r.jsx)(A.AppsIcon,{})}),c[3]=t):t=c[3],c[4]!==e?(a=(0,r.jsxs)(b.l.Item,{onSelect:e,children:[t,"Extensions\u2026"]}),c[4]=e,c[5]=a):a=c[5],a}if(!y){let e,t,a;return c[6]!==d?(e=()=>{(0,p.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_EXTENSION_NOT_AVAILABLE",mode:"immersive"}),d("no-agents-available")},c[6]=d,c[7]=e):e=c[7],c[8]===Symbol.for("react.memo_cache_sentinel")?(t=(0,r.jsx)(b.l.LeadingVisual,{children:(0,r.jsx)(A.AppsIcon,{})}),c[8]=t):t=c[8],c[9]!==e?(a=(0,r.jsxs)(b.l.Item,{onSelect:e,children:[t,"Extensions\u2026"]}),c[9]=e,c[10]=a):a=c[10],a}if(c[11]===Symbol.for("react.memo_cache_sentinel")?(t=(0,r.jsx)(_.W.Anchor,{children:(0,r.jsxs)(b.l.Item,{onSelect:ef,children:[(0,r.jsx)(b.l.LeadingVisual,{children:(0,r.jsx)(A.AppsIcon,{})}),"Extensions\u2026"]})}),c[11]=t):t=c[11],c[12]!==m||c[13]!==u||c[14]!==h){let e;c[16]!==u||c[17]!==h?(e=e=>(0,r.jsxs)(b.l.Item,{onSelect:()=>{(0,p.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_EXTENSION_SELECTED",mode:"immersive"}),u(e)},children:[(0,r.jsx)(b.l.LeadingVisual,{children:(0,r.jsx)(em.r,{src:e.avatarUrl})}),e.name,!h&&(0,r.jsxs)(b.l.Description,{variant:"inline",truncate:!0,children:[eu.Z3,e.slug]}),h&&(0,r.jsx)(b.l.Description,{variant:"block",children:"Start a new chat to use other extensions."})]},e.slug),c[16]=u,c[17]=h,c[18]=e):e=c[18],a=m.map(e),c[12]=m,c[13]=u,c[14]=h,c[15]=a}else a=c[15];return c[19]===Symbol.for("react.memo_cache_sentinel")?(n=(0,r.jsx)(b.l.Divider,{}),c[19]=n):n=c[19],c[20]===Symbol.for("react.memo_cache_sentinel")?(s=(0,r.jsx)(b.l.LeadingVisual,{children:(0,r.jsx)(A.TelescopeIcon,{})}),c[20]=s):s=c[20],c[21]===Symbol.for("react.memo_cache_sentinel")?(l=(0,r.jsxs)(b.l.LinkItem,{href:eu.bn,onClick:ep,children:[s,"Marketplace",(0,r.jsx)(b.l.TrailingVisual,{children:(0,r.jsx)(A.LinkExternalIcon,{})})]}),c[21]=l):l=c[21],c[22]!==a?(o=(0,r.jsxs)(_.W,{children:[t,(0,r.jsx)(_.W.Overlay,{width:"small",children:(0,r.jsxs)(b.l,{children:[a,n,l]})})]}),c[22]=a,c[23]=o):o=c[23],o}function ep(){(0,p.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_EXTENSION_MARKETPLACE",mode:"immersive"})}function ef(){(0,p.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_EXTENSION",mode:"immersive"})}try{eh.displayName||(eh.displayName="AgentMenu")}catch{}var eg=a(57352),ey=a(15220);let ex="AgentsDialogs-module__dialogContentWrapper--v7abd",ev="AgentsDialogs-module__dialogTitle--tEo3x",e_="AgentsDialogs-module__dialogDescription--LPgKm";function eC(e){let t,a,n=(0,i.c)(4),{onClose:s,returnFocusRef:l}=e;return n[0]===Symbol.for("react.memo_cache_sentinel")?(t={narrow:"fullscreen",regular:"center"},n[0]=t):t=n[0],n[1]!==s||n[2]!==l?(a=(0,r.jsx)(ey.l,{width:"large",title:"Extensions",position:t,onClose:s,returnFocusRef:l,renderBody:ej}),n[1]=s,n[2]=l,n[3]=a):a=n[3],a}function ej(){return(0,r.jsx)("div",{className:"AgentsDialogs-module__AgentsDialogsMainContainer--ymBth",children:(0,r.jsxs)("div",{className:ex,children:[(0,r.jsx)(A.TelescopeIcon,{size:24}),(0,r.jsx)("h3",{className:ev,children:"Chat with your favorite tools and services"}),(0,r.jsx)("p",{className:e_,children:"Browse the marketplace to find extensions for the tools and services you rely on"}),(0,r.jsx)(k.Q,{as:"a",href:eu.bn,children:"Browse marketplace"}),(0,r.jsx)("div",{className:"AgentsDialogs-module__documentationLinkContainer--ydpZ9",children:(0,r.jsx)(eg.A,{href:"https://gh.io/copilot-extensions-docs",children:"Documentation"})})]})})}function eb(e){let t,a,n,s=(0,i.c)(9),{onClose:l,returnFocusRef:o}=e,u=(0,D.b)(),m=(0,d.Pk)(),h=(0,c.BV)(),p=(0,J.GF)(m.availableModels);return s[0]===Symbol.for("react.memo_cache_sentinel")?(t={narrow:"fullscreen",regular:"center"},s[0]=t):t=s[0],s[1]!==h||s[2]!==p||s[3]!==u?(a=()=>(0,r.jsx)("div",{className:"AgentsDialogs-module__AgentsDialogsAlternateContainer--iIZFy",children:(0,r.jsxs)("div",{className:ex,children:[(0,r.jsx)("div",{className:"AgentsDialogs-module__alertIconContainer--jNjdz",children:(0,r.jsx)(A.AlertIcon,{size:24})}),(0,r.jsxs)("h3",{className:ev,children:[h?"Copilots and extensions":"Extensions"," aren't supported by this model"]}),(0,r.jsxs)("p",{className:e_,children:["Switch back to the ",p.displayName," model or start a new chat"]}),(0,r.jsx)(k.Q,{onClick:()=>{u.selectThread(null),u.selectModel(p)},children:"New chat"})]})}),s[1]=h,s[2]=p,s[3]=u,s[4]=a):a=s[4],s[5]!==l||s[6]!==o||s[7]!==a?(n=(0,r.jsx)(ey.l,{width:"large",title:"Extensions",position:t,onClose:l,returnFocusRef:o,renderBody:a}),s[5]=l,s[6]=o,s[7]=a,s[8]=n):n=s[8],n}try{eC.displayName||(eC.displayName="NoAgentsAvailableDialog")}catch{}try{eb.displayName||(eb.displayName="AgentsNotSupportedDialog")}catch{}var eS=a(59788),ew=a(97564);function eN(e){let t,a,n,l=(0,i.c)(10),{isOpen:o,onClose:c,initialRepo:u,onRepoSelect:m}=e,h=(0,D.b)(),{findFileWorkerPath:p}=(0,d.Pk)(),f=(0,g.useRef)(null);l[0]!==h||l[1]!==c?(t=async e=>{if(0===e.length)return void c();let t=await (0,ew.V)(e[0].repositoryId);for(let a of e.map(e=>"github_folder"===e.type?(0,s.OC)(e.filePath,t):(0,s.Od)(e.filePath,t)))h.addReference(a,"references-menu");c()},l[0]=h,l[1]=c,l[2]=t):t=l[2];let y=t;return o?(l[3]===Symbol.for("react.memo_cache_sentinel")?(a=[],l[3]=a):a=l[3],l[4]!==p||l[5]!==y||l[6]!==u||l[7]!==c||l[8]!==m?(n=(0,r.jsx)(eS.Q,{formData:a,onCancel:c,onSaveFiles:y,findFileWorkerPath:p,attachmentButtonRef:f,initialRepo:u,onRepoSelect:m,allowFolderReferences:!0,maxFileCount:20}),l[4]=p,l[5]=y,l[6]=u,l[7]=c,l[8]=m,l[9]=n):n=l[9],n):null}try{eN.displayName||(eN.displayName="CopilotFilePicker")}catch{}var eI=a(82075),eE=a(5839),eA=a(31604),eT=a(81960),eR=a(69497),ek=a(10095),eL=a(35811),eP=a(40961);let eM="KnowledgeSelectPanel-module__knowledgeBaseIcon--peP3C",eO=(0,g.forwardRef)(function({open:e,setOpen:t,...a},n){return(0,r.jsx)(L.K,{ref:n,"aria-expanded":!!e||void 0,"aria-haspopup":!0,"aria-label":"Attach knowledge base","aria-labelledby":void 0,icon:A.BookIcon,onClick:()=>t(!e),variant:"invisible",className:eM,...a})});function eF({disabledForPreviewModelsProps:e,emptyKnowledgeBaseProps:t,open:a,onOpenChange:n,anchorRef:i}){let l=(0,d.Pk)(),o=(0,D.b)(),c=(0,eI.A)("localStorage"),{knowledgeBases:u}=l,[m,h]=(0,g.useState)([]),[p,f]=(0,g.useState)(!0),[y,x]=(0,g.useState)(""),v=(0,g.useRef)(null),_=c.getItem("lastUsedKnowledgeBaseId")||"",C=c.getItem("lastUsedKnowledgeBaseOrg")||"",{currentReferences:j}=l;(0,g.useEffect)(()=>{a||x("")},[a]);let b=(0,g.useMemo)(()=>""===y?u:u.filter(e=>e.name.toLowerCase().includes(y.toLowerCase())),[y,u]),S=(0,g.useMemo)(()=>b.reduce((e,t)=>{let a=e.find(e=>e.org===t.ownerLogin);return a?a.docsets.push(t):e.push({org:t.ownerLogin,docsets:[t]}),e},[]),[b]),[N,I]=(0,g.useState)(!1),E=p||"pending"===l.knowledgeBasesLoading.state,A=N||"error"===l.knowledgeBasesLoading.state,T=(0,g.useRef)(!1);(0,g.useEffect)(()=>{let e=async()=>{f(!0),await o.fetchKnowledgeBases();let e=await o.service.listAdministratedCopilotEnterpriseOrganizations();e.ok?h(e.payload||[]):I(!0),f(!1)};a&&!T.current&&(T.current=!0,e())},[a,o]);let R=eU();if(l.model?.hasLimitedCapabilities)return(0,r.jsx)(eV,{open:a,setOpen:n,...e});if(!E&&0===u.length)return(0,r.jsx)(eD,{administratedCopilotEnterpriseOrganizations:m,persistentPanelStyles:{position:["fixed","fixed","absolute"],bottom:["60px","60px","0 !important"],"@media screen and (max-height: 480px)":{bottom:"0 !important"},top:"initial !important",left:["18px","18px","calc(50% - 360px) !important"],maxHeight:"100%"},open:a,setOpen:n,mode:l.mode,...t});let k=b.sort((e,t)=>e.id===_?-1:+(t.id===_)).map(e=>({id:e.id,key:e.id,groupId:e.ownerLogin,text:e.name,description:e.description,disabled:!e.canChat,descriptionVariant:"block"})),L=[...S].sort((e,t)=>e.org===C?-1:+(t.org===C)).map(e=>({id:e.org,key:e.org,text:e.org,groupId:e.org,header:{title:e.org}})),P=u.filter(e=>j.some(t=>(0,s.P)(t)&&t.id===e.id));return(0,r.jsx)("div",{ref:v,...(0,w.G)("knowledge-select-panel"),children:(0,r.jsx)(eE.X,{title:"Select knowledge bases",subtitle:"Knowledge bases consolidate content from multiple repositories for an improved chat experience.",onCancel:()=>{(0,eP.flushSync)(()=>n(!1)),i.current?.focus()},open:a,renderAnchor:null,anchorRef:i,onOpenChange:n,loading:E,items:k,onFilterChange:x,groupMetadata:L,notice:null!==R?{text:R,variant:"info"}:void 0,message:A?{variant:"error",title:"Failed to load knowledge bases",body:"Try again later"}:0===S.length?{variant:"empty",title:`No knowledge bases found for \`${y}\``,body:"Try a different search term"}:void 0,...{selected:P,onSelectedChange:e=>(e=>{var t=e.map(e=>u.find(t=>t.id===e.id)).filter(e=>void 0!==e);let a=t.filter(e=>(0,s.P)(e)&&!j.some(t=>(0,s.P)(t)&&t.id===e.id));for(let e of j.filter(e=>(0,s.P)(e)&&!t.some(t=>t.id===e.id)))o.removeReference(e);for(let e of a)o.addReference((0,s.UU)(e),"docsetMenu")})(e)},variant:"modal",overlayProps:{maxHeight:"xlarge"},width:"large"})})}function eD({administratedCopilotEnterpriseOrganizations:e,anchorRef:t,open:a,setOpen:n}){let i=eU(),s=t?{anchorRef:t,renderAnchor:null}:{anchorRef:void 0,renderAnchor:({...e})=>(0,r.jsx)(eO,{open:a,setOpen:n,...e})},l=e?.length===0;return(0,r.jsx)(eA.T,{open:a,onOpen:()=>n(!0),onClose:()=>n(!1),overlayProps:{anchorSide:"outside-bottom",style:{width:"min(100%, 350px)"}},...s,children:(0,r.jsxs)(eL.az,{role:"dialog","aria-labelledby":"knowledge-base-dialog-title",sx:{...l?{height:"100%"}:{}},className:"KnowledgeSelectPanel-module__KnowledgeSelectPanelContainer--_RbkD",...(0,w.G)("empty-knowledge-base-picker"),children:[(0,r.jsx)("div",{className:"KnowledgeSelectPanel-module__panelHeader--kWY60",children:(0,r.jsxs)("div",{className:"KnowledgeSelectPanel-module__headerContent--AQ0gC",children:[(0,r.jsx)(eT.A,{id:"knowledge-base-dialog-title",as:"h4",className:"KnowledgeSelectPanel-module__panelTitle--oQLU4",children:"Attach a knowledge base"}),(0,r.jsx)(L.K,{unsafeDisableTooltip:!0,"aria-label":"Close",icon:A.XIcon,variant:"invisible",onClick:()=>n(!1)})]})}),(0,r.jsxs)(eL.az,{sx:{...l?{flexGrow:1,maxHeight:"100%",overflowY:"auto"}:{}},className:"KnowledgeSelectPanel-module__emptyStateContainer--Rk1JI",children:[(0,r.jsx)(ek.A,{icon:A.BookIcon,size:"medium",className:eM}),(0,r.jsxs)(eL.az,{sx:{...l?{maxHeight:"100%"}:{}},className:"KnowledgeSelectPanel-module__emptyStateContent--BiaDj",children:[(0,r.jsx)("span",{className:"KnowledgeSelectPanel-module__emptyStateMessage--S8iOa",children:"You don't have any knowledge bases"}),(0,r.jsxs)("div",{className:"KnowledgeSelectPanel-module__emptyStateDescription--d4gqH",children:[(0,r.jsx)("p",{children:"Knowledge bases consolidate content from multiple repositories for an improved chat experience."}),l&&(0,r.jsx)("p",{className:"KnowledgeSelectPanel-module__emptyStateInstructions--pOJKv",...(0,w.G)("ask-admin-for-knowledge-base"),children:"Speak with an organization owner about creating a knowledge base for your organization."})]}),e.length>0&&(0,r.jsx)(e$,{administratedCopilotEnterpriseOrganizations:e})]})]}),i&&(0,r.jsx)("div",{className:"KnowledgeSelectPanel-module__actionButtonsContainer--NjnfZ",children:(0,r.jsx)(ez,{message:i})})]})})}function e$({administratedCopilotEnterpriseOrganizations:e}){return 1===e.length?(0,r.jsx)(k.Q,{as:"a",href:eW(e[0]),className:"KnowledgeSelectPanel-module__createButton--AfP6G",...(0,w.G)("create-knowledge-base-button"),children:"Create a knowledge base"}):(0,r.jsxs)("div",{className:"KnowledgeSelectPanel-module__organizationsSection--YaCxl",...(0,w.G)("create-knowledge-base-dropdown"),children:[(0,r.jsx)(eT.A,{as:"h3",className:"KnowledgeSelectPanel-module__sectionTitle--hm4Tw",children:"Create a knowledge base for an organization"}),(0,r.jsx)(b.l,{className:"KnowledgeSelectPanel-module__organizationsList--UvNcy",children:e.map(e=>(0,r.jsx)(eB,{org:e},e.id))})]})}function eB({org:e}){return(0,r.jsx)(b.l.Item,{children:(0,r.jsxs)(eg.A,{href:eW(e),className:"KnowledgeSelectPanel-module__organizationLink--UkWa7",children:[(0,r.jsx)(em.r,{square:!0,src:e.avatarUrl,alt:e.login,"aria-hidden":"true",className:"KnowledgeSelectPanel-module__organizationAvatar--igPHI"}),(0,r.jsx)(eR.A,{inline:!0,title:e.login,className:"KnowledgeSelectPanel-module__organizationName--V_3Jw",children:e.login})]})})}function ez({message:e}){return e?(0,r.jsx)("div",{"data-testid":"knowledge-select-panel-sso",className:"KnowledgeSelectPanel-module__ssoNotice--EKDTO",children:e}):null}function eU(){let e=(0,d.Pk)(),t=e.ssoOrganizations.map(e=>e.login);for(let a of e.knowledgeBases)for(let e of a.protectedOrganizations)t.includes(e)||t.push(e);if(!t||0===t.length)return null;{if(1===t.length)return`Single sign-on to see content from ${t[0]}.`;if(2===t.length)return`Single sign-on to see content from ${t[0]} and ${t[1]}.`;let e=t.length-2;return`Single sign-on to see content from ${t[0]}, ${t[1]}, and ${e} organization${e>1?"s":""}`}}function eW(e){return`/organizations/${e.login}/settings/copilot/chat_settings/new`}function eV({anchorRef:e,open:t,setOpen:a}){let n=e?{anchorRef:e,renderAnchor:null}:{anchorRef:void 0,renderAnchor:({...e})=>(0,r.jsx)(eO,{open:t,setOpen:a,...e})};return(0,r.jsx)(eA.T,{open:t,onOpen:()=>a(!0),onClose:()=>a(!1),...n,children:(0,r.jsxs)("div",{className:(0,y.$)("m-3 d-flex flex-column flex-items-center text-center","KnowledgeSelectPanel-module__disabledForPreviewModelsPanel--5fRzV"),children:[(0,r.jsx)(A.AlertIcon,{className:"fgColor-attention mb-3"}),(0,r.jsx)("h3",{className:"h5 mb-2",children:"Knowledge bases aren't supported by this model"}),(0,r.jsx)("span",{className:"text-small fgColor-muted",children:"Switch back to the GPT-4o model or start a new conversation"})]})})}try{eO.displayName||(eO.displayName="KBIconButton")}catch{}try{(n=KBIconButtonInner).displayName||(n.displayName="KBIconButtonInner")}catch{}try{eF.displayName||(eF.displayName="KnowledgeSelectPanel")}catch{}try{eD.displayName||(eD.displayName="EmptyKnowledgeBase")}catch{}try{e$.displayName||(e$.displayName="CreateKnowledgeBaseButton")}catch{}try{eB.displayName||(eB.displayName="CreateKnowledgeBaseActionRow")}catch{}try{ez.displayName||(ez.displayName="SSOFooter")}catch{}try{eV.displayName||(eV.displayName="DisabledForPreviewModels")}catch{}var eH=a(35673),eq=a(71363);let eK=(0,g.memo)(({panel:e,onPanelChange:t,anchorRef:a,initialRepo:n,onRepoSelect:i,...c})=>{let u,m,f,y,x,v,C,j,{inputRef:S}=c,N=(0,D.b)(),I=(0,d.Pk)(),E=(0,ed.qw)(),{supportedAttachmentTypes:T,supportedReferenceTypes:R}=(u=(0,d.Pk)(),m=null!==(0,ec.G)(),f=["upload"],y=u.renderKnowledgeBases&&(u.currentTopic&&(0,s.Z6)(u.currentTopic)||!u.currentTopic),x=l.W.knowledgeBasesDisabled,m||f.push("repositories"),!y||m||x||f.push("knowledge-bases"),!m&&l.W.spacesAsAttachmentsEnabled&&f.push("copilot-spaces"),m||f.push("agents"),m||f.push("plugin-attachment-contribution"),{supportedAttachmentTypes:f,supportedReferenceTypes:m?["files"]:["files","folders"]}),{model:k}=(0,d.bP)("model"),L="immersive"===I.mode&&!!k.capabilities?.supports?.vision,P=(0,eu.kw)(c),M=(0,g.useRef)(null),O=(0,ec.G)(),F=(0,es.FQ)(!0),{handleSpaceSelect:$,clearSpaceSelection:B,activeCopilotSpaceId:z,readOnly:U}=(0,h.C)(),W=!!(O&&F),[V,H]=(0,g.useState)(!1);return(0,r.jsxs)("div",{children:[T.includes("upload")&&(0,r.jsx)("input",{id:"image-uploader",...(0,w.G)("image-uploader"),hidden:!0,ref:M,type:"file",accept:[L?en.s.getAllowedImageFileExtensions(k):"",ei.E.getTextFileExtensions()].join(","),multiple:!0,onChange:e=>{if(!e.target.files)return;let[t,a]=en.s.getAllowedFiles([...e.target.files],k),n=[];for(let e of(L?new en.s(I,N).addImageAttachments(t,"menu",O,W):n.push(...t),a))new ei.E(N).addAttachment(e);for(let e of n)(0,p.BI)("dotcom_chat.upload_unsupported_file",{name:e.name,type:e.type,size:e.size});e.currentTarget.value=""}}),(0,r.jsx)(_.W,{anchorRef:a,open:"attachment-types"===e,onOpenChange:e=>t(t=>e&&null===t?"attachment-types":e||"attachment-types"!==t?t:null),children:(0,r.jsx)(_.W.Overlay,{width:"small",side:"outside-bottom",align:"start",portalContainerName:"assistive"===I.mode?eH.E5:void 0,children:(0,r.jsxs)(b.l,{children:[T.includes("repositories")&&(0,r.jsxs)(b.l.Item,{onSelect:()=>{(0,p.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_REPOSITORIES",mode:I.mode}),t("repositories")},children:[(0,r.jsx)(b.l.LeadingVisual,{children:(0,r.jsx)(A.RepoIcon,{})}),"Repositories\u2026"]}),(0,r.jsxs)(b.l.Item,{onSelect:()=>{(0,p.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_MULTI_FILE_PICKER",mode:I.mode}),t("multi-file-picker")},children:[(0,r.jsx)(b.l.LeadingVisual,{children:(0,r.jsx)(A.FileCodeIcon,{})}),(v=R.includes("files"),C=R.includes("folders"),j=R.includes("symbols"),v&&C&&j?"Files, folders, and symbols":v&&C?"Files and folders":v&&j?"Files and symbols":C&&j?"Folders and symbols":v?"Files":C?"Folders":j?"Symbols":"References"),"\u2026"]}),T.includes("knowledge-bases")&&(0,r.jsxs)(b.l.Item,{onSelect:()=>{(0,p.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_KNOWLEDGE_BASES",mode:I.mode}),t("knowledge-bases")},children:[(0,r.jsx)(b.l.LeadingVisual,{children:(0,r.jsx)(A.BookIcon,{})}),(0,r.jsx)("span",{...(0,w.G)("knowledge-bases-action-list-item"),children:"Knowledge bases\u2026"})]}),T.includes("copilot-spaces")&&(0,r.jsx)(eo,{openCreateSpaceDialog:H,setPendingSpace:$,clearSpaceSelection:B,activeCopilotSpaceId:z,readOnly:U}),E.map(e=>{let a=e.attachmentMenuContribution;return a?(0,r.jsx)(a.MenuItemComponent,{onSelect:()=>t(a.attachmentType)},e.id):null}),T.includes("upload")&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(b.l.Divider,{}),(0,r.jsxs)(b.l.Item,{onSelect:()=>{(0,p.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_IMAGES",mode:I.mode}),t(null),M.current?.click()},children:[(0,r.jsx)(b.l.LeadingVisual,{children:(0,r.jsx)(A.UploadIcon,{})}),"Upload from computer"]})]}),T.includes("agents")&&!l.W.hideExtensionsInDotcomChat&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(b.l.Divider,{}),(0,r.jsx)(eh,{onSelectPanel:e=>t(e),onSelectAgent:e=>setTimeout(()=>P(e.slug))})]})]})})}),"multi-file-picker"===e&&(0,r.jsx)(eN,{isOpen:!0,onClose:()=>t(null),initialRepo:n,onRepoSelect:i}),(0,r.jsx)(eq.F,{open:"repositories"===e,onOpenChange:e=>t(e?"repositories":null),submitReturnFocusRef:S,cancelReturnFocusRef:a,onRepoSelect:i}),T.includes("knowledge-bases")&&(0,r.jsx)(eF,{disabledForPreviewModelsProps:{anchorRef:a},emptyKnowledgeBaseProps:{anchorRef:a},open:"knowledge-bases"===e,onOpenChange:e=>t(e?"knowledge-bases":null),anchorRef:a}),V&&(0,r.jsx)(o.D,{closeDialog:()=>H(!1)}),"no-agents-available"===e&&(0,r.jsx)(eC,{onClose:()=>t(null),returnFocusRef:a}),"agents-not-supported"===e&&(0,r.jsx)(eb,{onClose:()=>t(null),returnFocusRef:a}),T.includes("plugin-attachment-contribution")&&E.map(n=>n.attachmentMenuContribution&&n.attachmentMenuContribution.attachmentType===e?(0,r.jsx)(n.attachmentMenuContribution.PanelComponent,{onSubmit:()=>{t(null),S.current?.focus()},onDismiss:()=>{t(null),a.current?.focus()}},n.id):null)]})});eK.displayName="AttachmentMenu";var eG=a(71555);let eQ={agents:"Extensions",repositories:"Repositories",files:"Files and folders",issues:"Issues",pulls:"Pull requests",discussions:"Discussions"},eZ=[{name:eQ.agents,icon:A.AppsIcon,value:"agents",where:"start"},{name:eQ.repositories,icon:A.RepoIcon,value:"repositories",where:"anywhere"},{name:eQ.files,icon:A.FileIcon,value:"repositories:files",where:"anywhere"},{name:eQ.issues,icon:A.IssueOpenedIcon,value:"repositories:issues",where:"anywhere"},{name:eQ.pulls,icon:A.GitPullRequestIcon,value:"repositories:pulls",where:"anywhere"},{name:eQ.discussions,icon:A.CommentDiscussionIcon,value:"repositories:discussions",where:"anywhere"}];function eJ(e){let t,a,n,s,l,o=(0,i.c)(12);return o[0]!==e?({agent:t,...a}=e,o[0]=e,o[1]=t,o[2]=a):(t=o[1],a=o[2]),o[3]!==t.avatarUrl?(n=(0,r.jsx)(b.l.LeadingVisual,{children:(0,r.jsx)(em.r,{src:t.avatarUrl})}),o[3]=t.avatarUrl,o[4]=n):n=o[4],o[5]!==t.slug?(s=(0,r.jsxs)(b.l.Description,{variant:"inline",truncate:!0,children:[eu.Z3,t.slug]}),o[5]=t.slug,o[6]=s):s=o[6],o[7]!==t.name||o[8]!==a||o[9]!==n||o[10]!==s?(l=(0,r.jsxs)(b.l.Item,{...a,children:[n,t.name,s]}),o[7]=t.name,o[8]=a,o[9]=n,o[10]=s,o[11]=l):l=o[11],l}try{eJ.displayName||(eJ.displayName="AgentSuggestion")}catch{}function eY(e){let t,a,n,s,l,o,c,d,u=(0,i.c)(20);u[0]!==e?({leadingVisual:t,...a}=e,u[0]=e,u[1]=t,u[2]=a):(t=u[1],a=u[2]);let m=(0,g.useId)(),h=(0,g.useId)();return u[3]!==h||u[4]!==m?(n=(0,y.$)(m,h),u[3]=h,u[4]=m,u[5]=n):n=u[5],u[6]!==t?(s=void 0!==t&&(0,r.jsx)(b.l.LeadingVisual,{children:t}),u[6]=t,u[7]=s):s=u[7],u[8]!==m||u[9]!==a.children?(l=(0,r.jsx)("span",{id:m,children:a.children}),u[8]=m,u[9]=a.children,u[10]=l):l=u[10],u[11]!==h?(o=(0,r.jsx)("span",{className:"d-none","aria-hidden":!0,id:h,children:"Opens in new tab."}),u[11]=h,u[12]=o):o=u[12],u[13]===Symbol.for("react.memo_cache_sentinel")?(c=(0,r.jsx)(b.l.TrailingVisual,{children:(0,r.jsx)(A.LinkExternalIcon,{})}),u[13]=c):c=u[13],u[14]!==a||u[15]!==n||u[16]!==s||u[17]!==l||u[18]!==o?(d=(0,r.jsxs)(b.l.Item,{...a,"aria-labelledby":n,children:[s,l,o,c]}),u[14]=a,u[15]=n,u[16]=s,u[17]=l,u[18]=o,u[19]=d):d=u[19],d}try{eY.displayName||(eY.displayName="LinkSuggestion")}catch{}function eX(e){return{value:`@${e.slug}`,render:t=>(0,r.jsx)(eJ,{agent:e,...t})}}function e0(e){let t,a,n,s,l,o=(0,i.c)(9);return o[0]!==e?({leadingVisual:t,...a}=e,o[0]=e,o[1]=t,o[2]=a):(t=o[1],a=o[2]),o[3]!==t?(n=void 0!==t&&(0,r.jsx)(b.l.LeadingVisual,{children:t}),o[3]=t,o[4]=n):n=o[4],o[5]===Symbol.for("react.memo_cache_sentinel")?(s=(0,r.jsx)(b.l.TrailingVisual,{children:(0,r.jsx)(A.ArrowRightIcon,{})}),o[5]=s):s=o[5],o[6]!==a||o[7]!==n?(l=(0,r.jsxs)(b.l.Item,{"aria-haspopup":!0,...a,children:[n,a.children,s]}),o[6]=a,o[7]=n,o[8]=l):l=o[8],l}try{e0.displayName||(e0.displayName="MultistepSuggestion")}catch{}function e1(e){let t,a,n,s,l=(0,i.c)(9);l[0]!==e?({category:a,...t}=e,l[0]=e,l[1]=t,l[2]=a):(t=l[1],a=l[2]);let{name:o,icon:c}=a;return l[3]!==c?(n=(0,r.jsx)(c,{}),l[3]=c,l[4]=n):n=l[4],l[5]!==o||l[6]!==t||l[7]!==n?(s=(0,r.jsx)(e0,{leadingVisual:n,...t,children:o}),l[5]=o,l[6]=t,l[7]=n,l[8]=s):s=l[8],s}try{e1.displayName||(e1.displayName="CategorySuggestion")}catch{}let e2="shared-module__asyncSuggestion--AXibl",e5="shared-module__stale--R4Im6";function e3(e){let t,a,n,s,l,o,c,d,u,m,h,p=(0,i.c)(25);p[0]!==e?({discussion:a,stale:s,className:t,...n}=e,p[0]=e,p[1]=t,p[2]=a,p[3]=n,p[4]=s):(t=p[1],a=p[2],n=p[3],s=p[4]);let f=s&&e5;return p[5]!==t||p[6]!==f?(l=(0,y.$)(e2,f,t),p[5]=t,p[6]=f,p[7]=l):l=p[7],p[8]!==a.state?(o="open"===a.state&&(0,r.jsx)(A.CommentDiscussionIcon,{className:"fgColor-open"}),p[8]=a.state,p[9]=o):o=p[9],p[10]!==a.state?(c="closed"===a.state&&(0,r.jsx)(A.DiscussionClosedIcon,{className:"fgColor-muted"}),p[10]=a.state,p[11]=c):c=p[11],p[12]!==o||p[13]!==c?(d=(0,r.jsxs)(b.l.LeadingVisual,{children:[o,c]}),p[12]=o,p[13]=c,p[14]=d):d=p[14],p[15]!==a.title?(u=(0,r.jsx)(eR.A,{title:a.title,maxWidth:350,children:a.title}),p[15]=a.title,p[16]=u):u=p[16],p[17]!==a.number?(m=(0,r.jsxs)(b.l.Description,{children:["#",a.number]}),p[17]=a.number,p[18]=m):m=p[18],p[19]!==n||p[20]!==l||p[21]!==d||p[22]!==u||p[23]!==m?(h=(0,r.jsxs)(b.l.Item,{...n,className:l,children:[d,u,m]}),p[19]=n,p[20]=l,p[21]=d,p[22]=u,p[23]=m,p[24]=h):h=p[24],h}try{e3.displayName||(e3.displayName="DiscussionSuggestion")}catch{}function e4(e){let t,a,n,s,l,o,c,d,u,m,h,p,f,g,x,v=(0,i.c)(35);if(v[0]!==e?({type:l,path:a,stale:s,className:t,...n}=e,v[0]=e,v[1]=t,v[2]=a,v[3]=n,v[4]=s,v[5]=l):(t=v[1],a=v[2],n=v[3],s=v[4],l=v[5]),v[6]!==t||v[7]!==a||v[8]!==n||v[9]!==s||v[10]!==l){let e=a.split("/"),i=e.pop();c=b.l.Item,m=n;let g=s&&e5;v[19]!==t||v[20]!==g?(h=(0,y.$)(e2,g,t),v[19]=t,v[20]=g,v[21]=h):h=v[21],v[22]!==l?(p=(0,r.jsx)(b.l.LeadingVisual,{children:"folder"===l?(0,r.jsx)(A.FileDirectoryFillIcon,{}):(0,r.jsx)(A.FileIcon,{})}),v[22]=l,v[23]=p):p=v[23],f=i,o=b.l.Description,d="inline",u=e.join("/"),v[6]=t,v[7]=a,v[8]=n,v[9]=s,v[10]=l,v[11]=o,v[12]=c,v[13]=d,v[14]=u,v[15]=m,v[16]=h,v[17]=p,v[18]=f}else o=v[11],c=v[12],d=v[13],u=v[14],m=v[15],h=v[16],p=v[17],f=v[18];return v[24]!==o||v[25]!==d||v[26]!==u?(g=(0,r.jsxs)(o,{variant:d,children:[u,"/"]}),v[24]=o,v[25]=d,v[26]=u,v[27]=g):g=v[27],v[28]!==c||v[29]!==m||v[30]!==h||v[31]!==p||v[32]!==f||v[33]!==g?(x=(0,r.jsxs)(c,{...m,className:h,children:[p,f,g]}),v[28]=c,v[29]=m,v[30]=h,v[31]=p,v[32]=f,v[33]=g,v[34]=x):x=v[34],x}try{e4.displayName||(e4.displayName="FileSuggestion")}catch{}function e7(e){let t,a,n,s,l,o,c,d,u,m,h,p,f=(0,i.c)(28);f[0]!==e?({issue:a,stale:s,className:t,...n}=e,f[0]=e,f[1]=t,f[2]=a,f[3]=n,f[4]=s):(t=f[1],a=f[2],n=f[3],s=f[4]);let g=s&&e5;return f[5]!==t||f[6]!==g?(l=(0,y.$)(e2,g,t),f[5]=t,f[6]=g,f[7]=l):l=f[7],f[8]!==a.state?(o="draft"===a.state&&(0,r.jsx)(A.IssueDraftIcon,{className:"fgColor-draft"}),f[8]=a.state,f[9]=o):o=f[9],f[10]!==a.state?(c="open"===a.state&&(0,r.jsx)(A.IssueOpenedIcon,{className:"fgColor-open"}),f[10]=a.state,f[11]=c):c=f[11],f[12]!==a.state?(d="closed"===a.state&&(0,r.jsx)(A.IssueClosedIcon,{className:"fgColor-done"}),f[12]=a.state,f[13]=d):d=f[13],f[14]!==o||f[15]!==c||f[16]!==d?(u=(0,r.jsxs)(b.l.LeadingVisual,{children:[o,c,d]}),f[14]=o,f[15]=c,f[16]=d,f[17]=u):u=f[17],f[18]!==a.title?(m=(0,r.jsx)(eR.A,{title:a.title,maxWidth:350,children:a.title}),f[18]=a.title,f[19]=m):m=f[19],f[20]!==a.number?(h=(0,r.jsxs)(b.l.Description,{children:["#",a.number]}),f[20]=a.number,f[21]=h):h=f[21],f[22]!==n||f[23]!==l||f[24]!==u||f[25]!==m||f[26]!==h?(p=(0,r.jsxs)(b.l.Item,{...n,className:l,children:[u,m,h]}),f[22]=n,f[23]=l,f[24]=u,f[25]=m,f[26]=h,f[27]=p):p=f[27],p}try{e7.displayName||(e7.displayName="IssueSuggestion")}catch{}function e6(e){let t,a,n,s,l,o,c,d,u,m,h,p,f=(0,i.c)(28);f[0]!==e?({pullRequest:n,stale:s,className:t,...a}=e,f[0]=e,f[1]=t,f[2]=a,f[3]=n,f[4]=s):(t=f[1],a=f[2],n=f[3],s=f[4]);let g=s&&e5;return f[5]!==t||f[6]!==g?(l=(0,y.$)(e2,g,t),f[5]=t,f[6]=g,f[7]=l):l=f[7],f[8]!==n.state?(o="draft"===n.state&&(0,r.jsx)(A.GitPullRequestDraftIcon,{className:"fgColor-draft"}),f[8]=n.state,f[9]=o):o=f[9],f[10]!==n.state?(c="open"===n.state&&(0,r.jsx)(A.GitPullRequestIcon,{className:"fgColor-open"}),f[10]=n.state,f[11]=c):c=f[11],f[12]!==n.state?(d="closed"===n.state&&(0,r.jsx)(A.GitPullRequestClosedIcon,{className:"fgColor-done"}),f[12]=n.state,f[13]=d):d=f[13],f[14]!==o||f[15]!==c||f[16]!==d?(u=(0,r.jsxs)(b.l.LeadingVisual,{children:[o,c,d]}),f[14]=o,f[15]=c,f[16]=d,f[17]=u):u=f[17],f[18]!==n.title?(m=(0,r.jsx)(eR.A,{title:n.title,maxWidth:350,children:n.title}),f[18]=n.title,f[19]=m):m=f[19],f[20]!==n.number?(h=(0,r.jsxs)(b.l.Description,{children:["#",n.number]}),f[20]=n.number,f[21]=h):h=f[21],f[22]!==a||f[23]!==l||f[24]!==u||f[25]!==m||f[26]!==h?(p=(0,r.jsxs)(b.l.Item,{...a,className:l,children:[u,m,h]}),f[22]=a,f[23]=l,f[24]=u,f[25]=m,f[26]=h,f[27]=p):p=f[27],p}try{e6.displayName||(e6.displayName="PullRequestSuggestion")}catch{}function e8(e){let t,a,n,s,l,o,c,d,u=(0,i.c)(18);u[0]!==e?({repository:s,isMultistep:a,stale:l,className:t,...n}=e,u[0]=e,u[1]=t,u[2]=a,u[3]=n,u[4]=s,u[5]=l):(t=u[1],a=u[2],n=u[3],s=u[4],l=u[5]);let m=l&&e5;u[6]!==t||u[7]!==m?(o=(0,y.$)(e2,m,t),u[6]=t,u[7]=m,u[8]=o):o=u[8];let h=o;u[9]!==s.isInOrganization||u[10]!==s.ownerAvatarUrl?(c=s.ownerAvatarUrl?(0,r.jsx)(em.r,{src:s.ownerAvatarUrl,alt:"",size:16,square:s.isInOrganization}):(0,r.jsx)(A.RepoIcon,{}),u[9]=s.isInOrganization,u[10]=s.ownerAvatarUrl,u[11]=c):c=u[11];let p=c;return u[12]!==p||u[13]!==h||u[14]!==a||u[15]!==n||u[16]!==s.nwo?(d=a?(0,r.jsx)(e0,{...n,className:h,leadingVisual:p,children:s.nwo},s.nwo):(0,r.jsxs)(b.l.Item,{...n,className:h,children:[(0,r.jsx)(b.l.LeadingVisual,{children:p}),s.nwo]},s.nwo),u[12]=p,u[13]=h,u[14]=a,u[15]=n,u[16]=s.nwo,u[17]=d):d=u[17],d}try{e8.displayName||(e8.displayName="RepositorySuggestion")}catch{}function e9(e){return{value:null,key:e.value,render:t=>(0,r.jsx)(e1,{category:e,...t})}}function te(e){return null!==e}var tt=a(84331);function ta(e){return{value:`/${e.key}`,key:e.key,render:t=>(0,r.jsxs)(b.l.Item,{...t,children:[(0,r.jsx)(b.l.LeadingVisual,{children:(0,r.jsx)(e.icon,{})}),e.name,(0,r.jsx)(b.l.Description,{variant:"block",children:e.description})]})}}var tn=a(97286);function tr(e){let t,a,n=(0,i.c)(3),[r,s]=(0,g.useState)(null);return(null===r&&null!==e||null!==r&&null===e)&&s(e),n[0]!==e?(t=()=>{let t=setTimeout(()=>s(e),200);return()=>clearTimeout(t)},a=[e],n[0]=e,n[1]=t,n[2]=a):(t=n[1],a=n[2]),(0,g.useEffect)(t,a),r}function ti(e){return e}async function ts(e,t,a,n){return new Promise((r,i)=>{if(!window.Worker)return void setTimeout(()=>r(e.filter(e=>e.includes(t))));let s=new Worker(a);s.addEventListener("message",e=>r(e.data.list)),s.addEventListener("error",e=>i(Error(`Worker error: ${e.message}`))),n.addEventListener("abort",()=>{s.terminate(),i(Error("Worker aborted"))}),s.postMessage({baseList:e,query:t})})}function tl(e){return e}function to(e){return e}function tc(e){return e}var td=a(26408);function tu(e){let t,a,n,s,l=(0,i.c)(9);return l[0]!==e?({org:t,...a}=e,l[0]=e,l[1]=t,l[2]=a):(t=l[1],a=l[2]),l[3]!==t.avatarUrl?(n=(0,r.jsx)(em.r,{square:!0,src:t.avatarUrl}),l[3]=t.avatarUrl,l[4]=n):n=l[4],l[5]!==t.login||l[6]!==a||l[7]!==n?(s=(0,r.jsx)(eY,{leadingVisual:n,...a,children:t.login}),l[5]=t.login,l[6]=a,l[7]=n,l[8]=s):s=l[8],s}function tm(e){let t,a,n,s=(0,i.c)(7);return s[0]!==e?({orgs:t,...a}=e,s[0]=e,s[1]=t,s[2]=a):(t=s[1],a=s[2]),s[3]!==t[0]?.login||s[4]!==t.length||s[5]!==a?(n=1===t.length?(0,r.jsxs)(eY,{leadingVisual:(0,r.jsx)(A.ShieldLockIcon,{}),...a,children:["Single sign-on to ",(0,r.jsx)("strong",{children:t[0]?.login})," for more"]}):(0,r.jsx)(e0,{leadingVisual:(0,r.jsx)(A.ShieldLockIcon,{}),...a,children:"Single sign-on for more"}),s[3]=t[0]?.login,s[4]=t.length,s[5]=a,s[6]=n):n=s[6],n}try{tu.displayName||(tu.displayName="SSOOrgSuggestion")}catch{}try{tm.displayName||(tm.displayName="SSOPromptSuggestion")}catch{}let th=e=>`/orgs/${encodeURIComponent(e.login)}/sso?return_to=${encodeURIComponent(location.href)}`;function tp(e){return{value:null,key:`open-link:${th(e)}`,render:t=>(0,r.jsx)(tu,{org:e,...t})}}function tf(e){let t,a,n,s,o,c,u,m,h,f,y,x,v=(0,i.c)(32),{children:_,onSelectCommand:C,onSelectReference:j,onShowAgentsDialog:S,hideAutocomplete:w,availableCommands:N}=e,{mode:I}=(0,d.Pk)();v[0]===Symbol.for("react.memo_cache_sentinel")?(t=[{triggerChar:"@",insertSpaceOnCommit:!0,keepTriggerCharOnCommit:!1,multiWord:!0}],l.W.chatInputCommands&&t.push({triggerChar:"/",insertSpaceOnCommit:!0,keepTriggerCharOnCommit:!1,multiWord:!1}),v[0]=t):t=v[0];let[E,T]=(0,g.useState)(tg);v[1]===Symbol.for("react.memo_cache_sentinel")?(a=()=>T(!0),n=[],v[1]=a,v[2]=n):(a=v[1],n=v[2]),(0,g.useEffect)(a,n);let[R,k]=(0,g.useState)(null);v[3]!==N||v[4]!==R?(s={query:R,availableCommands:N},v[3]=N,v[4]=R,v[5]=s):s=v[5];let{suggestions:L,stale:P}=function(e){let t=(0,i.c)(9),{query:a,availableCommands:n}=e,s=function(e,t){let a,n=(0,i.c)(5);e:{let r,i;if(!t){a=null;break e}n[0]!==e||n[1]!==t.filter?(r=""===t.filter.trim()?e:e.filter(e=>(0,tt.dt)(e.name,t.filter)>.5&&e.key!==t.filter.toLowerCase()),n[0]=e,n[1]=t.filter,n[2]=r):r=n[2];let s=r;n[3]!==s?(i=s.map(ta),n[3]=s,n[4]=i):i=n[4],a=i}return a}(n,a?.category==="commands"?a:null),o=function(e){let t,a=(0,i.c)(3),{currentReferences:n}=(0,d.Pk)();e:{let i;if(!e){t=null;break e}if(a[0]!==n||a[1]!==e){let t=e.filter.toLowerCase(),s=e=>e.toLowerCase().includes(t)&&e.toLowerCase()!==t,o=n.map(e=>{let t=$.Q.for(e);switch(t?.type){case void 0:break;case"repository":{let e=`${t.reference.ownerLogin}/${t.reference.name}`;if(!s(e))return null;return{value:$.Q.stringify(t),render:a=>(0,r.jsx)(e8,{repository:{databaseId:t.reference.id,isInOrganization:"Organization"===t.reference.ownerType,name:t.reference.name,nwo:e,ownerLogin:t.reference.ownerLogin},...a})}}case"issue":{let e=t.reference.title??"";if(!s(e))return null;return{value:$.Q.stringify(t),render:a=>(0,r.jsx)(e7,{issue:{number:t.reference.number,state:t.reference.state??"",title:e},...a})}}case"pull-request":{let e=t.reference.title??"";if(!s(e))return null;return{value:$.Q.stringify(t),render:a=>(0,r.jsx)(e6,{pullRequest:{number:t.reference.number,state:t.reference.state??"",title:e},...a})}}case"discussion":{let e=t.reference.title??"";if(!s(e))return null;return{value:$.Q.stringify(t),render:a=>(0,r.jsx)(e3,{discussion:{number:t.reference.number,state:t.reference.state,title:e},...a})}}case"file":{let e=t.reference.path;if(!s(e))return null;return{value:$.Q.stringify(t),render:a=>(0,r.jsx)(e4,{type:"folder"===t.reference.type?"folder":"file",path:e,...a})}}}return null}).filter(te),c=(l.W.hideExtensionsInDotcomChat?eZ.filter(e=>"agents"!==e.value):eZ).filter(a=>a.name.toLowerCase().includes(t)&&function(e,t){switch(e){case"start":return 0===t.index;case"anywhere":return!0}}(a.where,e)).map(e9);if(c.length>0){let e=o.at(-1);if(e&&"object"==typeof e){let t=e.render;e.render=e=>(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t,{...e}),(0,r.jsx)(b.l.Divider,{})]})}}i=o.concat(c),a[0]=n,a[1]=e,a[2]=i}else i=a[2];t=i}return t}(a?.category==="categories"?a:null),c=function(e){let t,a=(0,i.c)(4),{availableAgents:n,loading:s,showLimit:l,disabled:o}=(0,eu.JE)(null!==e);e:{let i;if(o||!e){t=null;break e}if(s&&!n){t="loading";break e}a[0]!==n||a[1]!==e||a[2]!==l?(i=n?.filter(t=>e?.category==="agents"&&t.name.toLowerCase().includes(e.filter.toLowerCase())).map(eX).concat({value:null,key:`open-link:${eu.bn}`,render:e=>(0,r.jsxs)(r.Fragment,{children:[n.length>0&&(0,r.jsx)(b.l.Divider,{}),(0,r.jsx)(eY,{leadingVisual:(0,r.jsx)(A.TelescopeIcon,{}),...e,inactiveText:l?"Start a new conversation to use other extensions.":void 0,children:"Marketplace"})]})})??null,a[0]=n,a[1]=e,a[2]=l,a[3]=i):i=a[3],t=i}return t}(a?.category==="agents"?a:null),u=function(e){let{currentReferences:t}=(0,d.Pk)(),a=tr(e),n=e!==a,{repositories:i,loading:s}=(0,td.U)(a?.filter??"",null!==a),l=(0,g.useMemo)(()=>new Set(t.filter(e=>"repository"===e.type).map(e=>e.id)),[t]),{ssoOrganizations:o}=(0,d.Pk)();return{suggestions:(0,g.useMemo)(()=>{if(!a)return null;if("initial"===s)return"loading";let e=void 0!==a.nextCategory,t=i.toSorted((e,t)=>l.has(e.databaseId)&&!l.has(t.databaseId)?-1:l.has(t.databaseId)&&!l.has(e.databaseId)?1:0).slice(0,5).map(t=>({value:e?null:$.Q.stringify({type:"repository",repo:t.nwo}),key:t.nwo,render:a=>(0,r.jsx)(e8,{repository:t,isMultistep:e,stale:!!s||n,...a})}))??[];return o.length>0&&t.push({value:null,key:1===o.length?`open-link:${th(o[0])}`:"sso-orgs",render:e=>(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(b.l.Divider,{}),(0,r.jsx)(tm,{orgs:o,...e})]})}),t},[i,s,a,l,o,n]),stale:!0===s}}(a?.category==="repositories"?a:null),m=function(e){let t,a,n,s,l,o=(0,i.c)(18),{service:c}=(0,D.b)(),d=tr(e),u=e!==d,m=null!==d,h=d?.repository,p=d?.filter;o[0]!==h||o[1]!==p?(t=["copilot-autocomplete-issues",h,p],o[0]=h,o[1]=p,o[2]=t):t=o[2],o[3]!==d||o[4]!==c?(a=async()=>c.fetchAutocompleteIssues(d.repository,d.filter),o[3]=d,o[4]=c,o[5]=a):a=o[5],o[6]!==m||o[7]!==t||o[8]!==a?(n={enabled:m,queryKey:t,queryFn:a,placeholderData:to},o[6]=m,o[7]=t,o[8]=a,o[9]=n):n=o[9];let f=(0,tn.I)(n);e:{let e;if(!d){s=null;break e}if(f.isLoading){s="loading";break e}o[10]!==d||o[11]!==u||o[12]!==f.data||o[13]!==f.isPlaceholderData?(e=f.data?.map(e=>({value:$.Q.stringify({type:"issue",repo:d.repository,id:e.number.toString()}),key:e.number.toString(),render:t=>(0,r.jsx)(e7,{...t,issue:e,stale:f.isPlaceholderData||u})}))??null,o[10]=d,o[11]=u,o[12]=f.data,o[13]=f.isPlaceholderData,o[14]=e):e=o[14],s=e}let g=s;return o[15]!==f.isPlaceholderData||o[16]!==g?(l={suggestions:g,stale:f.isPlaceholderData},o[15]=f.isPlaceholderData,o[16]=g,o[17]=l):l=o[17],l}(a?.category==="issues"?a:null),h=function(e){let t,a,n,s,l,o=(0,i.c)(18),{service:c}=(0,D.b)(),d=tr(e),u=e!==d,m=null!==d,h=d?.repository,p=d?.filter;o[0]!==h||o[1]!==p?(t=["copilot-autocomplete-pulls",h,p],o[0]=h,o[1]=p,o[2]=t):t=o[2],o[3]!==d||o[4]!==c?(a=async()=>c.fetchAutocompletePullRequests(d.repository,d.filter),o[3]=d,o[4]=c,o[5]=a):a=o[5],o[6]!==m||o[7]!==t||o[8]!==a?(n={enabled:m,queryKey:t,queryFn:a,placeholderData:tc},o[6]=m,o[7]=t,o[8]=a,o[9]=n):n=o[9];let f=(0,tn.I)(n);e:{let e;if(!d){s=null;break e}if(f.isLoading){s="loading";break e}o[10]!==d||o[11]!==u||o[12]!==f.data||o[13]!==f.isPlaceholderData?(e=f.data?.map(e=>({value:$.Q.stringify({type:"pull-request",repo:d.repository,id:e.number.toString()}),key:e.number.toString(),render:t=>(0,r.jsx)(e6,{...t,pullRequest:e,stale:f.isPlaceholderData||u})}))??null,o[10]=d,o[11]=u,o[12]=f.data,o[13]=f.isPlaceholderData,o[14]=e):e=o[14],s=e}let g=s;return o[15]!==f.isPlaceholderData||o[16]!==g?(l={suggestions:g,stale:f.isPlaceholderData},o[15]=f.isPlaceholderData,o[16]=g,o[17]=l):l=o[17],l}(a?.category==="pulls"?a:null),p=function(e){let t,a,n,s,l,o=(0,i.c)(18),{service:c}=(0,D.b)(),d=tr(e),u=e!==d,m=null!==d,h=d?.repository,p=d?.filter;o[0]!==h||o[1]!==p?(t=["copilot-autocomplete-discussions",h,p],o[0]=h,o[1]=p,o[2]=t):t=o[2],o[3]!==d||o[4]!==c?(a=async()=>c.fetchAutocompleteDiscussions(d.repository,d.filter),o[3]=d,o[4]=c,o[5]=a):a=o[5],o[6]!==m||o[7]!==t||o[8]!==a?(n={enabled:m,queryKey:t,queryFn:a,placeholderData:ti},o[6]=m,o[7]=t,o[8]=a,o[9]=n):n=o[9];let f=(0,tn.I)(n);e:{let e;if(!d){s=null;break e}if(f.isLoading){s="loading";break e}o[10]!==d||o[11]!==f.data||o[12]!==f.isPlaceholderData||o[13]!==u?(e=f.data?.map(e=>({value:$.Q.stringify({type:"discussion",repo:d.repository,id:e.number.toString()}),key:e.number.toString(),render:t=>(0,r.jsx)(e3,{...t,discussion:e,stale:f.isPlaceholderData||u})}))??null,o[10]=d,o[11]=f.data,o[12]=f.isPlaceholderData,o[13]=u,o[14]=e):e=o[14],s=e}let g=s;return o[15]!==f.isPlaceholderData||o[16]!==g?(l={suggestions:g,stale:f.isPlaceholderData},o[15]=f.isPlaceholderData,o[16]=g,o[17]=l):l=o[17],l}(a?.category==="discussions"?a:null),f=function(e){var t;let a,n,s,l,o,c,u,m,h,p,f,g,y,x,v=(0,i.c)(23),_=(0,D.b)(),C=null!==e,j=e?.repository;v[0]!==j?(a=["copilot-repository",j],v[0]=j,v[1]=a):a=v[1],v[2]!==_||v[3]!==e?.repository?(n=async()=>{if(!e?.repository)return null;let t=await _.service.fetchRepo(e?.repository);if(!t.ok)throw Error("Failed to fetch repository");return t.payload},v[2]=_,v[3]=e?.repository,v[4]=n):n=v[4],v[5]!==C||v[6]!==a||v[7]!==n?(s={enabled:C,queryKey:a,queryFn:n,staleTime:3e5},v[5]=C,v[6]=a,v[7]=n,v[8]=s):s=v[8];let b=(0,tn.I)(s),S=(t=b.data??null,g=(0,i.c)(11),y=(0,D.b)(),x=null!==t,!0!==g[0]||g[1]!==t?(h=["copilot-repository-files",t,!0],g[0]=!0,g[1]=t,g[2]=h):h=g[2],!0!==g[3]||g[4]!==y||g[5]!==t?(p=async()=>{if(!t)return{};let e=await y.service.listRepoFiles(t,!0);if(!e.ok)throw Error("Failed to fetch files for repository");return e.payload},g[3]=!0,g[4]=y,g[5]=t,g[6]=p):p=g[6],g[7]!==x||g[8]!==h||g[9]!==p?(f={enabled:x,queryKey:h,queryFn:p,staleTime:3e5},g[7]=x,g[8]=h,g[9]=p,g[10]=f):f=g[10],(0,tn.I)(f));S.data?.directories,v[9]!==S.data?.directories?(l=S.data?.directories??[],v[9]=S.data?.directories,v[10]=l):l=v[10],v[11]!==l?(o=new Set(l),v[11]=l,v[12]=o):o=v[12];let w=o;v[13]!==S.data?(c=S.data?(S.data.paths??[]).concat(S.data.directories??[]):null,v[13]=S.data,v[14]=c):c=v[14];let N=function(e,t){let a,n,r,s=(0,i.c)(9),{findFileWorkerPath:l}=(0,d.Pk)();s[0]!==e||s[1]!==t||s[2]!==l?(a=["copilot-worker-filter",l,e,t],n=async a=>{let{signal:n}=a;return e?0===t.length?e:ts(e,t,l,n):[]},s[0]=e,s[1]=t,s[2]=l,s[3]=a,s[4]=n):(a=s[3],n=s[4]);let o=null!==e;return s[5]!==a||s[6]!==n||s[7]!==o?(r={queryKey:a,queryFn:n,enabled:o,staleTime:1/0,gcTime:1e4,networkMode:"always",retry:!1,placeholderData:tl},s[5]=a,s[6]=n,s[7]=o,s[8]=r):r=s[8],(0,tn.I)(r)}(c,e?.filter??"");e:{let t;if(!e){u=null;break e}if(b.isLoading||S.isLoading||N.isLoading){u="loading";break e}v[15]!==w||v[16]!==N.data||v[17]!==N.isPlaceholderData||v[18]!==e?(t=[...N.data?.slice(0,5).map(t=>({value:$.Q.stringify({repo:e.repository,type:"file",id:t}),key:t,render:e=>(0,r.jsx)(e4,{...e,path:t,type:w.has(t)?"folder":"file",stale:N.isPlaceholderData})}))??[]],v[15]=w,v[16]=N.data,v[17]=N.isPlaceholderData,v[18]=e,v[19]=t):t=v[19];let a=t;u=a.length>0?a:null}let I=u;return v[20]!==b.isPlaceholderData||v[21]!==I?(m={suggestions:I,stale:b.isPlaceholderData},v[20]=b.isPlaceholderData,v[21]=I,v[22]=m):m=v[22],m}(a?.category==="files"?a:null),y=function(e){let t,a=(0,i.c)(5),{ssoOrganizations:n}=(0,d.Pk)();e:{let r;if(!e){t=null;break e}if(a[0]!==e||a[1]!==n){let t;a[3]!==e?(t=t=>t.login.toLowerCase().includes(e.filter.toLowerCase()),a[3]=e,a[4]=t):t=a[4],r=n.filter(t).slice(0,10).map(tp),a[0]=e,a[1]=n,a[2]=r}else r=a[2];t=r}return t}(a?.category==="sso-orgs"?a:null);switch(a?.category){case"commands":{let e;return t[0]!==s?(e={suggestions:s,stale:!1},t[0]=s,t[1]=e):e=t[1],e}case void 0:{let e;return t[2]===Symbol.for("react.memo_cache_sentinel")?(e={suggestions:null,stale:!1},t[2]=e):e=t[2],e}case"categories":{let e;return t[3]!==o?(e={suggestions:o,stale:!1},t[3]=o,t[4]=e):e=t[4],e}case"repositories":return u;case"issues":return m;case"agents":{let e;return t[5]!==c?(e={suggestions:c,stale:!1},t[5]=c,t[6]=e):e=t[6],e}case"discussions":return p;case"pulls":return h;case"files":return f;case"sso-orgs":{let e;return t[7]!==y?(e={suggestions:y,stale:!1},t[7]=y,t[8]=e):e=t[8],e}}}(s);if(v[6]!==S||v[7]!==R?(o={query:R,onShowAgentsDialog:S},v[6]=S,v[7]=R,v[8]=o):o=v[8],!function(e){let t,a,n=(0,i.c)(12),{query:r,onShowAgentsDialog:s}=e,l=r?.category==="agents",{availableAgents:o,loading:c,disabled:d}=(0,eu.JE)(l);n[0]!==l||n[1]!==o?.length||n[2]!==d||n[3]!==c||n[4]!==s?(t=()=>{l&&!c&&(d?s("agents-not-supported"):o?.length||s("no-agents-available"))},n[0]=l,n[1]=o?.length,n[2]=d,n[3]=c,n[4]=s,n[5]=t):t=n[5],n[6]!==l||n[7]!==o||n[8]!==d||n[9]!==c||n[10]!==s?(a=[l,c,o,d,s],n[6]=l,n[7]=o,n[8]=d,n[9]=c,n[10]=s,n[11]=a):a=n[11],(0,g.useEffect)(t,a)}(o),!E||w){let e;return v[9]!==_?(e=(0,r.jsx)("div",{children:_}),v[9]=_,v[10]=e):e=v[10],e}v[11]!==I||v[12]!==C||v[13]!==j||v[14]!==R?(c=e=>{let{suggestion:t}=e,a="string"==typeof t?t:t.value;if((0,p.BI)("dotcom_chat.activate",{target:"AUTOCOMPLETE_ITEM_SELECTED",mode:I,suggestion:a}),"object"==typeof t&&R?.category==="commands")return void C?.(t.key);let n=null!==a&&R?.category!=="agents"?$.Q.parse(a):void 0;if(n&&j(n),"object"!=typeof t||null!==t.value)return;let r=/^open-link:(.+)$/.exec(t.key);if(r){k(null),window.open(r[1],"_blank");return}switch(R?.category){case"categories":let i;i=t.key,eZ.some(e=>e.value===i)&&k(function(e){switch(e){case"repositories":return{category:"repositories",filter:""};case"agents":return{category:"agents",filter:""};case"repositories:discussions":return{category:"repositories",filter:"",nextCategory:"discussions"};case"repositories:issues":return{category:"repositories",filter:"",nextCategory:"issues"};case"repositories:pulls":return{category:"repositories",filter:"",nextCategory:"pulls"};case"repositories:files":return{category:"repositories",filter:"",nextCategory:"files"}}}(t.key));break;case"repositories":"sso-orgs"===t.key?k({category:"sso-orgs",filter:""}):R.nextCategory&&k({category:R.nextCategory,filter:"",repository:t.key})}},v[11]=I,v[12]=C,v[13]=j,v[14]=R,v[15]=c):c=v[15];let M=c;v[16]!==R?(u=e=>{if("/"===e.trigger.triggerChar){(null===R&&1===e.target.selectionStart&&1===e.target.selectionEnd||R?.category==="commands")&&k({category:"commands",filter:e.query});return}k(t=>t?{...t,filter:e.query}:{category:"categories",filter:e.query,index:(e.target.selectionStart??0)-(e.query.length+e.trigger.triggerChar.length)})},v[16]=R,v[17]=u):u=v[17];let O=u;v[18]===Symbol.for("react.memo_cache_sentinel")?(m=()=>k(null),v[18]=m):m=v[18];let F=m;return v[19]!==R?(h=R&&function(e){switch(e.category){case"categories":case"commands":return null;case"repositories":switch(e.nextCategory){case"discussions":case"issues":case"pulls":case"files":return`${eQ[e.nextCategory]} \u{203A}`;default:return"Repositories \u203A"}case"agents":return eQ[e.category];case"discussions":case"issues":case"pulls":case"files":return`${eQ[e.category]} \u{203A} ${e.repository} \u{203A}`;case"sso-orgs":return"Single sign-on"}}(R)||void 0,v[19]=R,v[20]=h):h=v[20],v[21]!==_||v[22]!==M||v[23]!==O||v[24]!==L||v[25]!==h?(f=(0,r.jsx)(eG.a,{fullWidth:!0,suggestions:L,triggers:t,tabInsertsSuggestions:!1,onHideSuggestions:F,onShowSuggestions:O,onSelectSuggestion:M,suggestionsPlacement:"below",title:h,asMenu:!0,children:_}),v[21]=_,v[22]=M,v[23]=O,v[24]=L,v[25]=h,v[26]=f):f=v[26],v[27]!==P?(y=P&&(0,r.jsx)("span",{role:"status","aria-live":"polite",className:"sr-only",children:"Loading"}),v[27]=P,v[28]=y):y=v[28],v[29]!==y||v[30]!==f?(x=(0,r.jsxs)(r.Fragment,{children:[f,y]}),v[29]=y,v[30]=f,v[31]=x):x=v[31],x}function tg(){return"undefined"!=typeof document}try{tf.displayName||(tf.displayName="ChatInputAutocomplete")}catch{}let ty="ChatInput-module__container--qmP6j",tx="ChatInput-module__input--HalEQ",tv="ChatInput-module__containerDisabled--bIHy2",t_="ChatInput-module__toolbar--Kv3Gl",tC="ChatInput-module__containerSmall--NfPkF",tj="ChatInput-module__inputContainer--cpjba",tb="ChatInput-module__inputPreview--Fdwj0",tS="ChatInput-module__clicked--u0igo",tw="ChatInput-module__attachments--Fv007",tN="ChatInput-module__attachmentButton--qtFf6",tI="ChatInput-module__attachmentButtonText--fVuEs",tE="ChatInput-module__inputContainerNewConversation--FexlN",tA="ChatInput-module__inputDisabled--QQiex",tT="ChatInput-module__toolbarNoModes--KJL2k",tR="ChatInput-module__extra--oQVm8",tk="ChatInput-module__CommandIconButton--lxm7H",tL="ChatInput-module__mode--dH9c4",tP="ChatInput-module__modeButton--y5Yp0",tM="ChatInput-module__modeSelectButton--rJ86j",tO="ChatInput-module__modeSelectorMobile--ZPCVa",tF="ChatInput-module__modeSelectorDesktop--SifXL",tD="ChatInput-module__actions--zbM52",t$="ChatInput-module__actionsMultiple--LHDC3",tB="ChatInput-module__toolbarButtons--YDoIY",tz="ChatInput-module__lighterSegmentedControl--uAdMt";var tU=a(16378),tW=a(6224);let tV=(0,g.forwardRef)(function(e,t){let a,n,l,o=(0,i.c)(8),{text:c,availableCommandKeys:u}=e;o[0]!==c?(a=(0,tU._)(c),o[0]=c,o[1]=a):a=o[1];let{availableAgents:m}=(0,eu.JE)(a),{currentReferences:h}=(0,d.Pk)(),p=(0,D.b)(),f=(0,O.l)().use(B.U,{references:h,agents:void 0===m?[]:m,commands:u}).parse(c),y=(0,tU.O)(f),x=(0,g.useRef)(y);(0,g.useEffect)(function(){for(let e of x.current)if(!y.has(e)){let t=h.find(t=>(0,s.Vb)(t)===e);t&&p.removeReference(t)}x.current=y}),o[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,w.G)("copilot-chat-input-textarea-preview"),o[2]=n):n=o[2];let v=f.children.map(tH);return o[3]!==t||o[4]!==n||o[5]!==tb||o[6]!==v?(l=(0,r.jsx)("div",{id:"copilot-chat-textarea-preview",...n,"aria-hidden":!0,className:tb,ref:t,role:"presentation",children:v}),o[3]=t,o[4]=n,o[5]=tb,o[6]=v,o[7]=l):l=o[7],l});try{tV.displayName||(tV.displayName="ChatInputPreview")}catch{}function tH(e,t){switch(e.type){case"text":return e.value;case"command":return(0,r.jsx)("span",{className:tW.A.command,...(0,w.G)("input-preview-command"),children:e.value},t);case"reference-mention":return void 0!==e.data.mentionedReferenceId?(0,r.jsx)("span",{className:tW.A.mention,...(0,w.G)("input-preview-ref"),children:e.value},t):e.value;case"agent-mention":return(0,r.jsx)("span",{className:tW.A.mention,children:e.value},t)}}var tq=a(11683),tK=a(45800),tG=a(25536),tQ=a(7730),tZ=a(57448),tJ=a(1631),tY=a(15518);let tX=(0,g.memo)(e=>{let t,a,n,l,o,c,u,m,h,p,f,x,v,C,S,N,I,E=(0,i.c)(51),{className:T,isLoading:R,returnFocusRef:P,tokenSize:M,onSelectReference:O,getReferenceVersion:F,showConvertToFileText:$,onConvertToFile:B,onConvertToFileDismiss:z,hideAttachmentsMenu:U,onRemoveReference:W}=e,V=void 0===M?"medium":M,{currentReferences:H}=(0,d.Pk)(),K=(0,D.b)(),G=(0,g.useRef)(null),Q=(0,tQ.g)(G),[Z,J]=(0,g.useState)(!1);E[0]!==H?(t=(0,s.rT)(H),E[0]=H,E[1]=t):t=E[1];let Y=t,{setSelectedCopilotSpaceId:X}=(0,tG.O)(),ee=(0,g.useRef)(null);E[2]===Symbol.for("react.memo_cache_sentinel")?(a={containerRef:ee,focusableElementFilter:t1,bindKeys:tq.z0.ArrowHorizontal|tq.z0.HomeAndEnd,focusInStrategy:"previous",focusOutBehavior:"stop"},E[2]=a):a=E[2],E[3]!==Y?(n=[Y],E[3]=Y,E[4]=n):n=E[4],(0,tK.G)(a,n),E[5]===Symbol.for("react.memo_cache_sentinel")?(l=[],E[5]=l):l=E[5];let et=(0,g.useRef)(l),ea=(e,t)=>{let a=et.current[t+1]??et.current[t-1]??P.current;a?.focus(),W?.(e),(0,s.yA)(e)&&X(void 0),K.removeReference(e)};E[6]!==K||E[7]!==P||E[8]!==Y||E[9]!==X?(o=()=>{setTimeout(()=>P.current?.focus()),Y.filter(s.yA).length>0&&X(void 0),K.clearCurrentReferences()},E[6]=K,E[7]=P,E[8]=Y,E[9]=X,E[10]=o):o=E[10];let en=o,er=(0,g.useRef)(Y);E[11]!==Y?(c=()=>{if(er.current.length<Y.length){let e=Y.find(e=>!er.current.find(t=>(0,s.x_)(t,e))),t=e?Y.indexOf(e):-1;et?.current?.[t]?.scrollIntoView({behavior:"smooth",block:"nearest",inline:"end"})}er.current=Y},u=[Y],E[11]=Y,E[12]=c,E[13]=u):(c=E[12],u=E[13]),(0,q.N)(c,u),E[14]!==z?(m=()=>{z?.()},E[14]=z,E[15]=m):m=E[15];let ei=m;E[16]===Symbol.for("react.memo_cache_sentinel")?(h=()=>{J(t2)},E[16]=h):h=E[16];let es=h,el=function(e,t,a,n){let r,s,l,o,c,d=(0,i.c)(14),[u,m]=(0,g.useState)(!1);d[0]!==n||d[1]!==t?(r=()=>{t.current&&m(t.current.some(e=>{if(!e)return!1;let t=e.querySelector(n);return!!t&&t.scrollWidth>t.clientWidth}))},d[0]=n,d[1]=t,d[2]=r):r=d[2];let h=r;return d[3]!==h||d[4]!==e.length?(s=()=>{if(0===e.length)return void m(!1);let t=requestAnimationFrame(h);return()=>cancelAnimationFrame(t)},d[3]=h,d[4]=e.length,d[5]=s):s=d[5],d[6]!==h||d[7]!==e?(l=[e,h],d[6]=h,d[7]=e,d[8]=l):l=d[8],(0,g.useEffect)(s,l),d[9]!==h||d[10]!==a||d[11]!==e.length?(o=()=>{if(0===e.length||!a.current)return;let t=new ResizeObserver(()=>{h()});return t.observe(a.current),()=>{t.disconnect()}},c=[e.length,h,a],d[9]=h,d[10]=a,d[11]=e.length,d[12]=o,d[13]=c):(o=d[12],c=d[13]),(0,g.useEffect)(o,c),u}(Y,et,ee,`.${tY.A.name}`),eo=(0,g.useId)();E[17]!==ei||E[18]!==$?(p=e=>{("Delete"===e.key||"Backspace"===e.key)&&(e.preventDefault(),e.stopPropagation(),$&&ei())},E[17]=ei,E[18]=$,E[19]=p):p=E[19];let ec=p;if(0===Y.length&&!R&&!$)return null;E[20]!==T?(f=(0,y.$)(T,"ChatInputReferences-module__container--bNybl"),E[20]=T,E[21]=f):f=E[21];let ed=Q&&"ChatInputReferences-module__scrolledToEnd--DONiv",eu=R&&"ChatInputReferences-module__loading--kAJlw";E[22]!==ed||E[23]!==eu?(x=(0,y.$)("ChatInputReferences-module__attachmentsList--mEJpJ",ed,eu),E[22]=ed,E[23]=eu,E[24]=x):x=E[24],E[25]!==eo||E[26]!==ei||E[27]!==B||E[28]!==ec||E[29]!==$||E[30]!==V?(v=$&&(0,r.jsxs)("div",{className:"ChatInputReferences-module__convertToFileContainer--y1XOU",children:[(0,r.jsx)(k.Q,{onClick:B,leadingVisual:A.FileIcon,className:"ChatInputReferences-module__convertToFileButton--hnPn2","aria-describedby":eo,onKeyDown:ec,children:"Convert to file"}),(0,r.jsx)(tJ.lh,{size:V,onRemove:ei,descriptionId:eo})]}),E[25]=eo,E[26]=ei,E[27]=B,E[28]=ec,E[29]=$,E[30]=V,E[31]=v):v=E[31];let em=Y.map((e,t)=>"repository"===e.type?(0,r.jsx)(t0,{reference:e,ref:e=>{et.current[t]=e},"data-index":t,size:V,fullWidth:Z,onRemove:()=>ea(e,t),onClick:O,getReferenceVersion:F},(0,s.Vb)(e)):(0,r.jsx)(tJ.BR,{reference:e,ref:e=>{et.current[t]=e},"data-index":t,size:V,fullWidth:Z,onRemove:()=>ea(e,t),onClick:O,getReferenceVersion:F},(0,s.Vb)(e)));return E[32]!==R?(C=R&&(0,r.jsxs)("div",{className:"ChatInputReferences-module__functionLoading--Oimop",...(0,w.G)("loading-indicator"),children:[(0,r.jsx)(j.A,{size:"small"}),"Retrieving\u2026"]}),E[32]=R,E[33]=C):C=E[33],E[34]!==x||E[35]!==v||E[36]!==em||E[37]!==C?(S=(0,r.jsxs)("div",{className:x,ref:G,children:[v,em,C]}),E[34]=x,E[35]=v,E[36]=em,E[37]=C,E[38]=S):S=E[38],E[39]!==es||E[40]!==el||E[41]!==U||E[42]!==en||E[43]!==Y.length||E[44]!==Z||E[45]!==V?(N=Y.length>0&&!U&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"ChatInputReferences-module__divider--k8d6S"}),(0,r.jsxs)(_.W,{children:[(0,r.jsx)(_.W.Anchor,{children:(0,r.jsx)(L.K,{icon:A.KebabHorizontalIcon,"aria-label":"Attachments options",variant:"invisible",tooltipDirection:"n",className:"ChatInputReferences-module__menuButton--IVLqN",size:V})}),(0,r.jsx)(_.W.Overlay,{width:"small",children:(0,r.jsxs)(b.l,{children:[el&&(0,r.jsxs)(b.l.Item,{onSelect:es,children:[(0,r.jsx)(b.l.LeadingVisual,{children:Z?(0,r.jsx)(A.EyeClosedIcon,{}):(0,r.jsx)(A.EyeIcon,{})}),Z?"Hide full attachment names":"Show full attachment names"]}),(0,r.jsxs)(b.l.Item,{onSelect:en,children:[(0,r.jsx)(b.l.LeadingVisual,{children:(0,r.jsx)(A.TrashIcon,{})}),"Remove attachments"]})]})})]})]}),E[39]=es,E[40]=el,E[41]=U,E[42]=en,E[43]=Y.length,E[44]=Z,E[45]=V,E[46]=N):N=E[46],E[47]!==f||E[48]!==S||E[49]!==N?(I=(0,r.jsxs)("div",{role:"toolbar","aria-label":"Attachments",className:f,ref:ee,children:[S,N]}),E[47]=f,E[48]=S,E[49]=N,E[50]=I):I=E[50],I});tX.displayName="ChatInputReferences";let t0=(0,g.forwardRef)(function(e,t){let a,n,s,l=(0,i.c)(8),o=e.reference,c=(0,d.pn)(t5),u=`${o.ownerLogin}/${o.name}`,[m,h]=(0,tZ.vn)(u),p=(0,g.useRef)(!1),f=m.code===tZ.W5.Unindexed||m.docs===tZ.W5.Unindexed;return l[0]!==c||l[1]!==f||l[2]!==h?(a=function(){!p.current&&f&&c&&(p.current=!0,h())},n=[c,f,h],l[0]=c,l[1]=f,l[2]=h,l[3]=a,l[4]=n):(a=l[3],n=l[4]),(0,g.useEffect)(a,n),l[5]!==e||l[6]!==t?(s=(0,r.jsx)(tJ.BR,{ref:t,...e}),l[5]=e,l[6]=t,l[7]=s):s=l[7],s});try{t0.displayName||(t0.displayName="RepoReferenceToken")}catch{}try{t0.displayName||(t0.displayName="RepoReferenceToken")}catch{}function t1(e){return!e.hasAttribute("aria-hidden")}function t2(e){return!e}function t5(e){return e.model&&!e.model.hasLimitedCapabilities}var t3=a(81829);let t4=()=>{let e,t=(0,i.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)("svg",{"aria-label":"Tool",xmlns:"http://www.w3.org/2000/svg",width:"17",height:"16",fill:"none",viewBox:"0 0 17 16",children:(0,r.jsx)("path",{fill:"currentColor",d:"M6.146 2.344A6 6 0 0 1 11.44.679c.659.117 1.087.598 1.21 1.155a1.68 1.68 0 0 1-.47 1.544L10.19 5.371a.25.25 0 0 0-.069.224l.17.89c.02.101.098.18.198.199l.891.17a.25.25 0 0 0 .224-.069l1.994-1.993a1.68 1.68 0 0 1 1.544-.469 1.48 1.48 0 0 1 1.155 1.211 6 6 0 0 1-1.665 5.295 6 6 0 0 1-5.553 1.614c-.182-.041-.312.015-.37.076l-2.24 2.47a.75.75 0 0 1-1.11-1.007l2.249-2.48c.488-.527 1.199-.658 1.797-.524a4.5 4.5 0 0 0 4.166-1.21 4.5 4.5 0 0 0 1.249-3.972l-.003-.008c-.028-.005-.094 0-.159.065l-1.994 1.993c-.41.41-.996.59-1.565.481l-.89-.17a1.75 1.75 0 0 1-1.392-1.39l-.17-.89a1.75 1.75 0 0 1 .482-1.566l1.993-1.993c.065-.065.07-.132.065-.16l-.008-.003a4.5 4.5 0 0 0-3.972 1.25 4.5 4.5 0 0 0-1.21 4.165c.133.599.004 1.31-.522 1.797l-.007.006-2.474 2.244a.75.75 0 0 1-1.008-1.111l2.47-2.24c.061-.058.118-.187.077-.37a6 6 0 0 1 1.614-5.552"})}),t[0]=e):e=t[0],e};try{t4.displayName||(t4.displayName="MCPIcon")}catch{}var t7=a(97793),t6=a(97665),t8=a(99511),t9=a(40480),ae=a(26382);let at=({anchorRef:e,open:t,onOpenChange:a})=>{let[n,i]=(0,g.useState)(!1),[s,o]=(0,g.useState)(""),[c,d]=(0,g.useState)(null),[u,m]=(0,g.useState)(()=>new Set),{service:h}=(0,D.b)(),p=(0,t6.jE)(),{data:f,isPending:y,isError:x}=(0,tn.I)({enabled:t,queryKey:["copilot-chat-mcps"],queryFn:async()=>h.fetchMCPServers(),placeholderData:e=>e}),v=(0,g.useMemo)(()=>f||[],[f]),_=(0,g.useMemo)(()=>v.filter(e=>e.name.toLowerCase().includes(s.toLowerCase())),[v,s]),C=e=>{m(t=>{let a=new Set(t);return a.has(e)?a.delete(e):a.add(e),a})};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(eA.T,{open:t,onOpen:()=>a(!0),onClose:()=>a(!1),anchorRef:e,side:"outside-bottom",align:"end",renderAnchor:()=>(0,r.jsx)(r.Fragment,{}),width:"medium",children:(0,r.jsxs)("div",{className:"McpToolsManager-module__container--PHa2N",children:[(0,r.jsxs)("div",{className:"McpToolsManager-module__header--PXzkx",children:[(0,r.jsx)("div",{className:"McpToolsManager-module__headerTitle--CiuwN",children:"MCP tools"}),(0,r.jsx)(t8.A,{placeholder:"Search by provider",value:s,onChange:e=>o(e.target.value),className:"McpToolsManager-module__searchInput--v2pAX",leadingVisual:A.SearchIcon})]}),(0,r.jsx)("div",{className:"McpToolsManager-module__contentArea--aqxn4",children:y?(0,r.jsx)("div",{className:"McpToolsManager-module__loadingContainer--btAEV",children:(0,r.jsx)(j.A,{})}):x?(0,r.jsxs)(ae.E,{children:[(0,r.jsx)(ae.E.Visual,{children:"\u26A0\uFE0F"}),(0,r.jsx)(ae.E.Heading,{children:"Error loading tools"})]}):0===v.length?(0,r.jsxs)("div",{className:"McpToolsManager-module__emptyState--qpgwB",children:[(0,r.jsx)(A.ToolsIcon,{size:24}),(0,r.jsx)("div",{className:"McpToolsManager-module__emptyStateTitle--PLCEY",children:"You don't have any MCP tools configured"}),(0,r.jsx)("div",{className:"McpToolsManager-module__emptyStateDescription--x7TOI",children:"Add one to connect models to files, APIs, databases, and more."})]}):(0,r.jsx)(t9.G,{"aria-label":"MCP server selection",children:_.map(e=>{let t;return(0,r.jsxs)(t9.G.Item,{id:e.id,onSelect:()=>{var t;d(t=e.id),C(t)},expanded:u.has(e.id),onExpandedChange:()=>C(e.id),current:c===e.id,"aria-selected":c===e.id,children:[(0,r.jsx)("span",{className:"McpToolsManager-module__serverName--au45P",children:e.name}),e.tools&&e.tools.length>0?(0,r.jsx)(t9.G.SubTree,{children:(t=e.tools).length>0&&"object"==typeof t[0]&&"name"in t[0]?e.tools.map(t=>{let a=`${e.id}-${t.name}`,n=c===a;return(0,r.jsx)(t9.G.Item,{id:a,current:n,"aria-selected":n,onSelect:()=>{!n&&l.W.mcpToolDescriptions?d(a):d(null)},children:l.W.mcpToolDescriptions?(0,r.jsxs)("div",{className:"McpToolsManager-module__toolItem--Eo5Ka",children:[(0,r.jsxs)("div",{className:"McpToolsManager-module__toolNameContainer--VKNAW",children:[n?(0,r.jsx)(A.DashIcon,{size:12}):(0,r.jsx)(A.PlusIcon,{size:12}),(0,r.jsx)("span",{className:"McpToolsManager-module__toolName--EL2OQ",children:t.name})]}),t.description&&n&&(0,r.jsx)("div",{className:"McpToolsManager-module__toolDescription--nn86Q",children:t.description})]}):t.name},t.name)}):e.tools.map(t=>{let a=`${e.id}-${t}`;return(0,r.jsx)(t9.G.Item,{id:a,onSelect:()=>d(a),current:c===a,"aria-selected":c===a,children:t},t)})}):null]},e.id)})})}),(0,r.jsx)("div",{className:"McpToolsManager-module__footer--UZmCo",children:(0,r.jsx)(k.Q,{variant:"default",leadingVisual:A.PlusIcon,onClick:()=>{i(!0)},block:!0,children:"New tool"})})]})},"mcp-tool-manager"),(0,r.jsx)(t7.O,{isOpen:n,onClose:()=>{i(!1)},onServerAdded:()=>{p.invalidateQueries({queryKey:["copilot-chat-mcps"]})}})]})};try{at.displayName||(at.displayName="McpToolsManager")}catch{}let aa=()=>{let e,t=(0,i.c)(2),[a,n]=(0,g.useState)(!1),s=(0,g.useRef)(null);return t[0]!==a?(e=(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(L.K,{ref:s,icon:t4,variant:"invisible","aria-label":"MCP tools",onClick:()=>n(!a)}),(0,r.jsx)(at,{anchorRef:s,open:a,onOpenChange:n})]}),t[0]=a,t[1]=e):e=t[1],e};try{aa.displayName||(aa.displayName="McpToolMenu")}catch{}var an=a(12970),ar=a(11196);function ai(){let e,t,a,n=(0,i.c)(8),s=(0,D.b)(),{usePlanningIntent:l,selectedThreadID:o}=(0,d.bP)("usePlanningIntent","selectedThreadID");n[0]!==s||n[1]!==l?(e=()=>s.setUsePlanningIntent(!l),n[0]=s,n[1]=l,n[2]=e):e=n[2];let c=e;if(o){let e;return n[3]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)(ar.m,{text:"Planning mode is enabled and cannot be toggled after the conversation has started.",children:(0,r.jsx)(k.Q,{leadingVisual:A.TasklistIcon,inactive:!0,"aria-disabled":!0,"aria-pressed":!0,children:"Plan"})}),n[3]=e):e=n[3],e}return n[4]===Symbol.for("react.memo_cache_sentinel")?(t=(0,r.jsx)(A.TasklistIcon,{}),n[4]=t):t=n[4],n[5]!==c||n[6]!==l?(a=(0,r.jsx)(x,{icon:t,isSelected:l,onClick:c,children:"Plan"}),n[5]=c,n[6]=l,n[7]=a):a=n[7],a}try{ai.displayName||(ai.displayName="PlanningIntentToggle")}catch{}var as=a(49851),al=a(66990),ao=a(46642),ac=a(66565),ad=a(73077),au=a(63422);function am(e){let t,a,n,s,l,o,c,d,u,m,h,p,f,g,y=(0,i.c)(24),{nwo:x,branch:v,selectedAgent:C,onSelect:j}=e,{data:S,isLoading:w}=(p=(0,i.c)(9),f=(0,D.b)(),g=!!x,p[0]!==x?(u=["custom-agents",x],p[0]=x,p[1]=u):u=p[1],p[2]!==f||p[3]!==x?(m=async()=>{if(!x)return[];let[e,t]=x.split("/");if(!e||!t)return[];let a=await f.service.fetchCustomAgents(e,t);return a.ok?a.payload:[]},p[2]=f,p[3]=x,p[4]=m):m=p[4],p[5]!==g||p[6]!==u||p[7]!==m?(h={enabled:g,queryKey:u,queryFn:m},p[5]=g,p[6]=u,p[7]=m,p[8]=h):h=p[8],(0,tn.I)(h));y[0]!==S?(t=void 0===S?[]:S,y[0]=S,y[1]=t):t=y[1];let N=t;if(y[2]!==N||y[3]!==C){let e;y[5]!==C?(e=e=>e.name===C,y[5]=C,y[6]=e):e=y[6],a=N.find(e),y[2]=N,y[3]=C,y[4]=a}else a=y[4];let I=a,E=I?.display_name||I?.name;if(y[7]!==v||y[8]!==x){let e=new URLSearchParams({filename:".github/agents/my-agent.md",value:`---
name:
description:
---

# My Agent

Describe what your agent does here...`});n=x,s=v,l=e.toString(),y[7]=v,y[8]=x,y[9]=n,y[10]=s,y[11]=l}else n=y[9],s=y[10],l=y[11];let T=`/${n}/new/${s}?${l}`,R=E?`Custom agent: ${E}`:"Select a custom agent",k=!x||!v||w,L=!!C;return y[12]!==R||y[13]!==k||y[14]!==L?(o=(0,r.jsx)(_.W.Anchor,{children:(0,r.jsx)(au.L,{icon:A.CopilotIcon,selectedIcon:as.c9,"aria-label":R,selected:L,disabled:k})}),y[12]=R,y[13]=k,y[14]=L,y[15]=o):o=y[15],y[16]!==N||y[17]!==T||y[18]!==j||y[19]!==C?(c=(0,r.jsx)(_.W.Overlay,{width:"auto",children:0===N.length?(0,r.jsx)(ah,{newFileUrl:T}):(0,r.jsxs)(b.l,{children:[(0,r.jsxs)(b.l.Group,{selectionVariant:"single",children:[(0,r.jsx)(b.l.Item,{selected:null===C,onSelect:()=>j(void 0),children:"None"}),N.map(e=>(0,r.jsx)(b.l.Item,{selected:C===e.name,onSelect:()=>j(e.name),children:e.display_name||e.name},e.name))]}),(0,r.jsx)(b.l.Divider,{}),(0,r.jsx)(b.l.Group,{selectionVariant:!1,children:(0,r.jsxs)(b.l.LinkItem,{href:T,target:"_blank",children:[(0,r.jsx)(b.l.LeadingVisual,{children:(0,r.jsx)(A.PlusIcon,{})}),"Create an agent"]})})]})}),y[16]=N,y[17]=T,y[18]=j,y[19]=C,y[20]=c):c=y[20],y[21]!==o||y[22]!==c?(d=(0,r.jsxs)(_.W,{children:[o,c]}),y[21]=o,y[22]=c,y[23]=d):d=y[23],d}let ah=e=>{let t,a,n,s=(0,i.c)(4),{newFileUrl:l}=e;return s[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,r.jsx)("h3",{className:"CustomAgentSelector-module__emptyStateTitle--uvBuH",children:"This repository has no custom agents"}),a=(0,r.jsx)("p",{className:"CustomAgentSelector-module__emptyStateDescription--cWTZ3",children:"Custom agents are reusable instructions and tools in your repository."}),s[0]=t,s[1]=a):(t=s[0],a=s[1]),s[2]!==l?(n=(0,r.jsxs)("div",{className:"CustomAgentSelector-module__emptyStateContainer--jwGCf",children:[t,a,(0,r.jsx)(ad.z,{href:l,children:"Create a custom agent"})]}),s[2]=l,s[3]=n):n=s[3],n};try{am.displayName||(am.displayName="CustomAgentSelector")}catch{}try{ah.displayName||(ah.displayName="EmptyState")}catch{}let ap=e=>{let t,a,n,s,l,o,c,d,u=(0,i.c)(29),{selectedRepo:m,selectedBranch:h,selectedCustomAgent:p,onRepoSelect:f,onBranchSelect:g,onCustomAgentSelect:y,agentSelectionEnabled:x}=e,v=void 0===x||x;u[0]!==g||u[1]!==f||u[2]!==m?(t=e=>{if(!m){let t=G.Jt.getLastUsedRepository();if(t){let e=et(t);f(e),g(e?.defaultBranch)}else{let t=e.find(ag);t&&(f(t),g(t.defaultBranch))}}},u[0]=g,u[1]=f,u[2]=m,u[3]=t):t=u[3];let _=t;u[4]!==g||u[5]!==f?(a=e=>{e&&(f(e),g(e.defaultBranch))},u[4]=g,u[5]=f,u[6]=a):a=u[6];let C=`Repository: ${m?.nameWithOwner||"Select repository"}`;return u[7]!==C?(n={"aria-label":C},u[7]=C,u[8]=n):n=u[8],u[9]===Symbol.for("react.memo_cache_sentinel")?(s=(0,r.jsx)(ac.f,{width:"150px",height:"32px"}),u[9]=s):s=u[9],u[10]!==_||u[11]!==m||u[12]!==a||u[13]!==n?(l=(0,r.jsx)(ao.P,{repositoryLoader:af,selectionVariant:"single",selectAllOption:!1,onSelect:a,currentSelection:m,width:"medium",additionalButtonProps:n,onLoad:_,loadingElement:s}),u[10]=_,u[11]=m,u[12]=a,u[13]=n,u[14]=l):l=u[14],u[15]!==g||u[16]!==h||u[17]!==m?(o=(0,r.jsx)(r.Fragment,{children:m?(0,r.jsx)(al.PI,{cacheKey:"repo-branch-agent-selector",canCreate:!1,currentCommitish:h??m.defaultBranch,defaultBranch:m.defaultBranch,owner:m.owner,repo:m.nameOnly,types:["branch"],selectedRefType:"branch",closeOnSelect:!0,hideShowAll:!0,actionListHeadingText:"Select a branch",onSelectItem:g,renderAnchor:e=>(0,r.jsx)(au.L,{...e,icon:A.GitBranchIcon,selectedIcon:as.gh,selected:h!==m.defaultBranch,"aria-label":`Branch: ${h||"Select branch"}`,"aria-labelledby":void 0})}):(0,r.jsx)(L.K,{icon:A.GitBranchIcon,"aria-label":"Loading branches\u2026",disabled:!0})}),u[15]=g,u[16]=h,u[17]=m,u[18]=o):o=u[18],u[19]!==v||u[20]!==y||u[21]!==h||u[22]!==p||u[23]!==m?(c=v&&(m?(0,r.jsx)(am,{nwo:m.nameWithOwner,branch:h,selectedAgent:p,onSelect:y}):(0,r.jsx)(L.K,{icon:A.CopilotIcon,"aria-label":"Loading agents\u2026",disabled:!0})),u[19]=v,u[20]=y,u[21]=h,u[22]=p,u[23]=m,u[24]=c):c=u[24],u[25]!==l||u[26]!==o||u[27]!==c?(d=(0,r.jsxs)("div",{className:"RepoBranchAgentSelector-module__container--gHrlH",children:[l,o,c]}),u[25]=l,u[26]=o,u[27]=c,u[28]=d):d=u[28],d};async function af(e="",t){let a=new URL("/copilot/agent-sessions/repositories",window.location.origin);e.trim()&&a.searchParams.set("q",e.trim()),t&&a.searchParams.set("defaultOwner",t);let n=await (0,M.lS)(a.href);if(n.ok){let{repositories:e}=await n.json();return e.map(e=>({id:e.id,nameWithOwner:e.nameWithOwner,enabled:!0,name:e.nameWithOwner,owner:e.owner,nameOnly:e.name,defaultBranch:e.defaultBranch,visibility:e.visibility}))}return[]}try{ap.displayName||(ap.displayName="RepoBranchAgentPicker")}catch{}function ag(e){return e.enabled}let ay=["github:cancel","copilot-chat:send-message","copilot-chat:edit-last-message"],ax=e=>{let t,a,n,o,c,u,m,f,x,_,C,j,b,S,A,R,k,L,Q,eo,ec,ed,eu,em,eh,ep,ef,eg,ey,ex,ev,e_,eC,ej,eb,eS,ew,eN,eI,eE,eA,eT,eR,ek=(0,i.c)(213),eL=(0,d.bP)("defaultRecipient","isWaitingOnAttachment","attachmentProcessingType","isWaitingOnCopilot","messages","mode","model","selectedThreadID","skillOptions","slashCommandLoading","thirdPartyMcpAllowed"),{model:eP}=eL,eM=(0,el.tD)(),eO=(0,D.b)(),eF=eO.maxMessagesReached(),[eD,e$]=(0,g.useState)(null),eB="loading"===eL.slashCommandLoading.state,{safeSetTimeout:ez}=(0,T.A)(),{onSelectReference:eU,containerRef:eW,shouldClearTextOnSubmit:eV,slashCommandsEnabled:eH}=e,eq=void 0===eV||eV,eG=void 0!==eH&&eH,eQ=(0,g.useRef)(null),eZ=(0,g.useRef)(""),eJ=(0,g.useRef)(!1),eY=(0,I.Z)(),{activeCopilotSpaceId:eX}=(0,h.C)();ek[0]!==e.activeModeName||ek[1]!==e.modes?(t=e.modes.find(t=>t.name===e.activeModeName)||e.modes[0],ek[0]=e.activeModeName,ek[1]=e.modes,ek[2]=t):t=ek[2];let e0=t;ek[3]!==eO||ek[4]!==e.initialReference?(a=()=>{e.initialReference&&eO.addReference(e.initialReference,"page-file-reference")},n=[e.initialReference,eO],ek[3]=eO,ek[4]=e.initialReference,ek[5]=a,ek[6]=n):(a=ek[5],n=ek[6]),(0,g.useEffect)(a,n),ek[7]!==eD||ek[8]!==eL.mode?(o=e=>{eQ.current=null,eZ.current="",eJ.current=!1,eD&&(e$(null),void 0!==e&&e&&(0,p.BI)("dotcom_chat.activate",{target:"CONVERT_TO_FILE_DISMISS",mode:eL.mode}))},ek[7]=eD,ek[8]=eL.mode,ek[9]=o):o=ek[9];let e1=o;ek[10]!==eG?(c={enabled:eG},ek[10]=eG,ek[11]=c):c=ek[11];let{availableCommands:e2,availableCommandKeys:e5}=(0,H.j)(c),e3=eL.isWaitingOnCopilot||eL.isWaitingOnAttachment||eB;ek[12]!==e2||ek[13]!==e1||ek[14]!==e.disableSavedUserMessage||ek[15]!==e.isInPortal||ek[16]!==e.onChatCommandChange||ek[17]!==e.onSubmit||ek[18]!==e.textAreaRef||ek[19]!==eq||ek[20]!==e3?(u={isLoading:e3,onSubmit:e.onSubmit,textAreaRef:e.textAreaRef,clearPastedFile:e1,onChatCommandChange:e.onChatCommandChange,disableSavedUserMessage:e.disableSavedUserMessage,isInPortal:e.isInPortal,shouldClearTextOnSubmit:eq,availableCommands:e2},ek[12]=e2,ek[13]=e1,ek[14]=e.disableSavedUserMessage,ek[15]=e.isInPortal,ek[16]=e.onChatCommandChange,ek[17]=e.onSubmit,ek[18]=e.textAreaRef,ek[19]=eq,ek[20]=e3,ek[21]=u):u=ek[21];let{typingHasStarted:e4,textAreaRef:e7,textareaPreviewRef:e6,textAreaPreviewContainerRef:e8,text:e9,setText:te,isAgentTaskSubmitInProgress:tt,handleSubmit:ta,handleSubmitToNewThread:tn,handleScroll:tr,handleChange:ti,handleStop:ts,handleFocus:tl,command:to,setLastUsedRepo:tc,selectedRepo:td,setSelectedRepo:tu,selectedBranch:tm,setSelectedBranch:th,selectedCustomAgent:tp,setSelectedCustomAgent:tg}=function(e){let t=(0,d.Pk)(),a=(0,D.b)(),n=(0,I.Z)(),{selectedThreadID:r,mode:i,autoSubmit:s,model:o}=t,{clearPastedFile:c,isLoading:u,onSubmit:m,onChatCommandChange:h,disableSavedUserMessage:f,isInPortal:y,shouldClearTextOnSubmit:x=!0,availableCommands:_=[]}=e,C=G.Jt.getSavedMessage(r),j=G.Jt.getSavedUserMessageOnError(r),{pathname:b}=(0,v.zy)(),[S,w]=(0,v.ok)(),[N,E]=(0,g.useState)(()=>{let e=ee(t.mode,b,S);return f?e??"":e??j??C??""}),[A,R]=(0,g.useState)(!1),[k,L]=(0,g.useState)(null),[P,M]=(0,g.useState)(!1),O=(0,g.useRef)(null),F=e.textAreaRef||O,$=(0,g.useRef)(null),B=(0,g.useRef)(null),z=(0,g.useRef)(0),U=(0,g.useRef)(null),W=(0,g.useRef)(()=>{}),V=(0,g.useRef)(!1),H=(0,J.GF)(t.availableModels),Q=(0,g.useRef)(r),{safeSetTimeout:ea}=(0,T.A)(),en=(0,g.useRef)(0),[er,ei]=(0,X.T)(),[es,el]=(0,g.useState)(()=>{let e=t.currentReferences.find(e=>"repository"===e.type);return e?et(e):er?et(er):void 0}),eo=(0,g.useCallback)(e=>{el(e),(async()=>{if(e){let t=await a.service.fetchRepo(e.id);t.ok&&t.payload&&ei(t.payload)}})()},[a.service,ei]),[ec,ed]=(0,g.useState)(()=>es?.defaultBranch),[eu,em]=(0,g.useState)(void 0),eh=(0,g.useCallback)(async()=>{t.renderAttachKnowledgeBaseHerePopover&&await a.fetchKnowledgeBases()},[a,t.renderAttachKnowledgeBaseHerePopover]);(0,g.useEffect)(()=>{eh()},[eh]),(0,g.useEffect)(()=>{l.W.stableConversationView?r===Q.current?G.Jt.setSavedMessage(r,N):(E(G.Jt.getSavedMessage(r)||""),Q.current=r):G.Jt.setSavedMessage(r,N)},[r,N]),(0,q.N)(()=>{let e=0;!function t(){if(!F.current||!B.current||!$.current)return;if(e++,(y||"assistive"===i)&&0===F.current.scrollHeight&&e<10)return void ea(t,1);if(0===N.length&&56===en.current)return;F.current.style.height="0";let a=Math.max(F.current.scrollHeight,56),n=Math.min(a,300);$.current.style.height=`${a}px`,F.current.style.height=`${a}px`,B.current.style.height=`${n}px`,en.current=n}()},[i,ea,N,F,$,y]);let ep=(0,g.useCallback)(()=>{F?.current&&$?.current&&B?.current&&($.current.scrollTop=F.current.scrollTop,$.current.scrollLeft=F.current.scrollLeft)},[F]),ef=(0,g.useMemo)(()=>t.currentReferences.filter(e=>!("isClientOnly"in e)||!e.isClientOnly),[t.currentReferences]),eg=(0,g.useCallback)(async e=>{if(M(!1),G.Jt.clearSavedUserMessage(r),G.Jt.clearSavedUserMessageOnError(r),t.defaultRecipient&&!N.includes(`@${t.defaultRecipient}`)&&a.clearDefaultRecipient(),e?.preventDefault(),await Z(N,t,a,n,_,"task"===k?{selectedRepo:es,selectedBranch:ec,selectedCustomAgent:eu}:{})){if((0,p.BI)("dotcom_chat.activate",{target:"SLASH_COMMAND_EXECUTED",mode:t.mode,command:N}),"/new"===N.trim()&&G.Jt.setSavedMessageFast(r,null),x)E("");else{let e=N.substring(N.indexOf(" ")+1).trim();R(!0),E(`Creating ${e}...`)}return}if(!u){let e=N;if(!e){let[t,n]=a.tryInferMessage(ef);if(!t||!n)return;e=n}try{E("");let t=[];if("task"===k&&es){let a={type:"task-request",description:e,repoOwner:es.owner,repoName:es.nameOnly,ref:ec||es.defaultBranch,customAgent:eu};t.push(a)}await m?.(e,t.length>0?t:void 0)}catch(t){if(R(!1),t instanceof Y.q)return void E(e);throw t}}},[r,t,N,a,n,_,k,es,ec,eu,u,x,ef,m]),ey=(0,g.useCallback)(()=>a.sendMessageToNewThread(r,N,ef,t.context,H),[a,r,t.context,ef,N,H]);(0,g.useEffect)(()=>{(async()=>{let e=ee(i,b,S),t=new URLSearchParams(S),a=t.get("model"),n=!a||a===o.id;e&&n&&!V.current&&(t.delete("prompt"),t.delete("model"),(0,p.BI)("dotcom_chat.activate",{target:"COPILOT_PROMPT_LOADED_FROM_URL",mode:"immersive"}),w(t,{replace:!0}),s&&(V.current=!0,await Promise.resolve(),await eg()))})()},[b,S,w,i,s,o,eg]);let ex=(0,g.useCallback)(e=>{M(!0),F?.current&&(E(e.target.value),c?.(),z.current=0,ep())},[ep,c,F]),ev=(0,g.useCallback)(async()=>{await a.stopStreaming(),null!=r&&(a.startThreadReload(),await new Promise(e=>{U.current=setTimeout(()=>e(r),6e3)}),W.current=await a.fetchMessages(r,!0,!0))},[a,r]);return(0,g.useEffect)(()=>{W.current&&(W.current(),W.current=()=>{})},[t.messages]),(0,g.useEffect)(()=>()=>{U.current&&(clearTimeout(U.current),U.current=null),a.cancelThreadReload(),W.current=()=>{}},[a]),(0,g.useEffect)(()=>{if(0===_.length&&!l.W.taskWithinChatThread)return;let e=(0,K.V)(N,_.map(e=>e.key));k!==e&&(L(e),h?.(e))},[N,k,h,_]),{typingHasStarted:P,textAreaRef:F,textareaPreviewRef:$,textAreaPreviewContainerRef:B,text:N,setText:E,isAgentTaskSubmitInProgress:A,command:k,setCommand:L,handleSubmit:eg,handleSubmitToNewThread:ey,handleScroll:ep,handleChange:ex,handleStop:ev,handleFocus:e=>{e.currentTarget.selectionStart>0||e.currentTarget.setSelectionRange(e.currentTarget.value.length,e.currentTarget.value.length)},lastUsedRepo:er,setLastUsedRepo:ei,selectedRepo:es,setSelectedRepo:eo,selectedBranch:ec,setSelectedBranch:ed,selectedCustomAgent:eu,setSelectedCustomAgent:em}}(u),t_=e.disabled||tt||eF;ek[22]!==te?(f=()=>({setText:te}),m=[te],ek[22]=te,ek[23]=m,ek[24]=f):(m=ek[23],f=ek[24]),(0,g.useImperativeHandle)(e.chatInputRef,f,m),ek[25]!==ti||ek[26]!==e7?(x={inputRef:e7,fallbackEventHandler:ti},ek[25]=ti,ek[26]=e7,ek[27]=x):x=ek[27];let tb=(0,E.H)(x);ek[28]!==tb||ek[29]!==e.figmaAuthUrl||ek[30]!==e7?(_={figmaAuthUrl:e.figmaAuthUrl,textAreaRef:e7,emitChange:tb},ek[28]=tb,ek[29]=e.figmaAuthUrl,ek[30]=e7,ek[31]=_):_=ek[31];let{replaceUrlWithReferenceMention:tS}=function(e){let t,a,n,r,l,o,c,u,m,h,p,f,g=(0,i.c)(35),{figmaAuthUrl:y,textAreaRef:x,emitChange:v}=e,_=(0,D.b)(),{currentReferences:C}=(0,d.Pk)();g[0]!==v||g[1]!==x?(t=(e,t,a)=>{if(!x.current||e===t)return;let n=a?.[0]??0,r=x.current.value.slice(n,a?.[1]),i=r.indexOf(e);for(;i>-1;){let a=i+e.length;v(t,[i+n,a+n]),i=(r=r.replace(e,t)).indexOf(e)}},g[0]=v,g[1]=x,g[2]=t):t=g[2];let j=t;g[3]!==_?(a=e=>{let{itemUrl:t}=e,a=(0,s.Vc)(t);return _.addReference(a,"url-attacher"),_.dispatch({type:"WAITING_ON_ATTACHMENT",loading:!0,attachmentType:"url-reference"}),a},g[3]=_,g[4]=a):a=g[4],g[5]!==j||g[6]!==_?(n=(e,t,a)=>{let{parsedReferenceMention:n}=t;_.replaceReference(a,e);let r=$.Q.for(e);if(!r)return;let i=$.Q.stringify(n),s=$.Q.stringify(r);i!==s&&j(i,s)},r=(e,t,a)=>{let{itemUrl:n,parsedReferenceMention:r}=t;_.removeReference(a),j($.Q.stringify(r),n)},g[5]=j,g[6]=_,g[7]=n,g[8]=r):(n=g[7],r=g[8]),g[9]!==_?(l=()=>{_.dispatch({type:"WAITING_ON_ATTACHMENT",loading:!1})},g[9]=_,g[10]=l):l=g[10],g[11]!==a||g[12]!==n||g[13]!==r||g[14]!==l?(o={mutationFn:V,onMutate:a,onSuccess:n,onError:r,onSettled:l},g[11]=a,g[12]=n,g[13]=r,g[14]=l,g[15]=o):o=g[15];let b=(0,P.n)(o);g[16]!==_?(c=e=>{let t=(0,s.Vc)(e);return _.addReference(t,"figma-attacher"),_.dispatch({type:"WAITING_ON_ATTACHMENT",loading:!0,attachmentType:"url-reference"}),t},u=(e,t,a)=>{_.replaceReference(a,e)},g[16]=_,g[17]=c,g[18]=u):(c=g[17],u=g[18]),g[19]!==y||g[20]!==_?(m=(e,t,a)=>{a&&y&&e instanceof U?_.replaceReference(a,{type:"figma",title:"Sign in to Figma",id:`forbidden-${t}`,url:y,thumbnailUrl:"",fullImageUrl:"",authenticationRequired:!0}):_.removeReference(a)},g[19]=y,g[20]=_,g[21]=m):m=g[21],g[22]!==_?(h=()=>{_.dispatch({type:"WAITING_ON_ATTACHMENT",loading:!1})},g[22]=_,g[23]=h):h=g[23],g[24]!==h||g[25]!==c||g[26]!==u||g[27]!==m?(p={mutationFn:W,onMutate:c,onSuccess:u,onError:m,onSettled:h},g[24]=h,g[25]=c,g[26]=u,g[27]=m,g[28]=p):p=g[28];let S=(0,P.n)(p);return g[29]!==C||g[30]!==S||g[31]!==j||g[32]!==b||g[33]!==x?(f={replaceUrlWithReferenceMention:e=>{let t=x.current?.value.slice(...e)??"";if(/\s/.test(t))return t;let a=$.Q.fromUrl(t);a&&(C.every(e=>!$.Q.refersTo(a,e))&&b.mutate({itemUrl:t,parsedReferenceMention:a}),j(t,$.Q.stringify(a),e));let n=z.exec(t);return n&&(S.mutate(t),j(t,n[1],e)),t}},g[29]=C,g[30]=S,g[31]=j,g[32]=b,g[33]=x,g[34]=f):f=g[34],f}(_),{isLoading:tN,addReferenceForMention:tI,addReferencesForMentions:tT}=function(){let e=(0,D.b)(),{currentReferences:t,mode:a}=(0,d.Pk)(),n=(0,P.n)({mutationFn:async e=>{let t="repository"===e.type?[e.repo]:[e.repo,(e=>{switch(e){case"issue":return"issue";case"pull-request":return"pull_request";case"discussion":return"discussion";case"thread-scoped-file":case"file":return"file"}})(e.type),e.id??""],n=await (0,M.lS)(`/copilot/chat/reference/${t.join("/")}`);if(!n.ok)throw Error(`Failed to fetch reference data (${n.status}: ${n.statusText})`);return(0,p.BI)("dotcom_chat.activate",{target:"REFERENCE_LINK_PASTE",mode:a,linkType:e.type}),await n.json()},onSuccess:t=>e.addReference(t,"chatInput")}),r=e=>{t.every(t=>!$.Q.refersTo(e,t))&&n.mutate(e)};return{isLoading:n.isPending,addReferenceForMention:r,addReferencesForMentions:e=>{let a=(0,O.l)().use(B.U,{references:t,agents:[],commands:[]}).parse(e),n=0;(0,F.YR)(a,e=>{"reference-mention"===e.type&&void 0===e.data.mentionedReferenceId&&n<20&&(n++,r(e.data.referenceMention))})}}}(),tR=(0,es.FQ)(),tk=eX&&tR,tL=!!(eX&&tR);ek[32]!==to||ek[33]!==e9?(C=(0,K.x)(e9,to),ek[32]=to,ek[33]=e9,ek[34]=C):C=ek[34];let tP=C,tM=eB||tN||eL.isWaitingOnAttachment||!!e.submitDisabled||"task"===to&&!td&&!tm||tt||tP,tO=0===e9.length;ek[35]!==ts||ek[36]!==eL.mode?(j=()=>{(0,p.BI)("dotcom_chat.activate",{target:"CHAT_MESSAGE_STOP",mode:eL.mode}),ts()},ek[35]=ts,ek[36]=eL.mode,ek[37]=j):j=ek[37];let tF=j;ek[38]!==eX||ek[39]!==e1||ek[40]!==ta||ek[41]!==tR||ek[42]!==eO||ek[43]!==eD||ek[44]!==tL||ek[45]!==eL.mode||ek[46]!==eL.selectedThreadID||ek[47]!==tM?(b=async()=>{if(tM)return;let e=eX?`${eX.owner}/${eX.id}`:"";(0,p.BI)("dotcom_chat.activate",{target:"CHAT_MESSAGE_SUBMIT",mode:eL.mode,selectedThreadId:eL.selectedThreadID,copilotSpace:e,fromSpaceUI:tR}),tL&&await eO.selectPendingThread(eX),eD&&e1(!1),ta()},ek[38]=eX,ek[39]=e1,ek[40]=ta,ek[41]=tR,ek[42]=eO,ek[43]=eD,ek[44]=tL,ek[45]=eL.mode,ek[46]=eL.selectedThreadID,ek[47]=tM,ek[48]=b):b=ek[48];let tD=b;ek[49]!==eX||ek[50]!==tn||ek[51]!==eO||ek[52]!==tL||ek[53]!==tM?(S=async()=>{tM||(tL&&await eO.selectPendingThread(eX),tn())},ek[49]=eX,ek[50]=tn,ek[51]=eO,ek[52]=tL,ek[53]=tM,ek[54]=S):S=ek[54];let t$=S;ek[55]!==eO||ek[56]!==eL.messages?(A=()=>{let e=eL.messages.findLast(aj)?.id;e&&eO.startEditingMessage(e)},ek[55]=eO,ek[56]=eL.messages,ek[57]=A):A=ek[57];let tB=A;e:{if(eL.isWaitingOnCopilot){R="Copilot is responding\u2026";break e}if(eL.defaultRecipient){R=void 0;break e}if(eF){R="Message limit reached. To continue chatting with Copilot, start a new conversation.";break e}R=e0.placeholder??"Ask anything"}let tz=R;eL.defaultRecipient&&""===e9&&!e4&&te(`@${eL.defaultRecipient} `);let tU=(0,g.useRef)(null),[tW,tH]=(0,g.useState)(null),[tq,tK]=(0,g.useState)(null);ek[58]!==tH||ek[59]!==eL.mode?(k=()=>{(0,p.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU",mode:eL.mode}),tH(ab)},ek[58]=tH,ek[59]=eL.mode,ek[60]=k):k=ek[60];let tG=k;ek[61]!==eO||ek[62]!==eL.mode||ek[63]!==eL.skillOptions?.deepCodeSearch?(L=()=>{(0,p.BI)("dotcom_chat.activate",{target:"DEEP_CODESEARCH",mode:eL.mode}),eO.dispatch({type:"SET_DEEP_CODESEARCH",deepCodeSearch:!eL.skillOptions?.deepCodeSearch})},ek[61]=eO,ek[62]=eL.mode,ek[63]=eL.skillOptions?.deepCodeSearch,ek[64]=L):L=ek[64],eL.skillOptions?.deepCodeSearch;let tQ=L,tZ="immersive"===eL.mode&&!!eP.capabilities?.supports?.vision;ek[65]!==eX||ek[66]!==eM||ek[67]!==eO||ek[68]!==eP||ek[69]!==tL||ek[70]!==e.existingFileNames||ek[71]!==tZ?(Q=async(t,a,n,r)=>{let i=new en.s(eM(),eO),s=new ei.E(eO,e.existingFileNames),l=[];[...t].some(aS)&&!eP.capabilities?.supports?.vision&&(eO.addAmbientError(`The ${eP.displayName} model doesn't support answering questions about images. Select a different model and try again.`),(0,er.d)("vision_not_supported_for_model",{modelId:eP.id,uploadType:a}));let[o,c]=en.s.getAllowedFiles([...t],eP);if(tZ){let e=await i.addImageAttachments(o,a,eX,tL);e&&l.push(...e)}let d=[];for(let e of c)if(await ei.E.isAttachable(e)){let t=await s.addAttachment(e,n,r);t&&l.push(t)}else d.push(e.type);return tZ&&d.length>0&&(0,er.d)("included_unsupported_file",{fileTypes:d.join(","),uploadType:a}),l},ek[65]=eX,ek[66]=eM,ek[67]=eO,ek[68]=eP,ek[69]=tL,ek[70]=e.existingFileNames,ek[71]=tZ,ek[72]=Q):Q=ek[72];let tJ=Q;ek[73]!==e1||ek[74]!==tJ||ek[75]!==eD||ek[76]!==te||ek[77]!==eL.mode||ek[78]!==e9?(eo=async()=>{if(!eD)return;let e=[eD],t=await tJ(e,"paste",eQ.current||void 0,eZ.current);if(t.length>0&&t[0]?.type==="thread-scoped-file"){let e=await eD.text();te(e9.replaceAll(e,`@${t[0].name}`)),e1(!1),(0,p.BI)("dotcom_chat.activate",{target:"CONVERT_TO_FILE_CONVERT",mode:eL.mode})}},ek[73]=e1,ek[74]=tJ,ek[75]=eD,ek[76]=te,ek[77]=eL.mode,ek[78]=e9,ek[79]=eo):eo=ek[79];let tY=eo;ek[80]!==e1?(ec=()=>{e1(!0)},ek[80]=e1,ek[81]=ec):ec=ek[81];let t0=ec;ek[82]!==eD||ek[83]!==eL.isWaitingOnAttachment||ek[84]!==eL.mode?(ed=()=>{!eD||eL.isWaitingOnAttachment||eJ.current||(eJ.current=!0,(0,p.BI)("dotcom_chat.activate",{target:"CONVERT_TO_FILE_TRIGGER",mode:eL.mode}))},eu=[eD,eL.isWaitingOnAttachment,eL.mode],ek[82]=eD,ek[83]=eL.isWaitingOnAttachment,ek[84]=eL.mode,ek[85]=ed,ek[86]=eu):(ed=ek[85],eu=ek[86]),(0,g.useEffect)(ed,eu);let t1=(e0.supportsReferenceAttachments??!0)&&"task"!==to;ek[87]!==tT||ek[88]!==tJ||ek[89]!==eO||ek[90]!==e.existingFileNames||ek[91]!==tS||ek[92]!==ez||ek[93]!==t1||ek[94]!==e7?(em=t=>{let a=t.clipboardData;if(a?.items){let n=[];for(let t=0;t<a.items.length;t++){let r=a.items[t];if(r){if("file"===r.kind){let e=r.getAsFile();e&&n.push(e)}else if("string"===r.kind&&["text","text/plain"].includes(r.type)){let t=a.getData(r.type);if(t.length>1e3&&t.length<=ei.E.getAttachmentSizeLimit())ez(()=>{eJ.current=!1;let a=new File([t],"",{type:ei.x}),n=new ei.E(eO,e.existingFileNames);e$(a),eQ.current=n.generateFileName(t,a.type).then(e=>eZ.current=e)},1);else if(t1){tT(t);let e=e7.current?.selectionStart??0;setTimeout(()=>tS([e,e+t.length]))}return}}}n.length>0&&(t.preventDefault(),tJ(n,"paste"))}},ek[87]=tT,ek[88]=tJ,ek[89]=eO,ek[90]=e.existingFileNames,ek[91]=tS,ek[92]=ez,ek[93]=t1,ek[94]=e7,ek[95]=em):em=ek[95];let t2=em;ek[96]!==tJ?(eh=e=>{tJ(e,"drag")},ek[96]=tJ,ek[97]=eh):eh=ek[97];let t5=eh;ek[98]!==tc||ek[99]!==tu?(ep=e=>{e&&(tu(et(e)),tc(e)),tK(e)},ek[98]=tc,ek[99]=tu,ek[100]=ep):ep=ek[100];let t4=ep;ek[101]!==e2||ek[102]!==eY?(ef=e=>{let t=e2.find(t=>t.key===e);return t?.enabled?.()===!1&&!!t.disabledAction&&(t.disabledAction(eY),!0)},ek[101]=e2,ek[102]=eY,ek[103]=ef):ef=ek[103];let t7=ef,t6=e.isStreaming||eL.isWaitingOnCopilot,t8=!!e0.supportsAttachments&&"task"!==to,t9=N.tL,ae=t6?tF:void 0,at=tO?tB:void 0;ek[104]!==tG||ek[105]!==tD||ek[106]!==t$||ek[107]!==tQ||ek[108]!==ae||ek[109]!==at?(eg={"github:cancel":ae,"copilot-chat:send-message":tD,"copilot-chat:send-message-new-conversation":t$,"copilot-chat:add-attachment":tG,"copilot-chat:edit-last-message":at,"copilot-chat:deep-codesearch":tQ},ek[104]=tG,ek[105]=tD,ek[106]=t$,ek[107]=tQ,ek[108]=ae,ek[109]=at,ek[110]=eg):eg=ek[110];let aa=eg,an=(0,y.$)(ty,{[tC]:"small"===e.size,[tv]:t_},e.className);ek[111]===Symbol.for("react.memo_cache_sentinel")?(ey=(0,w.G)("copilot-chat-input-form"),ek[111]=ey):ey=ek[111],ek[112]!==tY||ek[113]!==t0||ek[114]!==tN||ek[115]!==eU||ek[116]!==eD||ek[117]!==e.getReferenceVersion||ek[118]!==e.initialReference||ek[119]!==e.onRemoveReference||ek[120]!==e.size||ek[121]!==eL.isWaitingOnAttachment||ek[122]!==t1?(ex=t1&&(0,r.jsx)(tX,{className:tw,returnFocusRef:tU,tokenSize:"small"===e.size?"small":"medium",isLoading:tN,onSelectReference:eU,onRemoveReference:e.onRemoveReference,getReferenceVersion:e.getReferenceVersion,showConvertToFileText:!!eD&&!eL.isWaitingOnAttachment,onConvertToFile:tY,onConvertToFileDismiss:t0,hideAttachmentsMenu:!!e.initialReference}),ek[112]=tY,ek[113]=t0,ek[114]=tN,ek[115]=eU,ek[116]=eD,ek[117]=e.getReferenceVersion,ek[118]=e.initialReference,ek[119]=e.onRemoveReference,ek[120]=e.size,ek[121]=eL.isWaitingOnAttachment,ek[122]=t1,ek[123]=ex):ex=ek[123];let ar=N.tL;ek[124]!==e.isNewConversation?(ev=(0,y.$)(tj,{[tE]:e.isNewConversation}),ek[124]=e.isNewConversation,ek[125]=ev):ev=ek[125];let ai=!e0.supportsAutocompletion,as=!e.disableAutoFocus,al=ea.wg,ao=(0,y.$)(tx,{[tA]:t_}),ac=e0.textAreaAriaLabel||tz;ek[126]===Symbol.for("react.memo_cache_sentinel")?(e_=(0,w.G)("copilot-chat-input-textarea"),ek[126]=e_):e_=ek[126],ek[127]!==t_||ek[128]!==ti||ek[129]!==tl||ek[130]!==t2||ek[131]!==tr||ek[132]!==tz||ek[133]!==as||ek[134]!==al||ek[135]!==ao||ek[136]!==ac||ek[137]!==e9||ek[138]!==e7?(eC=(0,r.jsx)("textarea",{autoFocus:as,id:al,className:ao,autoComplete:"off",autoCorrect:"off",spellCheck:"false","aria-label":ac,"aria-multiline":"true",onPaste:t2,ref:e7,onScroll:tr,onChange:ti,onFocus:tl,placeholder:tz,value:e9,"data-react-autofocus":!0,disabled:t_,...e_}),ek[127]=t_,ek[128]=ti,ek[129]=tl,ek[130]=t2,ek[131]=tr,ek[132]=tz,ek[133]=as,ek[134]=al,ek[135]=ao,ek[136]=ac,ek[137]=e9,ek[138]=e7,ek[139]=eC):eC=ek[139],ek[140]!==tf||ek[141]!==tI||ek[142]!==e2||ek[143]!==t7||ek[144]!==tH||ek[145]!==ai||ek[146]!==eC?(ej=(0,r.jsx)(tf,{onSelectReference:tI,onShowAgentsDialog:tH,onSelectCommand:t7,hideAutocomplete:ai,availableCommands:e2,children:eC}),ek[140]=tf,ek[141]=tI,ek[142]=e2,ek[143]=t7,ek[144]=tH,ek[145]=ai,ek[146]=eC,ek[147]=ej):ej=ek[147],ek[148]!==e5||ek[149]!==e9||ek[150]!==e6?(eb=(0,r.jsx)(tV,{text:e9,ref:e6,availableCommandKeys:e5}),ek[148]=e5,ek[149]=e9,ek[150]=e6,ek[151]=eb):eb=ek[151],ek[152]!==ar.LimitKeybindingScope||ek[153]!==ay||ek[154]!==ev||ek[155]!==ej||ek[156]!==eb||ek[157]!==e8?(eS=(0,r.jsxs)(ar.LimitKeybindingScope,{commandIds:ay,className:ev,ref:e8,children:[ej,eb]}),ek[152]=ar.LimitKeybindingScope,ek[153]=ay,ek[154]=ev,ek[155]=ej,ek[156]=eb,ek[157]=e8,ek[158]=eS):eS=ek[158];let ad=eL.skillOptions?.deepCodeSearch;return ek[159]!==to||ek[160]!==e.extraToolbar||ek[161]!==tm||ek[162]!==tp||ek[163]!==td||ek[164]!==th||ek[165]!==tg||ek[166]!==tu?(ew="task"===to?(0,r.jsx)(ap,{selectedRepo:td,selectedBranch:tm,selectedCustomAgent:tp,onRepoSelect:tu,onBranchSelect:th,onCustomAgentSelect:tg,agentSelectionEnabled:l.W.sweAgentUseSubagents}):e.extraToolbar,ek[159]=to,ek[160]=e.extraToolbar,ek[161]=tm,ek[162]=tp,ek[163]=td,ek[164]=th,ek[165]=tg,ek[166]=tu,ek[167]=ew):ew=ek[167],ek[168]!==tG||ek[169]!==to||ek[170]!==e0||ek[171]!==t_||ek[172]!==tt||ek[173]!==tk||ek[174]!==tP||ek[175]!==e.modes||ek[176]!==e.onNewThreadSelected||ek[177]!==e.showPlanningToggle||ek[178]!==eL.thirdPartyMcpAllowed||ek[179]!==t6||ek[180]!==tM||ek[181]!==t8||ek[182]!==ad||ek[183]!==ew?(eN=(0,r.jsx)(av,{addAttachment:tG,currentMode:e0,attachmentButtonRef:tU,deepCodeSearch:ad,modes:e.modes,stoppable:t6,submitDisabled:tM,onNewThreadSelected:e.onNewThreadSelected,thirdPartyMcpAllowed:eL.thirdPartyMcpAllowed,supportsAttachments:t8,disabled:t_,extraToolbar:ew,showPlanningToggle:e.showPlanningToggle,chatCommand:to,isCopilotSpace:tk,isAgentTaskSubmitInProgress:tt,isIncompleteCommand:tP}),ek[168]=tG,ek[169]=to,ek[170]=e0,ek[171]=t_,ek[172]=tt,ek[173]=tk,ek[174]=tP,ek[175]=e.modes,ek[176]=e.onNewThreadSelected,ek[177]=e.showPlanningToggle,ek[178]=eL.thirdPartyMcpAllowed,ek[179]=t6,ek[180]=tM,ek[181]=t8,ek[182]=ad,ek[183]=ew,ek[184]=eN):eN=ek[184],ek[185]!==eW||ek[186]!==an||ek[187]!==ey||ek[188]!==ex||ek[189]!==eS||ek[190]!==eN?(eI=(0,r.jsxs)("form",{className:an,ref:eW,...ey,children:[ex,eS,eN]}),ek[185]=eW,ek[186]=an,ek[187]=ey,ek[188]=ex,ek[189]=eS,ek[190]=eN,ek[191]=eI):eI=ek[191],ek[192]!==t9||ek[193]!==aa||ek[194]!==eI?(eE=(0,r.jsx)(t9,{commands:aa,children:eI}),ek[192]=t9,ek[193]=aa,ek[194]=eI,ek[195]=eE):eE=ek[195],ek[196]!==tW||ek[197]!==ti||ek[198]!==tq||ek[199]!==t4||ek[200]!==tH||ek[201]!==e7?(eA=(0,r.jsx)(eK,{inputRef:e7,inputOnChange:ti,anchorRef:tU,panel:tW,onPanelChange:tH,initialRepo:tq,onRepoSelect:t4}),ek[196]=tW,ek[197]=ti,ek[198]=tq,ek[199]=t4,ek[200]=tH,ek[201]=e7,ek[202]=eA):eA=ek[202],ek[203]!==t5||ek[204]!==tk||ek[205]!==eL.attachmentProcessingType||ek[206]!==eL.isWaitingOnAttachment||ek[207]!==t8?(eT=t8&&!tk&&(0,r.jsx)(t3.A,{onFilesDrop:t5,isUploading:eL.isWaitingOnAttachment&&"file-upload"===eL.attachmentProcessingType}),ek[203]=t5,ek[204]=tk,ek[205]=eL.attachmentProcessingType,ek[206]=eL.isWaitingOnAttachment,ek[207]=t8,ek[208]=eT):eT=ek[208],ek[209]!==eE||ek[210]!==eA||ek[211]!==eT?(eR=(0,r.jsxs)(r.Fragment,{children:[eE,eA,eT]}),ek[209]=eE,ek[210]=eA,ek[211]=eT,ek[212]=eR):eR=ek[212],eR},av=(0,g.memo)(e=>{let{chatCommand:t,extraToolbar:a,currentMode:n,supportsAttachments:i,submitDisabled:s,isCopilotSpace:o,isAgentTaskSubmitInProgress:c=!1,isIncompleteCommand:d}=e,u="task"!==t&&"loop"!==t&&"spark"!==t,m=!!(e.onNewThreadSelected&&n.supportsModelSwitching&&u);return(0,r.jsxs)("div",{className:(0,y.$)(t_,{[tT]:1===e.modes.length}),children:[e.modes.length>1&&(0,r.jsxs)("div",{className:tL,children:[(0,r.jsx)("div",{className:tO,children:(0,r.jsxs)(_.W,{children:[(0,r.jsx)(_.W.Button,{className:tM,leadingVisual:n.icon,variant:"invisible",trailingAction:A.TriangleDownIcon,children:n.name}),(0,r.jsx)(_.W.Overlay,{width:"auto",children:(0,r.jsx)(b.l,{selectionVariant:"single",role:"menu","aria-label":"Item",children:e.modes.map(t=>(0,r.jsxs)(b.l.Item,{selected:n.name===t.name,onSelect:()=>{e.onClickMode?.(t.name)},children:[(0,r.jsx)(b.l.LeadingVisual,{children:t.icon}),t.name]},t.name))})})]})}),(0,r.jsx)("div",{className:tF,children:(0,r.jsx)(R.I,{className:tz,"aria-label":"Mode switcher",onChange:t=>{e.modes[t]&&e.onClickMode?.(e.modes[t].name)},children:e.modes.map(e=>(0,r.jsx)(R.I.Button,{className:tP,selected:e.name===n.name,children:e.name},e.name))})})]}),(0,r.jsxs)("div",{className:tR,children:[i&&(0,r.jsx)(k.Q,{ref:e.attachmentButtonRef,leadingVisual:A.PlusIcon,variant:"invisible","aria-label":o?"Add files":"Add repositories, files, and spaces",className:tN,onClick:e.addAttachment,"data-testid":"attachment-menu-button",children:(0,r.jsx)("span",{className:(0,y.$)(tI,{"sr-only":"task"===t}),children:o?"Add files":"Add repositories, files, and spaces"})}),l.W.showDeepCodeSearchButton&&(0,r.jsx)(N.N5,{commandId:"copilot-chat:deep-codesearch",icon:A.RocketIcon,variant:"invisible",tooltipDirection:"s",className:(0,y.$)({[tS]:e.deepCodeSearch})}),a,!l.W.spacesAsAttachmentsEnabled&&n.supportsSpaces&&(0,r.jsx)(S,{}),l.W.planningAgent&&!l.W.chatInputCommands&&e.showPlanningToggle&&(0,r.jsx)(ai,{})]}),(0,r.jsxs)("div",{className:(0,y.$)(tD,{[t$]:m}),children:[m&&(0,r.jsx)(an.Yb,{onNewThreadSelected:e.onNewThreadSelected,disabled:e.disabled}),(0,r.jsxs)("div",{className:tB,children:[l.W.copilotThirdPartyMcp&&n.supportsMCP&&e.thirdPartyMcpAllowed&&u&&(0,r.jsx)(aa,{}),e.stoppable?(0,r.jsx)(aC,{}):(0,r.jsx)(a_,{disabled:s,label:n.submitLabel,isAgentTaskSubmitInProgress:c,isIncompleteCommand:d})]})]})]})});function a_(e){let t,a,n=(0,i.c)(8),{disabled:s,label:l,isAgentTaskSubmitInProgress:o,isIncompleteCommand:c}=e,d=void 0!==o&&o;n[0]!==s||n[1]!==c||n[2]!==l?(t=()=>s?c?"Complete your slash command before sending":l||"Sending a message is unavailable":l||"Send now",n[0]=s,n[1]=c,n[2]=l,n[3]=t):t=n[3];let u=t;return n[4]!==s||n[5]!==u||n[6]!==d?(a=d?(0,r.jsx)("div",{className:"d-flex flex-items-center height-full mx-2",children:(0,r.jsx)(j.A,{size:"small"})}):s?(0,r.jsx)(L.K,{variant:"invisible",size:"medium",icon:A.PaperAirplaneIcon,"aria-label":u(),inactive:!0,"aria-disabled":!0}):(0,r.jsx)(N.N5,{commandId:"copilot-chat:send-message",variant:"invisible",size:"medium",icon:A.PaperAirplaneIcon,"aria-label":u()}),n[4]=s,n[5]=u,n[6]=d,n[7]=a):a=n[7],a}function aC(){let e,t=(0,i.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)(N.N5,{...(0,w.G)("copilot-chat-stop-button"),commandId:"github:cancel",variant:"invisible",size:"medium",icon:A.SquareFillIcon,tooltipDirection:"s",className:tk}),t[0]=e):e=t[0],e}av.displayName="ChatInputToolbar";try{ax.displayName||(ax.displayName="ChatInput")}catch{}try{a_.displayName||(a_.displayName="SubmitButton")}catch{}try{aC.displayName||(aC.displayName="StopButton")}catch{}function aj(e){return"user"===e.role}function ab(e){return"attachment-types"===e?null:"attachment-types"}function aS(e){return e.type.startsWith("image/")}},54114:(e,t,a)=>{a.d(t,{Rw:()=>T});var n=a(74848),r=a(6665),i=a(19189),s=a(25556),l=a(34535),o=a(96459),c=a(38621),d=a(40480),u=a(46720),m=a(69726),h=a(35811),p=a(10095),f=a(96540),g=a(96379),y=a(52870);function x(e,t,a){let n=[];for(let r of t)if(r.startsWith(e)){let t=r.slice(e.length+1),i=t.indexOf("/"),s=i>0?t.slice(0,i):t,l=`${e}/${s}`;if(a&&a.some(e=>e.path===l))continue;let o={items:[],data:{contentType:l===r?"file":"directory",name:s,path:l,isClientOnly:!0}};n.push(o)}return n}let v="FileTreePicker-module__checkbox--uY6AK",_="FileTreePicker-module__itemContainer--ShYuv";var C=a(53419);function j(e,t){let a=new Set(e);switch(t.type){case"SINGLE_SELECT_FILE":a.clear(),a.add(t.path),(0,C.BI)("copilot-spaces.click",{target:"FILE_PICKER",action:"SINGLE_SELECT_FILE",newFileCount:a.size});break;case"SELECT_FILE":a.add(t.path),(0,C.BI)("copilot-spaces.click",{target:"FILE_PICKER",action:"SELECT_FILE",newFileCount:a.size});break;case"DESELECT_FILE":a.delete(t.path),(0,C.BI)("copilot-spaces.click",{target:"FILE_PICKER",action:"DESELECT_FILE",newFileCount:a.size});break;case"SELECT_DIRECTORY":for(let e of t.paths)a.add(e);(0,C.BI)("copilot-spaces.click",{target:"FILE_PICKER",action:"SELECT_DIRECTORY",newFileCount:a.size,directoryCount:t.paths.length});break;case"DESELECT_DIRECTORY":for(let e of t.paths)a.delete(e);(0,C.BI)("copilot-spaces.click",{target:"FILE_PICKER",action:"DESELECT_DIRECTORY",newFileCount:a.size,directoryCount:t.paths.length})}return a}function b({isActive:e,file:t,onItemSelected:a,getItemUrl:i,selectedItemRef:o,navigate:m,onRenderRow:h,getFileTrailingVisual:p,getFileIcon:g,navigateOnClick:y,isSelected:x,singleSelect:C}){let{sendRepoClickEvent:j}=(0,r.T)(),b=f.useRef(null),S=(0,l.Z)({focusRowRef:b,mouseRowRef:b}),w="submodule"===t.data.contentType,N=p?.(t.data);(0,f.useEffect)(()=>{e&&b.current&&requestAnimationFrame(()=>{b.current?.scrollIntoView({block:"center"})})},[e]);let I=f.useCallback(e=>{w?(e.preventDefault(),t.data.submoduleUrl&&(window.location.href=t.data.submoduleUrl)):e.metaKey||e.ctrlKey||1===e.button?(window.open(i?.(t.data),"_blank"),e.preventDefault()):(a?.(t.data,t),j("FILES_TREE.ITEM",{item_path:t.data.path}),y&&m(i?.(t.data)||""),e.stopPropagation())},[t,i,w,m,y,a,j]);return h?.(),(0,n.jsxs)(d.G.Item,{ref:b,onSelect:I,current:e,id:`${t.data.path}-item`,containIntrinsicSize:e?void 0:"auto 2rem",children:[(0,n.jsx)(d.G.LeadingVisual,{children:g?g(t.data):w?(0,n.jsx)(c.FileSubmoduleIcon,{}):(0,n.jsx)(c.FileIcon,{})}),(0,n.jsxs)("div",{className:_,children:[!C&&(0,n.jsx)(u.A,{className:v,checked:x||!1,readOnly:!0,"aria-label":`Select ${t.data.name}`}),(0,n.jsx)("span",{ref:o,style:{color:w?"var(--fgColor-accent, var(--color-accent-fg))":void 0},children:(0,n.jsx)("span",{"data-testid":`${t.data.path}-file-item`,children:t.data.name})})]}),S&&(0,n.jsx)(s.m,{"data-testid":`${t.data.name}-item-tooltip`,id:`${t.data.name}-item-tooltip`,contentRef:b,"aria-label":t.data.name,open:!0,direction:"ne"}),!!N?.screenReaderText&&(0,n.jsx)("span",{className:"sr-only",children:N.screenReaderText}),!!N?.trailingVisual&&(0,n.jsx)(d.G.TrailingVisual,{children:N.trailingVisual})]})}let S=f.memo(b),w=f.memo(u.A);function N({clientOnlyFilePaths:e,directory:t,isActive:a,isAncestorOfActive:i,leadingPath:o,onItemSelected:c,getItemUrl:u,getFetchUrl:m,selectedItemRef:h,navigate:p,onRenderRow:C,getFileTrailingVisual:j,getFileIcon:b,navigateOnClick:S,selectedChildren:N,expandedPath:I,singleSelect:E}){let[T,k]=(0,f.useState)(i),{sendRepoClickEvent:L}=(0,r.T)(),P=f.useRef(null),M=f.useRef(null),O=(0,l.Z)({focusRowRef:M,mouseRowRef:P}),F=f.useMemo(()=>N?N.filter(e=>e===t.data.path||e.startsWith(`${t.data.path}/`)):[],[N,t.data.path]),D=f.useMemo(()=>N?.includes(t.data.path)??!1,[N,t.data.path]),$=t.items.length>1e3,B=f.useMemo(()=>(function(e,t,a){if(a?.selectedSelf&&a?.isLarge)return"all";if(!t||0===t.length)return"none";let n=new Set(t);if(a?.isLarge&&n.has(e.data.path))return"all";let r=e=>{let t=new Set;for(let a of e.items)if("directory"===a.data.contentType)for(let e of r(a))t.add(e);else t.add(a.data.path);return t},i=r(e),s=Array.from(i).filter(e=>n.has(e)).length;return 0===s?"none":s===i.size?"all":"partial"})(t,F,{selectedSelf:D,isLarge:$}),[t,F,D,$]),[z,U,W,V,H,q,K]=function(e,t,a){let[n,r]=f.useState(e.items),[i,s]=f.useState(e.data.totalCount||0),[l,o]=f.useState(!1),[c,d]=f.useState(!1),{safeSetTimeout:u}=(0,y.A)();f.useEffect(()=>{r(e.items)},[e.items]),f.useEffect(()=>{void 0!==e.data.totalCount&&s(e.data.totalCount)},[e.data.totalCount]);let m=f.useCallback(()=>{d(!1)},[]),h=f.useCallback((e,t)=>{let a=e||[...n];r(a.slice(0,100)),u(()=>{r(a),void 0!==t&&s(t)},1)},[n,u]);return[f.useCallback(async n=>{let i=new Map;if(e.data.isClientOnly){if(n){let a=x(e.data.path,n);for(let e of a)i.set(e.data.path,e);t({type:"add",folders:i,processingTime:0}),a.length>100?h(a,a.length):(r(a),s(a.length))}}else{let l=a(e.data);d(!1),o(!0);let c=Date.now(),u=await (0,g.lS)(`${l}?noancestors=1`);try{if(u.ok){let a=await u.json(),l=a.payload.tree.items.map(e=>{let t={items:[],data:{...e},autoExpand:"directory"===e.contentType&&1===a.payload.tree.items.length};return(i.set(e.path,t),e.hasSimplifiedPath)?function e(t,a,n){t.data.name=t.data.name.slice(t.data.name.lastIndexOf("/")+1,t.data.name.length);let r=a.name.slice(0,a.name.lastIndexOf("/")),i=r.indexOf("/")>-1,s={path:a.path.slice(0,a.path.lastIndexOf("/")),contentType:a.contentType,name:r,hasSimplifiedPath:i},l={items:[t],data:s};return(n.set(s.path,l),i)?e(l,{...s},n):l}(t,e,i):t});if(n){let t=e.data.path,r=x(t,n,a.payload.tree.items);for(let e of(l.push(...r),r))i.set(e.data.path,e)}t({type:"add",folders:i,processingTime:Date.now()-c}),e.items=l,e.data.totalCount=a.payload.tree.totalCount,l.length>100?h(l,a.payload.tree.totalCount):(r(l),s(a.payload.tree.totalCount))}else d(!0)}catch{d(!0)}}o(!1)},[a,e,t,h]),h,n,l,c,m,i]}(t,()=>{},m),G=o?`${o}/`:"",Q=K-W.length;(0,f.useEffect)(()=>{a&&P.current&&requestAnimationFrame(()=>{P.current?.scrollIntoView({block:"center"})})},[a]);let Z=f.useCallback(e=>{!e||T||V||H||!(t.items.length>100)||U(),e!==T&&k(e)},[T,V,H,t.items.length,U]),J=f.useCallback(e=>{e.metaKey||e.ctrlKey||1===e.button&&S?(window.open(u?.(t.data),"_blank"),e.preventDefault()):(E?Z(!T):(c?.(t.data,t),L("FILES_TREE.ITEM",{item_path:t.data.path}),S&&p(u?.(t.data)||"")),e.stopPropagation())},[t,u,T,p,S,c,Z,L,E]);f.useEffect(()=>{i&&!T&&Z?.(!0)},[i]),f.useEffect(()=>{0===t.items.length&&T?Z?.(!1):!T&&t.autoExpand&&Z?.(!0)},[t.items.length]);let Y=f.useCallback(e=>{h&&a&&h(e),P.current=e},[h,a]);if(1===t.items.length){let r=t.items[0];if(r&&"directory"===r.data.contentType)return(0,n.jsx)(A,{clientOnlyFilePaths:e,directoryItems:t.items,leadingPath:G+t.data.name,inheritsActive:a,onItemSelected:c,selectedItemRef:h,getItemUrl:u,directoryNavigateOnClick:S,navigateOnClick:S,getFileTrailingVisual:j,getFileIcon:b,selectedChildren:F,expandedPath:I,singleSelect:E})}return C?.(),(0,n.jsxs)(d.G.Item,{ref:M,expanded:T,onExpandedChange:Z,current:a,onSelect:J,id:`${t.data.path}-item`,containIntrinsicSize:a?void 0:"auto 2rem",children:[(0,n.jsx)(d.G.LeadingVisual,{children:(0,n.jsx)(d.G.DirectoryIcon,{})}),(0,n.jsxs)("div",{className:_,children:[!E&&(0,n.jsx)(w,{className:v,checked:"all"===B,indeterminate:"partial"===B,readOnly:!0,"aria-label":`Select ${t.data.name}`,"data-indeterminate":"partial"===B?"true":void 0}),(0,n.jsxs)("span",{ref:Y,children:[G&&(0,n.jsx)("span",{children:G}),(0,n.jsx)("span",{"data-testid":`${t.data.path}-directory-item`,children:t.data.name})]})]}),O&&(0,n.jsx)(s.m,{"data-testid":`${t.data.name}-directory-item-tooltip`,id:`${t.data.name}-directory-item-tooltip`,contentRef:M,"aria-label":`${G}${t.data.name}`,open:!0,direction:"ne"}),(0,n.jsx)(d.G.SubTree,{state:V?"loading":H?"error":"done",children:H?(0,n.jsx)(d.G.ErrorDialog,{onRetry:z,onDismiss:q,children:"There was an error loading the folder contents."}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(A,{clientOnlyFilePaths:e,directoryItems:W,onItemSelected:c,selectedItemRef:h,getItemUrl:u,directoryNavigateOnClick:S,navigateOnClick:S,getFileTrailingVisual:j,getFileIcon:b,selectedChildren:F,expandedPath:I,singleSelect:E}),Q>0&&(0,n.jsx)(R,{message:`${Q} entries not shown`})]})})]})}let I=f.memo(N,(e,t)=>e.isActive===t.isActive&&e.isAncestorOfActive===t.isAncestorOfActive&&e.directory===t.directory&&(e.selectedChildren===t.selectedChildren||0===e.selectedChildren.length&&0===t.selectedChildren.length)&&e.expandedPath===t.expandedPath);function E({clientOnlyFilePaths:e,directoryItems:t,leadingPath:a,inheritsActive:r,onItemSelected:s,selectedItemRef:l,onRenderRow:c,getItemUrl:d,getFileTrailingVisual:u,getFileIcon:m,directoryNavigateOnClick:h,navigateOnClick:p,selectedChildren:g,expandedPath:y,singleSelect:x}){let v=(0,i.Z)(),_=(0,o.Z)(),C=f.useRef(_),j=f.useRef(s);f.useEffect(()=>{j.current=s,C.current=_},[s,_]);let b=f.useCallback((e,t)=>{j.current?.(e,t)},[]),w=f.useMemo(()=>t.map(t=>{let i=y===t.data.path,s=g?.includes(t.data.path),o=i||y.startsWith(`${t.data.path}/`),f=g?.filter(e=>e===t.data.path||e.startsWith(`${t.data.path}/`))||[];return"directory"===t.data.contentType?(0,n.jsx)(I,{clientOnlyFilePaths:e,isActive:r||i,isAncestorOfActive:o,onItemSelected:b,leadingPath:a,directory:t,getItemUrl:d,getFetchUrl:v.getItemUrl,selectedItemRef:o?l:void 0,navigate:_,onRenderRow:c,navigateOnClick:h,getFileTrailingVisual:u,getFileIcon:m,itemCount:t.items.length,isSelected:s,selectedChildren:f,expandedPath:y,singleSelect:x},t.data.name):(0,n.jsx)(S,{onItemSelected:b,file:t,isActive:i,getItemUrl:d,selectedItemRef:i?l:void 0,navigate:_,navigateOnClick:p,onRenderRow:c,getFileTrailingVisual:u,getFileIcon:m,isSelected:s,singleSelect:x},t.data.name)}),[t,y,g,b,d,l,_,p,c,u,m,x,e,r,a,v.getItemUrl,h]);return(0,n.jsx)(n.Fragment,{children:w})}let A=f.memo(E);function T(e){let{clientOnlyFilePaths:t,rootItems:a,fetchError:r,loading:i,onRenderRow:s,getItemUrl:l,getFileTrailingVisual:o,getFileIcon:c,expandedPath:u,onSelectionChange:p}=e,[g,y]=(0,f.useReducer)(j,new Set),x=e.selectedItems||g,v=(0,f.useCallback)(e=>{let t=new Set;if(t.add(e.data.path),"directory"===e.data.contentType)for(let a of e.items)for(let e of v(a))t.add(e);return Array.from(t)},[]),_=(0,f.useCallback)((t,a)=>{var n;let r=(n=!!e.singleSelect,n?{type:"SINGLE_SELECT_FILE",path:t}:a?{type:"DESELECT_FILE",path:t}:{type:"SELECT_FILE",path:t});p?p(j(x,r)):y(r)},[p,e.singleSelect,x]),C=(0,f.useCallback)((t,a)=>{if(e.allowFolderReferences&&t.items.length>1e3){let e=t.data.path,a=x.has(e)?{type:"DESELECT_FILE",path:e}:{type:"SELECT_FILE",path:e};p?p(j(x,a)):y(a);return}let n=v(t),r=a?{type:"DESELECT_DIRECTORY",paths:n}:{type:"SELECT_DIRECTORY",paths:n};p?p(j(x,r)):y(r)},[v,p,x,e.allowFolderReferences]),b=(0,f.useCallback)((t,a)=>{if("directory"===t.contentType){if(e.allowFolderReferences&&a.items.length>1e3)return void C(a,x.has(t.path));let n=v(a),r=n.filter(e=>x.has(e)),i=r.length>0,s=n.length===r.length;i&&!s?C(a,!0):C(a,s)}else _(t.path,x.has(t.path))},[v,C,_,x,e.allowFolderReferences]),S=(0,f.useCallback)(e=>{1===e.button&&e.preventDefault()},[]);return(0,n.jsx)(h.az,{onMouseDown:S,sx:{...e.sx},"data-testid":"repos-file-tree-container",className:"FileTreePicker-module__Box--RKQKr",children:i?(0,n.jsxs)("div",{className:"FileTreePicker-module__Box_1--usRNW",children:[(0,n.jsx)(m.A,{"aria-label":"Loading file tree"}),(0,n.jsx)("span",{className:"fgColor-muted",children:"Fetching files..."})]}):(0,n.jsx)("nav",{"aria-label":"File Tree Navigation",children:(0,n.jsxs)(d.G,{"aria-label":"Files",children:[r&&(0,n.jsx)(R,{message:"Some files could not be loaded."}),(0,n.jsx)(A,{clientOnlyFilePaths:t,directoryItems:a,onItemSelected:b,selectedChildren:x?Array.from(x):[],selectedItemRef:e.selectedItemRef,onRenderRow:s,directoryNavigateOnClick:e.directoryNavigateOnClick,navigateOnClick:e.navigateOnClick,getItemUrl:l,getFileTrailingVisual:o,getFileIcon:c,expandedPath:u,singleSelect:e.singleSelect})]})})})}function R({message:e}){return(0,n.jsxs)(d.G.Item,{id:"error-tree-row",children:[(0,n.jsx)(d.G.LeadingVisual,{children:(0,n.jsx)(p.A,{icon:c.AlertFillIcon,className:"FileTreePicker-module__Octicon--rINlU"})}),(0,n.jsx)("div",{className:"FileTreePicker-module__Box_2--yFodr",children:e||"Couldn't load."})]})}try{b.displayName||(b.displayName="WrappedFileTreeRow")}catch{}try{S.displayName||(S.displayName="FileTreeRow")}catch{}try{w.displayName||(w.displayName="MemoizedCheckbox")}catch{}try{N.displayName||(N.displayName="WrappedDirectoryTreeRow")}catch{}try{I.displayName||(I.displayName="DirectoryTreeRow")}catch{}try{E.displayName||(E.displayName="WrappedDirectoryContents")}catch{}try{A.displayName||(A.displayName="DirectoryContents")}catch{}try{T.displayName||(T.displayName="FileTreePicker")}catch{}try{R.displayName||(R.displayName="ErrorTreeRow")}catch{}},56708:(e,t,a)=>{a.d(t,{q:()=>ChatInputValidationError});let ChatInputValidationError=class ChatInputValidationError extends Error{constructor(e){super(e),this.name="ChatInputValidationError"}}},57224:(e,t,a)=>{a.d(t,{y:()=>s});var n=a(74848),r=a(21728),i=a(49936);function s(e){let t,a,s=(0,r.c)(7),{children:l,appName:o,category:c,metadata:d}=e;s[0]!==o||s[1]!==c||s[2]!==d?(t={appName:o,category:c,metadata:d},s[0]=o,s[1]=c,s[2]=d,s[3]=t):t=s[3];let u=t;return s[4]!==l||s[5]!==u?(a=(0,n.jsx)(i.I.Provider,{value:u,children:l}),s[4]=l,s[5]=u,s[6]=a):a=s[6],a}try{s.displayName||(s.displayName="AnalyticsProvider")}catch{}},57448:(e,t,a)=>{a.d(t,{Ld:()=>f,M8:()=>g,Tz:()=>v,W5:()=>u,cx:()=>p,r_:()=>x,vn:()=>y,xG:()=>m});var n=a(51987),r=a(97665),i=a(40458),s=a(94747),l=a(97286),o=a(96379),c=a(96540),d=a(79064);a(2635),a(33592);let u={Unindexed:"not_indexed",Indexed:"indexed",Indexing:"indexing",PartiallyIndexed:"partially_indexed",Unknown:"unknown"},m={Requested:"requested",NotFound:"not_found",Unauthorized:"unauthorized",ServiceUnavailable:"service_unavailable",QuotaExhausted:"quota_exhausted",Forbidden:"forbidden",CanIndex:"ok",IndexingError:"indexing_error",RequestFailed:"request_failed",Unknown:"unknown"},h=[m.NotFound,m.Unauthorized,m.ServiceUnavailable,m.QuotaExhausted,m.Forbidden,m.RequestFailed],p=256,f=400;function g(e){var t,a;let n=(0,r.jE)(),l=(0,c.useCallback)(()=>Promise.all(e.map(e=>n.invalidateQueries({queryKey:["copilot-chat","repos-indexing-state",e]}))),[n,e]),o=(0,i.E)({queries:e.map(e=>({queryKey:["copilot-chat","repos-indexing-state",e],queryFn:()=>_(e),placeholderData:{requestStatus:m.Unknown,code:u.Unknown,docs:u.Unknown},staleTime:1/0}))}),{mutate:d}=(0,s.n)({mutationKey:["repos-indexing-state"],mutationFn:()=>C(e),onSuccess:l}),p={requestStatus:0===(a=(t=o.map(e=>e.data)).map(e=>e.requestStatus)).length?m.Unknown:a.some(e=>h.includes(e))?m.IndexingError:a.every(e=>e===m.CanIndex)?m.CanIndex:(a.every(e=>e===m.Unknown),m.Unknown),code:b(t.map(e=>e.code)),docs:b(t.map(e=>e.docs)),remainingRepoIndexTokens:t[0]?.remainingRepoIndexTokens};return S(()=>void l(),1e4*(p.code===u.Indexing&&p.requestStatus!==m.IndexingError)),[p,()=>d()]}function y(e){let t=(0,r.jE)(),a=(0,c.useCallback)(()=>Promise.resolve(t.invalidateQueries({queryKey:["repo-indexing-state",e]})),[t,e]),n=(0,l.I)({queryKey:["copilot-chat","repo-indexing-state",e],queryFn:()=>_(e),placeholderData:{requestStatus:m.Unknown,code:u.Unknown,docs:u.Unknown},staleTime:1/0}),{mutate:i}=(0,s.n)({mutationKey:["repo-indexing-state"],mutationFn:()=>C([e]),onSuccess:a}),o=n.data;return S(()=>void a(),1e4*(o.code===u.Indexing&&o.requestStatus!==m.IndexingError)),[o,()=>i()]}function x(e){let t=(0,l.I)({queryKey:["copilot-chat","repos-indexing-state",e],queryFn:()=>j(e),staleTime:1/0});return!t.isError&&!!t.data?.canChat}function v(){let e=d.Jt.getPanelHeight(),t=d.Jt.getPanelWidth(),a=(0,c.useRef)(null),n=(0,c.useRef)(e),r=(0,c.useRef)(e),i=(0,c.useRef)(null),s=(0,c.useRef)(t),l=(0,c.useRef)(t),[o,u]=(0,c.useState)(e),[m,h]=(0,c.useState)(t),g=(0,c.useRef)(0);(0,c.useEffect)(()=>{g.current=parseFloat(getComputedStyle(document.documentElement).fontSize)},[]);let y=e=>Math.min(Math.max(e,p),window.innerHeight-g.current),x=e=>Math.min(Math.max(e,f),window.innerWidth-2*g.current),v=(0,c.useCallback)(e=>{if(null!==a.current){let t=a.current-e.clientY,i=y(n.current+t);u(i),r.current=i}if(null!==i.current){let t=i.current-e.clientX,a=x(s.current+t);h(a),l.current=a}},[]),_=(0,c.useCallback)(()=>{window.removeEventListener("mousemove",v),window.removeEventListener("mouseup",_),null!==a.current&&(d.Jt.setPanelHeight(r.current),a.current=null),null!==i.current&&(d.Jt.setPanelWidth(l.current),i.current=null)},[v]),C=(0,c.useCallback)((e,t,r)=>{0===e.button&&(e.preventDefault(),r&&(a.current=e.clientY,n.current=o),t&&(i.current=e.clientX,s.current=m),window.addEventListener("mousemove",v),window.addEventListener("mouseup",_))},[o,m,v,_]),j=(0,c.useCallback)(e=>{if("ArrowUp"===e.key){let t=y(o+4);u(t),d.Jt.setPanelHeight(t),e.preventDefault()}else if("ArrowDown"===e.key){let t=y(o-4);u(t),d.Jt.setPanelHeight(t),e.preventDefault()}else if("ArrowRight"===e.key){let t=x(m-4);h(t),d.Jt.setPanelWidth(t),e.preventDefault()}else if("ArrowLeft"===e.key){let t=x(m+4);h(t),d.Jt.setPanelWidth(t),e.preventDefault()}},[o,m]);return{panelWidth:m,panelHeight:o,startResize:C,onResizerKeyDown:j}}async function _(e){let t=await fetch(`/search/check_indexing_status?nwo=${encodeURIComponent(e)}`,{headers:{Accept:"application/json",...(0,n.kt)()}});if(!t.ok)return{requestStatus:m.RequestFailed,code:u.Unknown,docs:u.Unknown};let a=await t.json();return{requestStatus:a.can_index,code:a.code_status,docs:a.docs_status}}async function C(e){let t=1===e.length?`nwo=${encodeURIComponent(e[0])}`:`nwos=${encodeURIComponent(JSON.stringify(e))}`;return(0,o.DI)(`/search/index_embeddings?${t}&index_code=true`,{method:"POST"})}async function j(e){let t=await fetch(`/github-copilot/docs/docsets/kb_indexed_repos?ids=${encodeURIComponent(JSON.stringify(e))}`,{headers:{Accept:"application/json",...(0,n.kt)()}});return t.ok?await t.json():{canChat:!1}}function b(e){return e.every(e=>e===u.Indexed)?u.Indexed:e.every(e=>e===u.Unindexed)?u.Unindexed:e.some(e=>e===u.Indexing)?u.Indexing:e.some(e=>e===u.Unindexed)?u.PartiallyIndexed:u.Unknown}function S(e,t){let a=(0,c.useRef)(void 0),n=(0,c.useRef)(e);return(0,c.useEffect)(()=>{n.current=e},[e]),(0,c.useEffect)(()=>{if(t>0)return a.current=window.setInterval(()=>n.current(),t),()=>window.clearInterval(a.current)},[t]),a}},59788:(e,t,a)=>{a.d(t,{Q:()=>es});var n=a(74848),r=a(26108),i=a(15220),s=a(46251),l=a(86877),o=a(21373),c=a(72511),d=a(38621),u=a(96540),m=a(97564),h=a(54030),p=a(39176),f=a(54114),g=a(71363),y=a(78314),x=a(31078),v=a(53552),_=a(64375),C=a(29731),j=a(6665),b=a(19189),S=a(7808),w=a(64642),N=a(65787),I=a(25407),E=a(66108),A=a(94195),T=a(96459),R=a(11683),k=a(45800),L=a(31604),P=a(35811),M=a(10095),O=a(91385),F=a(70170),D=a(37272),$=a(71315),B=a(34164);let z=u.forwardRef(({ariaActiveDescendant:e,ariaControls:t,ariaExpanded:a,ariaHasPopup:r,className:i,onBlur:s,onFocus:l,onKeyDown:o,onPreload:c,onSearch:m,query:h,searchPlaceholder:p,loading:f,sx:g},y)=>{let{sendRepoClickEvent:x}=(0,j.T)(),[v,_]=u.useState(h),C=u.useRef((0,F.s)(e=>m(e),250));u.useEffect(()=>{_(h)},[h]);let b=h?(0,n.jsx)(P.ks.Action,{onClick:()=>{x("FILE_TREE.CANCEL_SEARCH"),m("")},icon:d.XCircleFillIcon,"aria-label":"Clear",className:"fgColor-muted"}):void 0;return(0,n.jsx)(P.ks,{autoFocus:U(),className:(0,B.$)("d-flex",i),ref:y,value:v,onKeyDown:o,onChange:e=>{_(e.target.value),c(),C.current(e.target.value)},sx:g,"aria-label":p||"Go to file","aria-activedescendant":e,role:r?"combobox":void 0,"aria-controls":t,"aria-expanded":a,"aria-haspopup":r?"dialog":void 0,autoCorrect:"off",spellCheck:"false",placeholder:p||"Go to file",loading:""!==h&&f,leadingVisual:d.SearchIcon,trailingAction:b,trailingVisual:b?void 0:()=>(0,n.jsx)(D.E,{children:(0,n.jsx)("kbd",{children:"t"})}),onFocus:e=>{c(),e.target.select(),l?.(e)},onBlur:s,onClick:()=>x("FILE_TREE.SEARCH_BOX")})});function U(){return"1"===new URLSearchParams($.fV.search).get("search")}z.displayName="FilesSearchBox";let W={excludeDirectories:!1,excludeSeeAllResults:!1};function V({actionListSx:e,additionalResults:t,className:a,commitOid:r,config:i=W,findFileWorkerPath:s,getItemUrl:l,onRenderRow:o,onItemSelected:d,searchBoxRef:m,sx:p}){var f;let g,{excludeDirectories:_,excludeSeeAllResults:C}=i,{query:E,setQuery:M}=(0,x.JS)(),O=(0,y.t)(),F=u.useRef(null),D=m??F,[$,B]=u.useState(E.length>0),[V,H]=u.useState(!!E),{list:q,directories:K,loading:Q,error:Z}=(0,h.o)(r,$,!!_),{path:J}=(0,v.eu)(),{getUrl:Y}=(0,b.Z)(),{queryText:X,queryLine:ee}=(g=(f=(f=E).replaceAll(" ","")).indexOf(":"))>=0?{queryText:f.substring(0,g),queryLine:parseInt(f.substring(g+1),10)}:{queryText:f,queryLine:void 0},{matches:et,clearMatches:ea}=function(e,t,a,n){let[r,i]=u.useState(),s=u.useRef(""),l=u.useRef(null),{sendStats:o}=(0,j.T)(),c=u.useRef(!1),d=u.useCallback(()=>{let e=new S.z(a,w.j);e.onmessage=({data:e})=>{c.current=!1,i(e.list),s.current=e.query,e.startTime&&o("repository.find-file",{"find-file-base-count":e.baseCount,"find-file-results-count":e.list.length,"find-file-duration-ms":performance.now()-e.startTime})},l.current=e},[o,a]);return u.useEffect(()=>{if(n)return d(),function(){l.current?.terminate()}},[d,n]),u.useEffect(()=>{if(e.length&&t){c.current&&(l.current?.terminate(),d());let a=s.current&&t.startsWith(s.current);c.current=!0,l.current?.postMessage({baseList:a&&r||e,query:t,startTime:performance.now()})}},[e,t,d]),{matches:r,clearMatches:()=>i(void 0)}}((0,u.useMemo)(()=>[...q,...t??[]].sort(),[t,q]),X,s,$),{sendRepoClickEvent:en}=(0,j.T)(),er=(0,T.Z)(),[ei,es]=u.useState(0),[el,eo]=u.useState(()=>U()),ec=u.useRef(null),ed=u.useRef(null),eu="file-results-list",{sendRepoKeyDownEvent:em}=(0,j.T)(),{screenSize:eh}=(0,A.lm)(),ep=i.enableOverlay??eh>=A.Gy.large,ef=u.useCallback(e=>{en("FILE_TREE.SEARCH_RESULT_CLICK"),d?.(e),H(!1)},[en,d]),eg=(e,t,a)=>l?l(e,t,a):Y({path:e,action:t?"tree":"blob",hash:a}),{containerRef:ey}=(0,k.G)({bindKeys:R.z0.ArrowVertical|R.z0.HomeAndEnd,focusInStrategy:"previous"},[Q,Z]);u.useEffect(()=>{E||H(!1)},[E]),u.useEffect(()=>{document.activeElement!==D.current&&ep&&H(!1)},[J,D,ep]);let ex=et?.slice(0,20)||[],ev=et&&et.length>ex.length,e_=!i.disableNavigation,eC=ed.current?.getBoundingClientRect().width,ej=(0,n.jsx)(P.az,{sx:{maxHeight:ep?"180px":"100% !important",width:ep?eC:"100%"},className:"FileResultsList-module__Box--cUmDY",children:Z?(0,n.jsx)(c.A,{variant:"danger",className:"m-3",children:"Failed to search"}):(0,n.jsxs)(P.lF,{ref:ey,sx:{p:ep?2:3,pr:3*!!ep,pt:ep?3:"2px !important",...e},role:"listbox",className:"FileResultsList-module__ActionList--kDNEZ",children:[!Q&&ex.map((e,t)=>{let a=K.includes(e),r=eg(e,a,ee?`L${ee}`:"");return(0,n.jsx)(G,{active:!1,index:t,focused:el&&ei===t,match:e,onRender:o,query:X,onClick:ef,isDirectory:a,to:r,useOverlay:ep,listRef:ey,noAnchor:i.disableNavigation},e)}),0===ex.length&&(0,n.jsx)("div",{role:"status",className:"text-center fgColor-muted",children:"No matches found"})]})});return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(P.az,{className:a,ref:ed,sx:p,children:(0,n.jsx)(z,{ariaActiveDescendant:(!ep&&E||ep&&V)&&el&&ei>-1?ev&&ei===ex.length?"see-all-results-link":`file-result-${ei}`:void 0,ariaExpanded:ep?V:void 0,ariaHasPopup:ep,ariaControls:ep?eu:void 0,ref:D,loading:Q,query:E,onKeyDown:e=>{let{key:t,shiftKey:a,metaKey:n,altKey:r,ctrlKey:i}=e;if(!a&&!n&&!r){if("Escape"===t)E?(em("FILE_TREE.CANCEL_SEARCH"),M(""),ea()):document.activeElement&&document.activeElement.blur();else if(!E)return;else if("Enter"===t){if(!C&&ev&&ei===ex.length)e_&&er((0,I.Y8Y)({owner:O.ownerLogin,repo:O.name,searchTerm:`path:${X}`})),d?.();else if(ex[ei]){let e=ex[ei];e_&&er(eg(ex[ei],!1,ee?`L${ee}`:"")),H(!1),d?.(e)}}else if("ArrowDown"===t||i&&"n"===t){if(!C&&ev&&ei>=ex.length-1){if(es(ex.length),ec.current&&ey.current){let e=(0,N.U)(ey.current);(0,R.Rt)(ec.current,e,{behavior:"instant"})}}else es(Math.min(ei+1,ex.length-1));e.preventDefault();return}else if("ArrowUp"===t||i&&"p"===t){es(Math.max(ei-1,0)),e.preventDefault();return}}},onPreload:()=>B(!0),onSearch:e=>{M(e),e?H(!0):(ea(),H(!1)),es(0)},onBlur:e=>{ey.current?.contains(e.relatedTarget)||(H(!1),eo(!1))},onFocus:()=>{E&&H(!0),eo(!0)},searchPlaceholder:i.searchPlaceholder,className:"FileResultsList-module__FilesSearchBox--KW9Zl"})}),ep&&ex.length>0&&(0,n.jsx)(L.T,{anchorRef:ed,open:ep&&V,renderAnchor:null,onClose:()=>{H(!1)},focusZoneSettings:{disabled:!0},focusTrapSettings:{disabled:!0},align:"end",overlayProps:{id:eu,role:"dialog"},children:ej}),!ep&&E&&ej]})}let H=({active:e,focused:t,index:a,match:r,query:i,to:s,isDirectory:l,onClick:o,onRender:c,useOverlay:d,listRef:m,noAnchor:h})=>{let p=(0,O.Xq)(i,r);c?.();let f=u.useRef(null);u.useEffect(()=>{if(t&&f.current&&m?.current){let e=(0,N.U)(m.current);(0,R.Rt)(f.current,e,{behavior:"instant"})}},[t,m]);let g={};t&&(g={outline:"none",border:"2 solid",boxShadow:"0 0 0 2px #0969da"});let y={id:`file-result-${a}`,active:e,onSelect:(0,u.useCallback)(()=>{o?.(r)},[r,o]),sx:{fontWeight:"normal",":hover":{textDecoration:"none"},mx:"2px",width:"calc(100% - 4px)",...g},role:"option","data-focus-visible-added":t||void 0,tabIndex:d?-1:0},x=(0,n.jsx)("div",{className:"d-flex",children:(0,n.jsx)("div",{className:"d-flex flex-1 flex-column overflow-hidden",children:(0,n.jsx)(Q,{text:r,positionsList:p,LeadingIcon:l?q:K,className:"FileResultsList-module__HighlightMatch--Jy_cG"})})});return h?(0,n.jsx)(P.lF.Item,{...y,children:x},r):(0,n.jsx)(P.lF.LinkItem,{...y,ref:f,as:E.N,to:s,children:x},r)},q=()=>(0,n.jsx)(M.A,{"aria-label":"Directory",icon:d.FileDirectoryFillIcon,size:"small",className:"FileResultsList-module__Octicon--PvMf4"}),K=()=>(0,n.jsx)(M.A,{"aria-label":"File",icon:d.FileIcon,className:"fgColor-muted mr-2",size:"small"}),G=u.memo(H);function Q({className:e,text:t,positionsList:a,sx:r,LeadingIcon:i}){let s=[],l=0;for(let e of a){if(Number(e)!==e||e<l||e>t.length)continue;let a=t.slice(l,e);a&&s.push(Z(a)),l=e+1,s.push((0,n.jsx)("mark",{className:"text-bold bgColor-transparent fgColor-default",children:t[e]},e))}return s.push(Z(t.slice(l))),(0,n.jsx)(P.az,{className:e,sx:r,children:(0,n.jsxs)(n.Fragment,{children:[i&&(0,n.jsx)(i,{}),s]})})}function Z(e){return e.replaceAll("/","/\u200B")}try{V.displayName||(V.displayName="FileResultsList")}catch{}try{H.displayName||(H.displayName="FileResultRow")}catch{}try{q.displayName||(q.displayName="DirectoryIcon")}catch{}try{K.displayName||(K.displayName="FileResultIcon")}catch{}try{G.displayName||(G.displayName="MemoizedFileResultRow")}catch{}try{Q.displayName||(Q.displayName="HighlightMatch")}catch{}var J=a(73017),Y=a(53419);let X=new Set(Object.values(a(23967).r4).flatMap(e=>e.extensions??[])),ee=new Set([".png",".jpg",".jpeg",".gif",".bmp",".svg",".webp",".ico",".tiff",".tif"]);function et(e,t,a){return{id:`${a.id}${"github_folder"===t?"-folder":""}-${e}`,repositoryId:a.id,nwo:`${a.ownerLogin}/${a.name}`,filePath:e,sha:a.defaultBranch,type:t}}function ea(e,t,a,n,r,i){let s=Array.from(e).filter(e=>t.has(e)),l=Array.from(e).filter(e=>!t.has(e));if(!i)return l.map(e=>et(e,"github_file",a));let o=[],c=new Set;for(let e of s){if(s.some(t=>t!==e&&e.startsWith(`${t}/`)))continue;let t=l.filter(t=>t.startsWith(`${e}/`));if(i&&0===t.length){o.push(et(e,"github_folder",a));continue}if(i&&t.length>=r)for(let n of(o.push(et(e,"github_folder",a)),t))c.add(n);else for(let e of t)o.push(et(e,"github_file",a)),c.add(e)}let d=l.filter(e=>!c.has(e));if(n&&i){let e=new Map;for(let t of d){let a=t.lastIndexOf("/"),n=a>0?t.substring(0,a):"";e.has(n)||e.set(n,[]),e.get(n)?.push(t)}for(let[t,n]of e)if(""===t)for(let e of n)o.push(et(e,"github_file",a));else o.push(et(t,"github_folder",a))}else for(let e of d)o.push(et(e,"github_file",a));return o}function en(e,t=30){let a=e.length<=t?e:`...${e.slice(-t)}`;return`<b>${a}</b>`}function er({currentRepo:e,setLocalFormData:t,fetchError:a,onFileCountChange:r,expandedPath:i,resourceCounts:s,allowFolderReferences:l,maxFileCount:o,onRejectionMessage:c,onDisplayCountChange:d,onFilteredFilesChange:m}){let[g,y]=(0,u.useState)(()=>new Set),[x,v]=(0,u.useState)(()=>new Set),_=o??50,{list:C,directories:j,loading:b}=(0,h.o)(e.commitOID,!0),[S,w]=(0,u.useState)([]);(0,u.useEffect)(()=>{w((0,p.k)({paths:C,directories:j})),v(new Set(j))},[C,j,w,e.commitOID]),(0,u.useEffect)(()=>{let a=Array.from(g).filter(e=>!x.has(e)),n=Array.from(g).filter(e=>x.has(e));r?.(a.length);let i=!1;if(l&&a.length>0){let e=n.map(e=>`${e}/`),t=a.filter(t=>!e.some(e=>t.startsWith(e))),r=t.some(e=>e.includes("/"));i=t.length>_&&r}let s=ea(g,x,e,i,_,l??!1);t(s),d&&d(s.length)},[g,x,e,t,r,d,l,_]);let N=(0,u.useCallback)(t=>`/${e.name}/${e.ownerLogin}/tree/${e.refInfo.name}/${t.path}`,[e]),I=(0,u.useCallback)(t=>{let a=Array.from(t).filter(e=>!g.has(e)),n=[],r=[];for(let e of a){let t=x.has(e);!function(e,t){if(t)return!0;let a=e.lastIndexOf("."),n=e.lastIndexOf("/");if(-1===a||a<n)return!0;let r=e.substring(a).toLowerCase();return X.has(r)&&!ee.has(r)}(e,t)?n.push(e):r.push(e)}let i=new Set;for(let e of g)t.has(e)&&i.add(e);for(let e of r)i.add(e);if(n.length>0?m?.(n):i.size<=g.size&&m?.([]),i.size<=g.size){y(i),c?.(null);return}if(!l){let e=Array.from(i).filter(e=>!x.has(e)),t=s?s.maxResourceCount-s.currentResourceCount:_;if(e.length>t){let t=s?`${s.currentResourceCount+e.length} / ${s.maxResourceCount} possible sources selected, add fewer files.`:`Up to ${_} files can be added at a time.`;c?.(t),y(i);return}c?.(null),y(i);return}let o=Array.from(i).filter(e=>!x.has(e)),d=Array.from(i).filter(e=>x.has(e)).map(e=>`${e}/`),u=o.filter(e=>!d.some(t=>e.startsWith(t))),h=u.some(e=>e.includes("/"));ea(i,x,e,u.length>_&&h,_,l).length,y(i)},[g,_,x,l,c,e,s,m]);return(0,n.jsx)("div",{className:"MultiFilePicker-module__Box--gINxM",children:(0,n.jsx)(f.Rw,{rootItems:S,expandedPath:i,selectedItemRef:()=>{},setRootItems:w,navigateOnClick:!1,directoryNavigateOnClick:!1,selectedItems:g,onSelectionChange:I,loading:b||!1,fetchError:!!a,getItemUrl:N,allowFolderReferences:!!l,sortDirectoryItems:e=>e.sort((e,t)=>e.data.name.localeCompare(t.data.name))})})}function ei({onClose:e}){return(0,n.jsx)(r.K,{icon:d.XIcon,"aria-label":"Close",onClick:e,variant:"invisible"})}function es({formData:e,onCancel:t,onSaveFiles:a,findFileWorkerPath:h,attachmentButtonRef:p,owner:f,resourceCounts:j,initialRepo:b,onRepoSelect:S,hideBackButton:w=!1,allowFolderReferences:N=!1,maxFileCount:I=50}){let[E,A]=(0,u.useState)({}),[T,R]=(0,u.useState)(null),[k,L]=(0,u.useState)(b||null),[P,M]=(0,u.useState)(!0),[O,F]=(0,u.useState)(e),[D,$]=(0,u.useState)(!1),[B,z]=(0,u.useState)(null),[U,W]=(0,u.useState)(""),[H,q]=(0,u.useState)(null),[K,G]=(0,u.useState)(0),[Q,Z]=(0,u.useState)(0),[X,ee]=(0,u.useState)([]),et=(0,u.useRef)(!1),ea=async e=>{let t;if(et.current=!0,E[e]){L(t=E[e]),S?.(t);return}try{t=await (0,m.V)(e),A(a=>({...a,[e]:t})),L(t),S?.(t),M(!1)}catch(e){R(e instanceof Error?e.message:"An unknown error occurred")}et.current=!1},es=()=>{S?.(null),L(null),F([]),M(!0)},el=void 0!==j,eo=(el?Q:K)>(el?j.maxResourceCount-j.currentResourceCount:I),ec=async()=>{$(!0);try{if(eo)return;(0,Y.BI)("copilot-spaces.click",{target:"SAVED_FILES_FROM_FILE_PICKER"}),await a(O)}catch(t){let e="An unknown error occurred";t&&"object"==typeof t&&"base"in t&&"string"==typeof t.base&&(e=t.base.startsWith("unsupported_file_type")&&"files"in t?function(e){if(1===e.length)return`This file can't be submitted: ${e[0]}. Only supported file types are allowed.`;let t=e.slice(0,3).map(e=>en(e)),a=e.length-3,n=`One or more files can't be submitted: ${t.join(", ")}`;return a>0&&(n+=`, and ${a} more`),`${n}. Only supported file types are allowed.`}(t.files):t.base.startsWith("The size of the space exceeds the current limit")?"The size of the space exceeds the current limit":t.base),z(e)}finally{$(!1)}};(0,u.useEffect)(()=>{z(null)},[O]);let ed=eo?el?`${j.currentResourceCount+Q} / ${j.maxResourceCount} possible sources selected, add fewer files.`:`Up to ${I} items can be added at a time.`:H,eu=eo||!!H;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(g.X,{selectionVariant:"instant",open:!k&&P,onOpenChange:e=>{et.current||(M(e),t())},selectedRepoIds:new Set,onSelectRepo:async e=>{e&&(F([]),(0,Y.BI)("copilot-spaces.click",{target:"SELECTED_REPO_FROM_REPO_PICKER"}),await ea(e))},cancelReturnFocusRef:p,submitReturnFocusRef:p,error:T??void 0,ownerDisplayLogin:f,includeForks:!0}),k&&(0,n.jsx)(i.l,{onClose:t,title:`Add files from ${k.ownerLogin}/${k.name}`,width:"large",position:{narrow:"fullscreen"},renderHeader:({onClose:e,dialogLabelId:t})=>(0,n.jsxs)(i.l.Header,{children:[(0,n.jsx)("div",{className:"MultiFilePicker-module__dialogHeader--CApsB",children:(0,n.jsx)(i.l.Title,{id:t,children:(0,n.jsxs)(s.B,{align:"center",direction:"horizontal",gap:"none",children:[!w&&(0,n.jsx)(s.B.Item,{children:(0,n.jsx)(r.K,{icon:d.ArrowLeftIcon,"aria-label":"Back",onClick:es,variant:"invisible"})}),(0,n.jsxs)(s.B.Item,{grow:!0,className:"mx-1",children:["Select folders and files in ",k.ownerLogin,"/",k.name]}),(0,n.jsx)(s.B.Item,{children:(0,n.jsx)(ei,{onClose:()=>e("close-button")})})]})})}),(0,n.jsx)(i.l.Subtitle,{className:"mt-0",children:(0,n.jsx)(y.d,{repository:k,children:(0,n.jsx)(x.Ck,{children:(0,n.jsx)(v.qV,{refInfo:{name:k.refInfo.name,canEdit:!0,listCacheKey:"anything",currentOid:k.commitOID},path:"test",action:"tree",copilotAccessAllowed:!0,children:(0,n.jsx)(_.$,{allShortcutsEnabled:!1,children:(0,n.jsx)(V,{commitOid:k.commitOID,findFileWorkerPath:h,onItemSelected:e=>{e&&W(e)},config:{enableOverlay:!0,disableNavigation:!0,searchPlaceholder:"Search for files or folders",actionText:"Search for files or folders"}})})})})})})]}),renderFooter:()=>(0,n.jsx)(i.l.Footer,{children:(0,n.jsxs)("div",{className:"d-flex flex-justify-between flex-items-center width-full",children:[(0,n.jsx)("div",{className:"d-flex flex-items-center",children:ed&&(0,n.jsx)(l.A.Validation,{variant:"error",children:ed})}),(0,n.jsxs)("div",{className:"d-flex flex-row flex-justify-end gap-2",children:[(0,n.jsx)(o.Q,{onClick:t,children:"Cancel"}),(0,n.jsx)(o.Q,{...(0,C.G)("save-resource-button"),variant:"primary",onClick:ec,count:D?void 0:(el?Q:K)||void 0,loading:D,disabled:eu,children:"Add"})]})]})}),renderBody:()=>(0,n.jsxs)("div",{className:"d-flex flex-column",children:[T&&(0,n.jsx)("span",{children:T}),B&&(0,n.jsx)("div",{className:"position-sticky top-0 bgColor-default flash-banner",children:(0,n.jsx)(c.A,{full:!0,variant:"danger",children:(0,n.jsx)(J.JR,{as:"span",html:B})})}),X.length>0&&(0,n.jsx)("div",{className:"position-sticky top-0 bgColor-default flash-banner",children:(0,n.jsx)(c.A,{full:!0,variant:"warning",children:(0,n.jsx)(J.JR,{as:"span",html:function(e){if(1===e.length&&e[0])return`This file was filtered out: ${en(e[0])}. Only supported file types are allowed.`;let t=e.slice(0,3).map(e=>en(e)),a=e.length-3,n=`These files were filtered out: ${t.join(", ")}`;return a>0&&(n+=`, and ${a} more`),`${n}. Only supported file types are allowed.`}(X)})})}),(0,n.jsx)(y.d,{repository:k,children:(0,n.jsx)(x.Ck,{children:(0,n.jsx)(v.qV,{refInfo:{name:k.refInfo.name,canEdit:!0,listCacheKey:"anything",currentOid:k.commitOID},path:"test",action:"tree",copilotAccessAllowed:!0,children:(0,n.jsx)(er,{expandedPath:U,currentRepo:k,localFormData:O,setLocalFormData:F,onFileCountChange:Z,onDisplayCountChange:G,fetchError:T,resourceCounts:j,allowFolderReferences:N,maxFileCount:I,onRejectionMessage:q,onFilteredFilesChange:ee})})})})]}),className:"MultiFilePicker-module__Dialog--ls9MF"})]})}try{er.displayName||(er.displayName="FilePickerForm")}catch{}try{ei.displayName||(ei.displayName="CloseButton")}catch{}try{es.displayName||(es.displayName="MultiFilePicker")}catch{}},60905:(e,t,a)=>{a.d(t,{s:()=>CopilotImageAttacher});var n=a(50467),r=a(53419),i=a(25641),s=a(35247),l=a(76166),o=a(30456);let c=["image/gif","image/jpeg","image/png","image/webp"];let CopilotImageAttacher=class CopilotImageAttacher{static getAllowedImageFileExtensions(e){return this.getFileExtensions(e).join(",")}static isTypeAllowed(e,t){return e=e.toLowerCase(),this.getMimeTypes(t).includes(e)}static getAllowedFiles(e,t){let[a,n]=e.reduce(([e,a],n)=>this.isTypeAllowed(n.type,t)?[[...e,n],a]:[e,[...a,n]],[[],[]]);return[a,n]}static getAttachmentLimit(){return s.W.attachMultipleImages?4:1}static getAttachmentSizeLimit(){return 3932160}static makeImageReference(e,t){let a=crypto.randomUUID(),n=new o.N(a,e,t);return{id:a,attachment:n,type:"image",name:e.name||"Image"}}static getFileExtensions(e){if(Array.isArray(e))return Array.from(new Set(e.flatMap(e=>this.getFileExtensions(e))));let t=this.getMimeTypes(e).map(e=>`.${e.split("/")[1]}`);return t.includes(".jpeg")&&t.push(".jpg"),t}static getMimeTypes(e){return Array.isArray(e)?Array.from(new Set(e.flatMap(e=>this.getMimeTypes(e)))):e.capabilities.limits.vision?e.capabilities.limits.vision.supported_media_types.filter(e=>c.includes(e)):[]}async addImageAttachments(e,t="unknown",a,n=!1){if(0===e.length)return[];let o=null,c=this.state.selectedThreadID,d=this.manager.getPendingThreadId(a),u=s.W.visionSkipThreadCreate;if(a&&!c&&d&&(c=d),!c&&!u)try{c=(o=await this.manager.createThread({customCopilotId:a,preventThreadSelection:n})).id}catch(t){let e="An error occurred creating the thread. Sending a single message should create a new thread.";throw t instanceof Error&&(e||(e=t.message)),this.manager.addAmbientError(e),Error(e)}let m=this.state.currentReferences.filter(e=>"image"===e.type).length,h=CopilotImageAttacher.getAttachmentLimit();if(m+e.length>h){let e=s.W.attachMultipleImages?`You can add up to ${h} image files per message.`:"Only one image can be uploaded at a time";return this.manager.addAmbientError(e),(0,l.d)("file_limit_reached"),[]}let p=[],f=[];for(let a of e){if(!CopilotImageAttacher.isTypeAllowed(a.type,this.state.model))return(0,l.d)("included_unsupported_file",{fileTypes:a.type,uploadType:t}),[];if(a.size>CopilotImageAttacher.getAttachmentSizeLimit())return this.manager.addAmbientError("Only images below 3.75MB are supported"),(0,l.d)("size_limit_exceeded",{size:a.size}),[];if(null==c&&!u)throw this.manager.addAmbientError("Please manually create a thread before uploading an image"),Error("ThreadID resolution for image attachment is not functioning properly");let e=CopilotImageAttacher.makeImageReference(a,c);if(this.state.model.id.startsWith("claude")&&this.state.model.capabilities.supports.vision){let t=await e.attachment.getDimensions();if(t.width&&t.height&&(t.width>8e3||t.height>8e3)){this.manager.addAmbientError("The image you uploaded exceeds the maximum allowed dimensions for Claude models. Please try again with another model."),(0,l.d)("dimension_limit_exceeded",{width:t.width,height:t.height});continue}}let n=(0,i.Vc)(a.name);this.manager.addReference(n,"image-attacher"),0===f.length&&this.manager.dispatch({type:"WAITING_ON_ATTACHMENT",loading:!0,attachmentType:"file-upload"}),f.push({file:a,placeholder:n,reference:e})}return await Promise.all(f.map(async({file:e,placeholder:a,reference:n})=>{try{o&&await n.attachment.prefetch(),this.manager.setImageAttachmentUploaded(n.id,n.attachment),this.manager.replaceReference(a,n),(0,r.BI)("dotcom_chat.vision.image_added",{uploadType:t}),p.push(n)}catch(n){this.manager.removeReference(a);let t="An unexpected error occurred while reading the file";if("string"==typeof n)throw this.manager.addAmbientError(`An error occurred uploading the attachment ${e.name}`),(0,l.d)("ErrorString",{message:n}),Error(n);if(n instanceof Error)if((0,l.d)(n.name,{message:n.message}),"GenericServerError"===n.name&&n.message.includes("Error creating policy"))this.manager.addAmbientError(t);else throw this.manager.addAmbientError(t),n;else throw this.manager.addAmbientError(t),n}})).finally(()=>{this.manager.dispatch({type:"WAITING_ON_ATTACHMENT",loading:!1})}),n&&a&&o&&this.manager.setPendingThreadId(o.id,a),p}constructor(e,t){(0,n._)(this,"state",void 0),(0,n._)(this,"manager",void 0),this.state=e,this.manager=t}}},61180:(e,t,a)=>{a.d(t,{T:()=>s});var n=a(21728),r=a(96540),i=a(79064);function s(){let e,t,a=(0,n.c)(3),[s,o]=(0,r.useState)(l);a[0]===Symbol.for("react.memo_cache_sentinel")?(e=e=>{o(e),e&&i.Jt.setLastUsedRepository(e)},a[0]=e):e=a[0];let c=e;return a[1]!==s?(t=[s,c],a[1]=s,a[2]=t):t=a[2],t}function l(){return i.Jt.getLastUsedRepository()}},62227:(e,t,a)=>{a.d(t,{A:()=>n});let n={Box:"SingleSignOnBanner-module__Box--jDDJV",Flash:"SingleSignOnBanner-module__Flash--OYpTa",Box_1:"SingleSignOnBanner-module__Box_1--f7GQK",Octicon:"SingleSignOnBanner-module__Octicon--Mg3jx",Box_2:"SingleSignOnBanner-module__Box_2--Se3Ze",ForceWrap:"SingleSignOnBanner-module__ForceWrap--Vz1Sn",Paragraph:"SingleSignOnBanner-module__Paragraph--jaDvQ",ProtectedOrgs_FullList:"SingleSignOnBanner-module__ProtectedOrgs_FullList--siZfg",ProtectedOrgs_Shortened:"SingleSignOnBanner-module__ProtectedOrgs_Shortened--G8LoG",ShieldLockIcon:"SingleSignOnBanner-module__ShieldLockIcon--k2b_L"}},63422:(e,t,a)=>{a.d(t,{L:()=>l});var n=a(74848),r=a(21728),i=a(26108),s=a(34164);let l=(0,a(96540).forwardRef)((e,t)=>{let a,l,o,c,d,u,m=(0,r.c)(11);m[0]!==e?({selected:c,icon:a,selectedIcon:l,...o}=e,m[0]=e,m[1]=a,m[2]=l,m[3]=o,m[4]=c):(a=m[1],l=m[2],o=m[3],c=m[4]);let h=c&&l?l:a;return m[5]===Symbol.for("react.memo_cache_sentinel")?(d=(0,s.$)("IconButtonSelector-module__anchor--t8Bzw"),m[5]=d):d=m[5],m[6]!==h||m[7]!==t||m[8]!==o||m[9]!==c?(u=(0,n.jsx)(i.K,{ref:t,...o,className:d,icon:h,"data-selected":c}),m[6]=h,m[7]=t,m[8]=o,m[9]=c,m[10]=u):u=m[10],u});l.displayName="IconButtonSelector"},65432:(e,t,a)=>{a.d(t,{Bu:()=>p,SC:()=>c,Ti:()=>m,iS:()=>d,k5:()=>o,o4:()=>u,rZ:()=>h});var n=a(82591),r=a(73900),i=a(15838),s=a(94416);let l=0;function o(){l=0,document.dispatchEvent(new Event(n.z.INITIAL)),(0,s.xT)()}function c(e){(0,s.LM)()||(document.dispatchEvent(new Event(n.z.PROGRESS_BAR.START)),document.dispatchEvent(new r.sW(e)),(0,s.Vy)(e),(0,s.ZW)(),(0,s.HK)(),(0,i.E5)())}function d(e={}){g(e)&&(l+=1,document.dispatchEvent(new r.ni((0,s.di)(),l)),m(e))}function u(e={}){if(!g(e))return;l=0;let t=(0,s.my)()||s.BW;document.dispatchEvent(new r.Kq((0,s.di)(),t)),f(),(0,i.Cd)(t),(0,s.xT)()}function m(e={}){if(!g(e))return;let t=(0,s.di)();f(),document.dispatchEvent(new r.RQ(t)),(0,s.Ff)(),(0,s.JA)(t)}function h(e={}){g(e)&&((0,i.Im)(),document.dispatchEvent(new Event(n.z.RENDER)))}function p(){document.dispatchEvent(new Event(n.z.FRAME_UPDATE))}function f(){document.dispatchEvent(new Event(n.z.PROGRESS_BAR.END))}function g({skipIfGoingToReactApp:e,allowedMechanisms:t=[]}={}){return(0,s.LM)()&&(0===t.length||t.includes((0,s.di)()))&&(!e||!(0,s.gc)())}},71363:(e,t,a)=>{a.d(t,{F:()=>b,X:()=>N});var n=a(74848),r=a(21728),i=a(70170),s=a(69599),l=a(53419),o=a(33544),c=a(29731),d=a(5524),u=a(18096),m=a(34164),h=a(96540),p=a(40961),f=a(26408),g=a(25641),y=a(2635),x=a(33592);let v=e=>{let t,a,i,s=(0,r.c)(6),{children:l,delay:o,assertive:c}=e,d=void 0===o?500:o,[u,m]=(0,h.useState)(!1);if(s[0]!==d?(t=()=>{m(!1);let e=setTimeout(()=>m(!0),d);return()=>clearTimeout(e)},a=[d,m],s[0]=d,s[1]=t,s[2]=a):(t=s[1],a=s[2]),(0,h.useEffect)(t,a),!u)return null;let p=void 0!==c&&c?"assertive":"polite";return s[3]!==l||s[4]!==p?(i=(0,n.jsx)("div",{role:"alert","aria-live":p,"aria-atomic":"true",children:l}),s[3]=l,s[4]=p,s[5]=i):i=s[5],i};try{v.displayName||(v.displayName="DelayedComponent")}catch{}var _=a(35673);let C="RepoSelectPanel-module__ActionList--ud9yE";var j=a(27844);function b(e){let t,a,i,s,l=(0,r.c)(12),{currentReferences:o}=(0,y.Pk)(),c=(0,x.b)();l[0]!==o?(a=new Set((t=o.filter(w)).map(S)),l[0]=o,l[1]=t,l[2]=a):(t=l[1],a=l[2]);let d=a,[u,m]=(0,h.useState)();l[3]!==c||l[4]!==e||l[5]!==t?(i=async a=>{m(void 0);let n=t.find(e=>e.id===a);if(n)return void c.removeReference(n);let r=await c.service.fetchRepo(a);if(!r.ok){m("Error: failed to attach repository. Please try again."),e.onOpenChange(!0);return}e.onRepoSelect?.(r.payload);let i=(0,g.qS)(r.payload);c.addReference(i,"repoMenu")},l[3]=c,l[4]=e,l[5]=t,l[6]=i):i=l[6];let p=i;return l[7]!==u||l[8]!==e||l[9]!==d||l[10]!==p?(s=(0,n.jsx)(N,{...e,selectionVariant:"multiple",selectedRepoIds:d,onSelectRepo:p,description:"Choose repositories to chat about.",error:u}),l[7]=u,l[8]=e,l[9]=d,l[10]=p,l[11]=s):s=l[11],s}function S(e){return e.id}function w(e){return"repository"===e.type}function N(e){let t,a,g,x,b,S,w,N,A,T,R,k,L,P,M,O,F,D,$,B,z=(0,r.c)(53),{open:U,onOpenChange:W,submitReturnFocusRef:V,cancelReturnFocusRef:H,selectedRepoIds:q,featuredRepoIds:K,onSelectRepo:G,selectionVariant:Q,description:Z,error:J,ownerDisplayLogin:Y,includeForks:X,anchorRef:ee}=e,et=void 0===K?q:K,{ssoOrganizations:ea}=(0,y.Pk)(),[en,er]=(0,h.useState)("");z[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,i.s)(e=>er(e),150,{start:!1}),z[0]=t):t=z[0];let ei=t;z[1]!==U?(a=()=>{U||er("")},g=[U],z[1]=U,z[2]=a,z[3]=g):(a=z[2],g=z[3]),(0,h.useEffect)(a,g);let{repositories:es,loading:el}=(0,f.U)(en,U,void 0,Y,void 0!==X&&X);e:{if(el){x="Loading repositories";break e}if(0===es.length){x="No repositories found";break e}if(1===es.length){x="1 repository found";break e}x=`${es.length} repositories found`}let eo=x;z[4]===Symbol.for("react.memo_cache_sentinel")?(b=e=>{ei(e.currentTarget.value)},z[4]=b):b=z[4];let ec=b;t:{let e;if(!ea){let e;z[5]===Symbol.for("react.memo_cache_sentinel")?(e=[],z[5]=e):e=z[5],S=e;break t}z[6]!==ea?(e=ea.map(E),z[6]=ea,z[7]=e):e=z[7],S=e}let ed=S;z[8]!==et?(w=e=>et.has(e.databaseId)?"featuredRepos":"nonFeaturedRepos",z[8]=et,z[9]=w):w=z[9];let{featuredRepos:eu,nonFeaturedRepos:em}=function(e,t){let a={};for(let n of e){let e=t(n);a[e]??(a[e]=[]),a[e].push(n)}return a}(es,w),[eh,ep]=(0,h.useState)(!1);z[10]!==G?(N=async e=>{ep(!0),await G(e),ep(!1)},z[10]=G,z[11]=N):N=z[11];let ef=N;z[12]===Symbol.for("react.memo_cache_sentinel")?(A=(0,c.G)("repo-select-panel"),z[12]=A):A=z[12];let eg=u.X,ey=ee&&"RepoSelectPanel-module__CopilotRepoSelectPanelAnchored--mTBrm";z[13]!==ey?(T=(0,m.$)(ey),z[13]=ey,z[14]=T):T=z[14],z[15]!==H||z[16]!==W?(R=()=>{(0,p.flushSync)(()=>W(!1)),H.current?.focus(),(0,l.BI)("dotcom_chat.activate",{target:"REPOSITORY_DIALOG_CLOSE",mode:"immersive"})},z[15]=H,z[16]=W,z[17]=R):R=z[17],z[18]!==W||z[19]!==V?(k=()=>{(0,p.flushSync)(()=>W(!1)),V.current?.focus()},z[18]=W,z[19]=V,z[20]=k):k=z[20];let ex=ee?"anchored":"modal",ev="multiple"===Q?"Select repositories":"Select a repository",e_=ed.length>0&&"border-bottom-0";z[21]!==e_?(L=(0,m.$)(e_),z[21]=e_,z[22]=L):L=z[22];let eC=!0===el||eh;z[23]!==eC?(P=(0,n.jsx)(u.X.SearchInput,{loading:eC,onChange:ec,placeholder:"Search repositories","aria-label":"Search repositories"}),z[23]=eC,z[24]=P):P=z[24],z[25]!==L||z[26]!==P?(M=(0,n.jsx)(u.X.Header,{className:L,children:P}),z[25]=L,z[26]=P,z[27]=M):M=z[27],z[28]!==Y||z[29]!==ed?(O=(void 0===Y||""===Y)&&!(0,s.G7)("global_sso_banner")&&(0,n.jsx)(o.x,{portalContainerName:_.f1,protectedOrgs:ed,redirectURI:I,useFullWidthStyle:!0}),z[28]=Y,z[29]=ed,z[30]=O):O=z[30],z[31]===Symbol.for("react.memo_cache_sentinel")?(F=(0,n.jsx)(_.hl,{}),z[31]=F):F=z[31],z[32]!==J?(D=J&&(0,n.jsx)(u.X.Message,{variant:"error",size:"inline",children:J}),z[32]=J,z[33]=D):D=z[33];let ej="initial"===el?(0,n.jsxs)("div",{className:C,children:[(0,n.jsx)("div",{className:"sr-only",children:eo}),(0,n.jsx)(u.X.Loading,{children:"Fetching repositories\u2026"})]}):0!==es.length||el?(0,n.jsxs)(d.l,{className:C,children:[(0,n.jsx)("div",{className:"sr-only",children:eo}),eu?.map(e=>(0,n.jsx)(j.W,{repo:e,onSelect:ef,selected:q.has(e.databaseId)},e.databaseId)),eu&&em&&(0,n.jsx)(d.l.Divider,{}),em?.map(e=>(0,n.jsx)(j.W,{repo:e,onSelect:ef,selected:q.has(e.databaseId)},e.databaseId))]}):(0,n.jsxs)("div",{className:C,children:[(0,n.jsx)("div",{className:"sr-only",children:eo}),(0,n.jsx)("div",{className:"RepoSelectPanel-module__emptyStateMessage--qQwDm",children:(0,n.jsx)(v,{delay:750,children:(0,n.jsx)(u.X.Message,{variant:"empty",title:"No repositories found",children:"Try a different search term"})})})]});return z[34]!==eg||z[35]!==ee||z[36]!==Z||z[37]!==U||z[38]!==Q||z[39]!==T||z[40]!==R||z[41]!==k||z[42]!==ex||z[43]!==ev||z[44]!==M||z[45]!==O||z[46]!==F||z[47]!==D||z[48]!==ej?($=(0,n.jsxs)(eg,{className:T,width:"large",maxHeight:"xlarge",onCancel:R,onSubmit:k,open:U,variant:ex,selectionVariant:Q,title:ev,description:Z,anchorRef:ee,children:[M,O,F,D,ej]}),z[34]=eg,z[35]=ee,z[36]=Z,z[37]=U,z[38]=Q,z[39]=T,z[40]=R,z[41]=k,z[42]=ex,z[43]=ev,z[44]=M,z[45]=O,z[46]=F,z[47]=D,z[48]=ej,z[49]=$):$=z[49],z[50]!==A||z[51]!==$?(B=(0,n.jsx)("div",{...A,children:$}),z[50]=A,z[51]=$,z[52]=B):B=z[52],B}function I(){return`/search/refresh_blackbird_caches?return_to=${location.href}`}function E(e){return e.login}try{b.displayName||(b.displayName="RepoReferencesSelectPanel")}catch{}try{N.displayName||(N.displayName="RepoSelectPanel")}catch{}},72011:(e,t,a)=>{a.d(t,{A2:()=>m,CT:()=>c,Lr:()=>d,O6:()=>l,dp:()=>o,ee:()=>u});var n=a(25641),r=a(23657),i=a(96379);let s="/github-copilot/chat",l=["copilot-chat","custom-copilots"];function o(e){return e?["copilot-chat","custom-copilot",{id:e.id,owner:e.owner}]:["copilot-chat","custom-copilot",null]}async function c(){let e=await (0,i.lS)(`${s}/custom_copilots`);if(!e.ok)throw Error(`Failed to fetch spaces: ${n.nN[e.status]||n.DW}`);return await e.json()}async function d(e){if(!e||!e.owner)return{status:500,ok:!1,error:"unexpected null custom copilot id or missing owner"};let{owner:t,id:a}=e,r=`${s}/custom_copilots/${t}/${a}`,l=await (0,i.lS)(r);if(!l.ok)return{status:l.status,ok:!1,error:n.nN[l.status]||n.DW};let o=await l.json();return{status:l.status,ok:!0,payload:o}}async function u(e){let t=await (0,i.lS)((0,r.fn)(e),{method:"DELETE"});return t.ok?{status:t.status,ok:!0,payload:null}:t}async function m(e){let t=await (0,i.lS)(`${(0,r.fn)(e)}/settings/visibility`);if(!t.ok)throw Error("Error fetching visibility settings");try{let e=await t.json();return{memberCount:e.member_count&&"number"==typeof e.member_count?e.member_count:null}}catch(e){throw Error(`Error parsing visibility settings: ${e}`)}}},72439:(e,t,a)=>{a.d(t,{E:()=>CopilotTextAttacher,x:()=>l});var n=a(50467),r=a(53419),i=a(25641),s=a(23967);let l="application/x.clipboard",o=/^\s*`?([\w-_]{3,40}\.\w{1,10})`?\s*$/;let CopilotTextAttacher=class CopilotTextAttacher{static async isAttachable(e){if(e.size>CopilotTextAttacher.getAttachmentSizeLimit())return!1;let t=await e.text();return CopilotTextAttacher.isPlainText(t)}static getTextFileExtensions(){return CopilotTextAttacher.fileExtensionsCache??(CopilotTextAttacher.fileExtensionsCache=Object.values(s.r4).flatMap(e=>e.extensions??[]).filter(e=>"stl"!==e).join(","))}static getAttachmentSizeLimit(){return 512e3}static isPlainText(e){let t=Math.min(e.length,1e3),a=0,n=0;for(let r=0;r<t;r++){let t=e.charCodeAt(r);0===t?a++:t>127&&n++}let r=a/t,i=n/t;return r<=.1&&i<=.2}async makeReference(e,t){let a=await e.text(),n=e.name||(t?await t:await this.generateFileName(a,e.type));return this.makeReferenceSync(a,n)}makeReferenceSync(e,t){let a=t.split(".").pop();return(0,r.BI)("copilot.attach_pasted_file",{extension:a,characters:e.length}),{type:"thread-scoped-file",name:t,text:e,language:""}}async addAttachment(e,t,a){let n;if(e.size>CopilotTextAttacher.getAttachmentSizeLimit())return void this.manager.addAmbientError("Attached text files must be smaller than 500KB");let r=await e.text();if(!CopilotTextAttacher.isPlainText(r))return void this.manager.addAmbientError(`"${e.name}" has an unsupported file type. Please try again with a plain text file`);if(a)n=this.makeReferenceSync(r,a),this.manager.addReference(n,"text-attacher");else{let a=(0,i.Vc)(e.name);this.manager.addReference(a,"text-attacher"),this.manager.dispatch({type:"WAITING_ON_ATTACHMENT",loading:!0,attachmentType:"file-upload"});try{n=await this.makeReference(e,t),this.manager.replaceReference(a,n)}catch{this.manager.addAmbientError("Failed to process file. Please try again."),this.manager.removeReference(a)}finally{this.manager.dispatch({type:"WAITING_ON_ATTACHMENT",loading:!1})}}return n}async generateFileName(e,t){let a=this.existingFileNames.size>0?`

Follow the naming formats used by these existing files: ${Array.from(this.existingFileNames).slice(0,5).join(", ")}`:"",n=await this.manager.service.getSimpleCompletion(`Return a suitable filename for the following file contents.
      Follow the file naming conventions of the language and do not include any special characters except for period, underscore or hyphens.
      Try to limit the name to 20 characters or less.
      You MUST include the file extension. Include only the filename in your response and nothing else.${a}

File contents:
\`\`\`
${e}
\`\`\`
`),i=n.ok?o.exec(n.payload)?.[1]:null;return i?(0,r.BI)("copilot.generate_pasted_file_name.success"):(0,r.BI)("copilot.generate_pasted_file_name.failure"),this.uniqueFileName(i??this.defaultFileName(t))}uniqueFileName(e){if(!this.existingFileNames.has(e))return e;let t=e.lastIndexOf("."),a=t>0&&t<e.length-1,n=a?e.substring(0,t):e,r=a?e.substring(t):"",i=2;for(;this.existingFileNames.has(`${n}${i}${r}`);)i++;return`${n}${i}${r}`}defaultFileName(e){return e===l?"pasted.txt":"untitled.txt"}constructor(e,t=new Set){(0,n._)(this,"manager",void 0),(0,n._)(this,"existingFileNames",void 0),this.manager=e,this.existingFileNames=t}};(0,n._)(CopilotTextAttacher,"fileExtensionsCache",void 0)},73017:(e,t,a)=>{a.d(t,{$6:()=>c,JR:()=>l,vb:()=>s});var n=a(74848),r=a(35811),i=a(96540);let s=d(r.az),l=d(r.EY),o=(0,i.forwardRef)((e,t)=>(0,n.jsx)("div",{ref:t,...e}));o.displayName="Div";let c=d(o);function d(e){let t=(0,i.forwardRef)((t,a)=>{let{html:r,...i}=t;return(0,n.jsx)(e,{ref:a,...i,dangerouslySetInnerHTML:r?{__html:r}:void 0})});return t.displayName=`SafeHTML${e.displayName||e.name}`,t}try{s.displayName||(s.displayName="VerifiedHTMLBox")}catch{}try{l.displayName||(l.displayName="VerifiedHTMLText")}catch{}try{c.displayName||(c.displayName="VerifiedHTMLDiv")}catch{}},73189:(e,t,a)=>{a.d(t,{l:()=>n});let n=()=>void 0},73900:(e,t,a)=>{a.d(t,{Kq:()=>SoftNavErrorEvent,RQ:()=>SoftNavEndEvent,gh:()=>SoftNavPayloadEvent,ni:()=>SoftNavSuccessEvent,sW:()=>SoftNavStartEvent});var n=a(50467),r=a(82591);let i=class SoftNavEvent extends Event{constructor(e,t){super(t),(0,n._)(this,"mechanism",void 0),this.mechanism=e}};let SoftNavStartEvent=class SoftNavStartEvent extends i{constructor(e){super(e,r.z.START)}};let SoftNavSuccessEvent=class SoftNavSuccessEvent extends i{constructor(e,t){super(e,r.z.SUCCESS),(0,n._)(this,"visitCount",void 0),this.visitCount=t}};let SoftNavErrorEvent=class SoftNavErrorEvent extends i{constructor(e,t){super(e,r.z.ERROR),(0,n._)(this,"error",void 0),this.error=t}};let SoftNavEndEvent=class SoftNavEndEvent extends i{constructor(e){super(e,r.z.END)}};let SoftNavPayloadEvent=class SoftNavPayloadEvent extends Event{constructor(e){super("soft-nav:payload"),(0,n._)(this,"payload",void 0),(0,n._)(this,"appPayload",void 0),this.payload=e.payload,this.appPayload=e.appPayload}}},76166:(e,t,a)=>{a.d(t,{d:()=>r});var n=a(53419);function r(e,t){(0,n.BI)("dotcom_chat.vision.error",{type:e,...t})}},76629:(e,t,a)=>{a.d(t,{BP:()=>u,D3:()=>d,O8:()=>o});var n=a(74848),r=a(21728),i=a(96540),s=a(71315),l=a(88431);let o={ServerRender:"ServerRender",ClientHydrate:"ClientHydrate",ClientRender:"ClientRender"},c=(0,i.createContext)(o.ClientRender);function d(e){let t,a,d,u,m=(0,r.c)(8),{wasServerRendered:h,children:p}=e;m[0]!==h?(t=()=>s.X3?o.ServerRender:h?o.ClientHydrate:o.ClientRender,m[0]=h,m[1]=t):t=m[1];let[f,g]=(0,i.useState)(t);return m[2]!==f?(a=()=>{f!==o.ClientRender&&g(o.ClientRender)},d=[f],m[2]=f,m[3]=a,m[4]=d):(a=m[3],d=m[4]),(0,l.N)(a,d),m[5]!==p||m[6]!==f?(u=(0,n.jsx)(c.Provider,{value:f,children:p}),m[5]=p,m[6]=f,m[7]=u):u=m[7],u}function u(){return(0,i.useContext)(c)}try{c.displayName||(c.displayName="RenderPhaseContext")}catch{}try{d.displayName||(d.displayName="RenderPhaseProvider")}catch{}},76872:(e,t,a)=>{a.d(t,{D:()=>x});var n=a(74848),r=a(23657),i=a(44956),s=a(84646),l=a(51563),o=a(53419),c=a(20263),d=a(96459),u=a(59394),m=a(15220),h=a(46251),p=a(86877),f=a(99511),g=a(96540),y=a(6236);function x({dialogTitle:e="New Space",closeDialog:t,initialSpace:a}){let x=(0,d.Z)(),v=(0,g.useRef)(null),_=(0,s.AV)(),[C,j]=(0,g.useState)(a?.name??_),[b,S]=(0,g.useState)(null),[w,N]=(0,g.useState)({}),{upsertCopilotSpace:I,isPending:E}=(0,l.$)(),A=(0,u.S)(),T=(0,g.useCallback)(e=>{let t={...w};for(let a of e)t[a]&&delete t[a];N(t)},[w]),R=(0,g.useCallback)(e=>S(e),[]);(0,g.useEffect)(()=>{(0,o.BI)("copilot_spaces.create_space_v3_dialog_opened",{})},[]),(0,g.useEffect)(()=>{a?v.current?.focus():v.current?.select()},[a]);let k=async()=>{if(E)return;let e=a?.resources?[...a.resources]:[],i=[];if(a&&b){let t=function(e,t){let a=[],n=[];if("Organization"!==t.type||t.allowsPrivateReposFromOtherOrgs)return{resourcesToSave:e,resourcesThatWillNotTransfer:[]};for(let r of e)"ownerId"in r&&"private"in r&&r.private&&r.ownerId!==t.id?n.push(r):a.push(r);return{resourcesToSave:a,resourcesThatWillNotTransfer:n}}(a.resources||[],b);e=t.resourcesToSave,i=t.resourcesThatWillNotTransfer}let s=!0;if(i.length>0){let e=new Intl.ListFormat().format(Array.from(new Set(i.map(e=>e.ownerLogin).filter(e=>void 0!==e)))),t=`Private resources owned by <strong>${e}</strong> will not be duplicated to the new space.`;s=await A({title:"Some resources will not be duplicated",content:(0,n.jsx)(c.BC,{html:t}),cancelButtonContent:"Never mind",confirmButtonContent:"Continue",confirmButtonType:"primary"})}if(s)try{let n=await I({name:C,ownerId:b?.id,ownerType:b?.type,resources:e,generalInstructions:a?.generalInstructions});N({}),t();let i=(0,r.Cb)(n);return x(i)}catch(e){N(e??{})}},L=()=>{t()};return(0,n.jsx)(m.l,{position:{narrow:"fullscreen"},title:e,onClose:t,width:"large","aria-label":e,className:"CreateSpaceDialog-module__createSpaceDialog--YECfV",renderFooter:()=>(0,n.jsx)(i.m,{onCancel:L,onSave:k,isLoading:E,disabled:!b,saveButtonText:"Create Space"}),children:(0,n.jsx)("form",{onSubmit:async e=>{e.preventDefault(),e.stopPropagation(),await k()},children:(0,n.jsxs)(h.B,{children:[(0,n.jsxs)(p.A,{children:[(0,n.jsx)(p.A.Label,{required:!0,children:"Space name"}),(0,n.jsx)(f.A,{ref:v,autoFocus:!0,block:!0,"data-testid":"copilot-space-name-input",name:"copilot-space-name",value:C,onChange:e=>{j(e.target.value),T(["name","slug"])}}),(0,n.jsx)(p.A.Caption,{children:"Choose a name that describes your project or use case"}),w.name?(0,n.jsx)(p.A.Validation,{variant:"error",children:(0,n.jsxs)("span",{children:["Name ",w.name]})}):w.slug?(0,n.jsx)(p.A.Validation,{variant:"error",children:(0,n.jsx)("span",{children:r.j0})}):null]}),(0,n.jsx)(y.E,{onSelect:R})]})})})}try{x.displayName||(x.displayName="CreateSpaceDialog")}catch{}},77430:(e,t,a)=>{a.d(t,{r:()=>l});var n=a(74848),r=a(71315),i=a(35811),s=a(96540);let l=(0,s.forwardRef)(function({src:e,size:t=20,sx:a,...l},o){let c=(0,s.useMemo)(()=>{let a=new URL(e,r.fV.origin);return a.searchParams.has("size")||a.searchParams.has("s")||a.searchParams.set("size",String(2*Number(t))),a.toString()},[e,t]);return(0,n.jsx)(i.eu,{ref:o,src:c,size:t,"data-testid":"github-avatar",sx:a,...l})});try{l.displayName||(l.displayName="GitHubAvatar")}catch{}},79216:(e,t,a)=>{a.d(t,{Q:()=>s});let n=/^@(?<repo>[\w-.]+\/[\w-.]+)(?:\/(?<type>\w+)\/(?<id>.+))?$/,r=/^@(?<id>[a-zA-Z0-9_.-]+)$/,i={fromUrlType(e){switch(e){case"issues":return"issue";case"pull":return"pull-request";case"discussions":return"discussion";case"blob":case"tree":return"file";case void 0:return"repository"}},fromMentionType(e){switch(e){case"issues":return"issue";case"pull":return"pull-request";case"discussions":return"discussion";case"files":return"file";case void 0:return"repository"}}},s={fromUrl(e){let t;try{t=new URL(e)}catch{return}if(t.hostname!==window.location.hostname)return;let[,a,n,r,...s]=t.pathname.split("/"),l=s.join("/"),o=i.fromUrlType(r);if(a&&n&&o)return{repo:`${a}/${n}`,type:l?o:"repository",id:l}},stringify(e){switch(e.type){case"issue":return`@${e.repo}/issues/${e.id??""}`;case"pull-request":return`@${e.repo}/pull/${e.id??""}`;case"discussion":return`@${e.repo}/discussions/${e.id??""}`;case"repository":return`@${e.repo}`;case"file":return`@${e.repo}/files/${e.id??""}`;case"thread-scoped-file":return`@${e.id??""}`}},parse(e){let t=n.exec(e)?.groups;if(!t){let t=r.exec(e)?.groups;return t?{repo:"",type:"thread-scoped-file",id:t.id}:void 0}let a=i.fromMentionType(t.type);return a?{repo:t.repo,type:a,id:t.id}:void 0},isEqual:(e,t)=>s.stringify(e)===s.stringify(t),refersTo(e,t){let a=s.for(t);return null!==a&&s.isEqual(e,a)},for:e=>{switch(e.type){case"repository":return{type:"repository",repo:`${e.ownerLogin}/${e.name}`,reference:e};case"issue":return{type:"issue",repo:`${e.repository.owner}/${e.repository.name}`,id:e.number.toString(),reference:e};case"pull-request":return{type:"pull-request",repo:`${e.repository.ownerLogin}/${e.repository.name}`,id:e.number.toString(),reference:e};case"discussion":return{type:"discussion",repo:`${e.repository.owner}/${e.repository.name}`,id:e.number.toString(),reference:e};case"file":case"folder":return{type:"file",repo:`${e.repoOwner}/${e.repoName}`,id:e.path,reference:e};case"thread-scoped-file":return{type:"thread-scoped-file",repo:"",id:e.name,reference:e};default:return null}}}},81829:(e,t,a)=>{a.d(t,{A:()=>m});var n=a(74848),r=a(21728),i=a(71315),s=a(69726),l=a(96540);function o(e){e.preventDefault(),e.stopPropagation()}function c(e){return e instanceof DragEvent}let d=e=>{let t,a,i,s,l,o,c,d,u,m,h,p,f,g,y,x,v=(0,r.c)(17);return v[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,n.jsx)("path",{fill:"var(--bgColor-default)",fillRule:"evenodd",d:"M56.66 10.322v.002l16.824 7.846L92.44 70.254a8.75 8.75 0 0 1-5.23 11.217l-37.009 13.47a8.75 8.75 0 0 1-11.217-5.23L18.531 33.512a8.75 8.75 0 0 1 5.23-11.217z",clipRule:"evenodd"}),a=(0,n.jsx)("path",{fill:"var(--bgColor-open-muted)",fillRule:"evenodd",d:"M56.66 10.322v.002l16.824 7.846L92.44 70.254a8.75 8.75 0 0 1-5.23 11.217l-37.009 13.47a8.75 8.75 0 0 1-11.217-5.23L18.531 33.512a8.75 8.75 0 0 1 5.23-11.217z",clipRule:"evenodd"}),i=(0,n.jsx)("path",{fill:"var(--bgColor-open-emphasis)",fillRule:"evenodd",d:"m55.29 10.822.802-.293a1.46 1.46 0 0 1 1.116.049l15.73 7.335c.35.163.62.459.753.822l.294.804 18.458 50.715a8.75 8.75 0 0 1-5.23 11.217l-37.008 13.47a8.75 8.75 0 0 1-11.218-5.23L18.533 33.512a8.75 8.75 0 0 1 5.231-11.217zm.997 2.74L24.762 25.038a5.835 5.835 0 0 0-3.487 7.478l20.454 56.198a5.835 5.835 0 0 0 7.478 3.487l37.008-13.47a5.835 5.835 0 0 0 3.487-7.478L71.243 20.537l-5.482 1.996a5.82 5.82 0 0 1-4.461-.195 5.82 5.82 0 0 1-3.017-3.293z",clipRule:"evenodd",opacity:"0.12"}),v[0]=t,v[1]=a,v[2]=i):(t=v[0],a=v[1],i=v[2]),v[3]===Symbol.for("react.memo_cache_sentinel")?(s=(0,n.jsx)("g",{clipPath:"url(#clip0_12526_110155)",children:(0,n.jsx)("path",{fill:"var(--bgColor-open-emphasis)",fillRule:"evenodd",d:"M64.035 44.691c-.703 2.448-1.974 5.334-3.06 7.703-.93 2.029-1.94 3.575-2.932 4.66a5.46 5.46 0 0 1 .165 4.949c-.376.806-1.116 1.478-1.841 2.006-.754.549-1.631 1.04-2.446 1.445a31 31 0 0 1-3.066 1.318l-.053.02-.015.004-.004.002h-.002a1.095 1.095 0 0 1-1.388-.647v-.002l-.002-.004-.006-.015-.02-.053-.07-.196a30.973 30.973 0 0 1-.89-2.999c-.214-.885-.402-1.872-.466-2.803-.062-.895-.022-1.894.354-2.7a5.46 5.46 0 0 1 3.883-3.052c.178-1.474.697-3.268 1.635-5.314 1.092-2.383 2.494-5.198 3.94-7.294.718-1.039 1.498-1.978 2.313-2.587.804-.603 1.896-1.056 3.022-.53 1.134.53 1.46 1.673 1.497 2.667.037 1.011-.2 2.208-.548 3.422m-9.653 9.647a5.5 5.5 0 0 1 2.228 1.035c.515-.598 1.067-1.388 1.623-2.394l-3.1-1.445c-.397 1.08-.635 2.02-.751 2.804m7.55-10.25c-.61 2.121-1.702 4.662-2.733 6.928l-3.212-1.498c1.049-2.259 2.309-4.736 3.565-6.556.672-.973 1.292-1.682 1.823-2.08.541-.404.74-.318.783-.297h.003c.026.012.21.096.235.764.024.663-.136 1.594-.464 2.739m-8.986 19.408c-.682.34-1.342.627-1.862.84a29 29 0 0 1-.553-1.966c-.198-.823-.357-1.68-.41-2.441-.054-.796.02-1.336.155-1.625a3.282 3.282 0 1 1 5.949 2.774c-.135.29-.5.693-1.146 1.162-.617.45-1.375.878-2.133 1.256",clipRule:"evenodd"})}),l=(0,n.jsx)("path",{fill:"var(--bgColor-default)",fillRule:"evenodd",d:"M198.941 19.499 166.042 7.525a8.75 8.75 0 0 0-11.217 5.23L134.37 68.953a8.75 8.75 0 0 0 5.231 11.217l37.008 13.47a8.75 8.75 0 0 0 11.217-5.231l18.959-52.089z",clipRule:"evenodd"}),o=(0,n.jsx)("path",{fill:"var(--bgColor-sponsors-muted)",fillRule:"evenodd",d:"M198.941 19.499 166.042 7.525a8.75 8.75 0 0 0-11.217 5.23L134.37 68.953a8.75 8.75 0 0 0 5.231 11.217l37.008 13.47a8.75 8.75 0 0 0 11.217-5.231l18.959-52.089z",clipRule:"evenodd"}),c=(0,n.jsx)("path",{fill:"var(--bgColor-sponsors-emphasis)",fillRule:"evenodd",d:"m197.568 19.003.803.292c.363.132.659.404.823.754l7.335 15.73c.163.35.181.751.049 1.114l-.293.805-18.458 50.715a8.75 8.75 0 0 1-11.217 5.23l-37.008-13.47a8.75 8.75 0 0 1-5.231-11.217l20.454-56.197a8.75 8.75 0 0 1 11.217-5.23zm-.998 2.741L165.045 10.27a5.836 5.836 0 0 0-7.479 3.487l-20.454 56.197a5.834 5.834 0 0 0 3.487 7.478l37.008 13.47a5.836 5.836 0 0 0 7.479-3.487L203.544 36.7l-5.483-1.995a5.82 5.82 0 0 1-3.292-3.017 5.82 5.82 0 0 1-.195-4.461z",clipRule:"evenodd",opacity:"0.12"}),v[3]=s,v[4]=l,v[5]=o,v[6]=c):(s=v[3],l=v[4],o=v[5],c=v[6]),v[7]===Symbol.for("react.memo_cache_sentinel")?(u=(0,n.jsx)("g",{clipPath:"url(#clip1_12526_110155)",children:(0,n.jsx)("path",{fill:"var(--bgColor-sponsors-emphasis)",fillRule:"evenodd",d:"M179.168 44.01a2.553 2.553 0 0 1 3.393 1.235l.946 2.03a2.55 2.55 0 0 1-1.235 3.392l-16.096 7.506a2.55 2.55 0 0 1-1.259.232l-4.919-.348a1.094 1.094 0 0 1-.808-1.734l2.894-3.992c.255-.351.595-.632.988-.815zm1.41 2.16a.365.365 0 0 0-.485-.177l-2.36 1.1 1.254 2.692 2.361-1.101a.365.365 0 0 0 .176-.485zm-3.574 4.54-1.254-2.692-11.753 5.48a.36.36 0 0 0-.141.117l-1.739 2.399 2.955.209a.36.36 0 0 0 .18-.033z",clipRule:"evenodd"})}),m=(0,n.jsx)("path",{fill:"var(--bgColor-default)",fillRule:"evenodd",d:"M128.059 0H93.052A8.75 8.75 0 0 0 84.3 8.752v59.804a8.75 8.75 0 0 0 8.752 8.751h39.383a8.75 8.75 0 0 0 8.751-8.751v-55.43z",clipRule:"evenodd"}),h=(0,n.jsx)("path",{fill:"var(--bgColor-accent-muted)",fillRule:"evenodd",d:"M128.059 0H93.052A8.75 8.75 0 0 0 84.3 8.752v59.804a8.75 8.75 0 0 0 8.752 8.751h39.383a8.75 8.75 0 0 0 8.751-8.751v-55.43z",clipRule:"evenodd"}),d=(0,n.jsx)("path",{fill:"var(--bgColor-accent-emphasis)",fillRule:"evenodd",d:"M126.6 0h.855c.386 0 .757.154 1.031.427L140.758 12.7c.274.273.427.644.428 1.03v54.826a8.75 8.75 0 0 1-8.751 8.751H93.052a8.75 8.75 0 0 1-8.752-8.751V8.752A8.75 8.75 0 0 1 93.052 0zm0 2.917H93.052a5.835 5.835 0 0 0-5.835 5.835v59.804a5.835 5.835 0 0 0 5.835 5.834h39.383a5.834 5.834 0 0 0 5.834-5.834v-53.97h-5.834a5.82 5.82 0 0 1-4.126-1.709 5.82 5.82 0 0 1-1.709-4.125z",clipRule:"evenodd",opacity:"0.12"}),v[7]=d,v[8]=u,v[9]=m,v[10]=h):(d=v[7],u=v[8],m=v[9],h=v[10]),v[11]===Symbol.for("react.memo_cache_sentinel")?(p=(0,n.jsx)("g",{clipPath:"url(#clip2_12526_110155)",children:(0,n.jsx)("path",{fill:"var(--bgColor-accent-emphasis)",fillRule:"evenodd",d:"M104.354 31.356a.364.364 0 0 0-.364.365v15.315c0 .202.163.365.364.365h1.373l.042-.045 8.864-8.864c.962-.962 2.509-1 3.518-.088l4.801 4.344V31.72a.365.365 0 0 0-.365-.365zM122.587 47.4h-13.768l7.361-7.362a.365.365 0 0 1 .503-.013l6.269 5.672v1.338a.365.365 0 0 1-.365.365m2.553-.365V31.721a2.553 2.553 0 0 0-2.553-2.553h-18.233a2.553 2.553 0 0 0-2.552 2.553v15.315a2.553 2.553 0 0 0 2.552 2.553h18.233a2.553 2.553 0 0 0 2.553-2.553m-15.316-10.575a.729.729 0 1 1-1.458 0 .729.729 0 0 1 1.458 0m2.188 0a2.917 2.917 0 1 1-5.834 0 2.917 2.917 0 0 1 5.834 0",clipRule:"evenodd"})}),v[11]=p):p=v[11],v[12]===Symbol.for("react.memo_cache_sentinel")?(f=(0,n.jsx)("clipPath",{id:"clip0_12526_110155",children:(0,n.jsx)("path",{fill:"var(--bgColor-default)",d:"m41.466 45.344 21.93-7.982 7.982 21.93-21.93 7.982z"})}),v[12]=f):f=v[12],v[13]===Symbol.for("react.memo_cache_sentinel")?(g=(0,n.jsx)("clipPath",{id:"clip1_12526_110155",children:(0,n.jsx)("path",{fill:"var(--bgColor-default)",d:"m164.786 36.563 21.93 7.982-7.982 21.93-21.93-7.982z"})}),v[13]=g):g=v[13],v[14]===Symbol.for("react.memo_cache_sentinel")?(y=(0,n.jsxs)("defs",{children:[f,g,(0,n.jsx)("clipPath",{id:"clip2_12526_110155",children:(0,n.jsx)("path",{fill:"var(--bgColor-default)",d:"M101.802 27.71h23.338V51.05h-23.338z"})})]}),v[14]=y):y=v[14],v[15]!==e?(x=(0,n.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"226",height:"103",fill:"none",viewBox:"0 0 226 103",...e,children:[t,a,i,s,l,o,c,u,m,h,d,p,y]}),v[15]=e,v[16]=x):x=v[16],x};try{d.displayName||(d.displayName="DragAndDropSVG")}catch{}let u="FullScreenDragOverlay-module__text--oftCM";function m(e){let t,a,m,h=(0,r.c)(9),{onFilesDrop:p,isUploading:f}=e,g=void 0!==f&&f;h[0]!==g||h[1]!==p?(t=e=>{g||p(e)},h[0]=g,h[1]=p,h[2]=t):t=h[2];let y=t;h[3]!==y?(a={onFilesDrop:y,targetElement:i.XC},h[3]=y,h[4]=a):a=h[4];let{isDragging:x}=function(e){let t,a,n,i=(0,r.c)(6),{onFilesDrop:s,targetElement:d}=e,[u,m]=(0,l.useState)(!1),h=(0,l.useRef)(0);return i[0]!==s||i[1]!==d?(t=()=>{if(!d)return;let e=e=>{c(e)&&(e.preventDefault(),e.stopPropagation(),e.dataTransfer?.types.includes("Files")&&(h.current=h.current+1,1===h.current&&m(!0)))},t=e=>{e.preventDefault(),e.stopPropagation(),h.current=h.current-1,h.current<=0&&(h.current=0,m(!1))},a=e=>{if(!c(e))return;e.preventDefault(),e.stopPropagation(),h.current=0,m(!1);let t=e.dataTransfer?.files;t&&0!==t.length&&s(t)};return d.addEventListener("dragover",o),d.addEventListener("dragenter",e),d.addEventListener("dragleave",t),d.addEventListener("drop",a),()=>{d.removeEventListener("dragover",o),d.removeEventListener("dragenter",e),d.removeEventListener("dragleave",t),d.removeEventListener("drop",a)}},a=[s,d],i[0]=s,i[1]=d,i[2]=t,i[3]=a):(t=i[2],a=i[3]),(0,l.useEffect)(t,a),i[4]!==u?(n={isDragging:u},i[4]=u,i[5]=n):n=i[5],n}(a),v=null;if(g){let e;h[5]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.A,{size:"large"}),(0,n.jsx)("p",{className:u,children:"Uploading files..."})]}),h[5]=e):e=h[5],v=e}else if(x){let e;h[6]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(d,{}),(0,n.jsx)("p",{className:u,children:"Drop files to upload"})]}),h[6]=e):e=h[6],v=e}return v?(h[7]!==v?(m=(0,n.jsx)("div",{className:"FullScreenDragOverlay-module__overlay--Q9gow",children:(0,n.jsx)("div",{className:"FullScreenDragOverlay-module__centeredContent--iAFMy",children:v})}),h[7]=v,h[8]=m):m=h[8],m):null}try{m.displayName||(m.displayName="FullScreenDragOverlay")}catch{}},82591:(e,t,a)=>{a.d(t,{z:()=>n});let n=Object.freeze({INITIAL:"soft-nav:initial",START:"soft-nav:start",REPLACE_MECHANISM:"soft-nav:replace-mechanism",SUCCESS:"soft-nav:success",ERROR:"soft-nav:error",FRAME_UPDATE:"soft-nav:frame-update",END:"soft-nav:end",RENDER:"soft-nav:render",PROGRESS_BAR:{START:"soft-nav:progress-bar:start",END:"soft-nav:progress-bar:end"}})},82595:(e,t,a)=>{a.d(t,{I:()=>d});var n=a(74848),r=a(21728),i=a(34164),s=a(49851),l=a(38621);let o={container:"Icon-module__container--stxcA",customColor:"Icon-module__customColor--dELU9",hasBackground:"Icon-module__hasBackground--xipmb",auburn:"Icon-module__auburn--YGPGc",blue:"Icon-module__blue--YHcrq",brown:"Icon-module__brown--HcCTh",coral:"Icon-module__coral--oTikb",cyan:"Icon-module__cyan--h419p",gray:"Icon-module__gray--VfK1C",green:"Icon-module__green--DZFaM",indigo:"Icon-module__indigo--VVAUE",lemon:"Icon-module__lemon--pOsfR",lime:"Icon-module__lime--qwkv8",olive:"Icon-module__olive--UDJGA",orange:"Icon-module__orange--Zpvu1",pine:"Icon-module__pine--w0tcb",pink:"Icon-module__pink--ai8ga",plum:"Icon-module__plum--IYN4u",purple:"Icon-module__purple--rFSpj",red:"Icon-module__red--OLgIH",teal:"Icon-module__teal--eysuL",yellow:"Icon-module__yellow--UE4Kb"},c=new Set(Object.keys(o).filter(e=>!["container","hasBackground","customColor"].includes(e)));function d(e){let t,a,d,u,m,h,p=(0,r.c)(19),{icon:f,hasBackground:g,color:y,size:x,className:v}=e,_=void 0!==g&&g,C=void 0===y?"gray":y,j=void 0===x?16:x;if("string"==typeof f)if(f in s.OZ)t=s.OZ[f];else{var b;let e,a;p[0]!==f?(b=f,e=(a=`${b.replaceAll(/(?:^|-)(\w)/g,(e,t)=>t.toUpperCase())}Icon`)in l?l[a]:void 0,p[0]=f,p[1]=e):e=p[1],t=e}else t=f;if(!t)return null;p[2]!==C?(a=c.has(C),p[2]=C,p[3]=a):a=p[3];let S=a,w=`${_?2*j:j}px`;p[4]!==C||p[5]!==S||p[6]!==w?(d={"--custom-size":w},S||(d["--custom-color"]=C),p[4]=C,p[5]=S,p[6]=w,p[7]=d):d=p[7];let N=S?o[C]:o.customColor,I=_&&o.hasBackground;return p[8]!==v||p[9]!==N||p[10]!==I?(u=(0,i.$)(o.container,N,I,v),p[8]=v,p[9]=N,p[10]=I,p[11]=u):u=p[11],p[12]!==t||p[13]!==j?(m=(0,n.jsx)(t,{size:j,fill:"currentColor"}),p[12]=t,p[13]=j,p[14]=m):m=p[14],p[15]!==d||p[16]!==u||p[17]!==m?(h=(0,n.jsx)("div",{style:d,className:u,children:m}),p[15]=d,p[16]=u,p[17]=m,p[18]=h):h=p[18],h}try{d.displayName||(d.displayName="Icon")}catch{}},84331:(e,t,a)=>{function n(e,t,a=.1){let r=s(e,t,a);return r&&-1===t.indexOf("/")&&(r+=s(e.substring(e.lastIndexOf("/")+1),t,a)),r}function r(e,t,a){if(t){let n=e.innerHTML.trim().match(a||function(e){let t=e.toLowerCase().split(""),a="",n=!0;for(let e of t){let t=e.replace(/[\\^$*+?.()|[\]{}]/g,"\\$&");n?(a+=`(.*)(${t})`,n=!1):a+=`([^${t}]*?)(${t})`}return RegExp(`${a}(.*?)$`,"i")}(t));if(!n)return;let r=!1,i=[];for(let e=1;e<n.length;++e){let t=n[e];t&&(e%2==0?r||(i.push("<mark>"),r=!0):r&&(i.push("</mark>"),r=!1),i.push(t))}e.innerHTML=i.join("")}else{let t=e.innerHTML.trim(),a=t.replace(/<\/?mark>/g,"");t!==a&&(e.innerHTML=a)}}a.d(t,{He:()=>r,UD:()=>l,dt:()=>n});let i=new Set([" ","-","_"]);function s(e,t,a=.1){let n=e;if(n===t)return 1;let r=n.length,l=0,o=0,c=!0;for(let e of t){let t=n.indexOf(e.toLowerCase()),s=n.indexOf(e.toUpperCase()),d=Math.min(t,s),u=d>-1?d:Math.max(t,s);if(-1===u)return 0;l+=.1,n[u]===e&&(l+=.1),0===u&&(l+=.9-a,c&&(o=1)),i.has(n.charAt(u-1))&&(l+=.9-a),n=n.substring(u+1,r),c=!1}let d=t.length,u=l/d,m=(d/r*u+u)/2;return o&&m+a<1&&(m+=a),m}function l(e,t){return e.score>t.score?-1:e.score<t.score?1:e.text<t.text?-1:1*!!(e.text>t.text)}},84646:(e,t,a)=>{a.d(t,{$7:()=>h,$W:()=>_,AV:()=>v,Ao:()=>g,BV:()=>x,OW:()=>CopilotSpaceSSOError,Tx:()=>y,e9:()=>p,i9:()=>CopilotSpaceNotFoundError,jS:()=>f});var n=a(50467),r=a(97665),i=a(94747),s=a(97286),l=a(72011),o=a(33592),c=a(96540),d=a(2635),u=a(71315),m=a(23657);let CopilotSpaceNotFoundError=class CopilotSpaceNotFoundError extends Error{constructor(e="Copilot Space not found"){super(e),this.name="CopilotSpaceNotFoundError"}};let CopilotSpaceSSOError=class CopilotSpaceSSOError extends Error{constructor(e,t="Copilot Space SSO error"){super(t),(0,n._)(this,"protectedOrganizations",void 0),this.protectedOrganizations=e,this.name="CopilotSpaceSSOError"}};function h(){let e=(0,r.jE)(),t=(0,o.b)();return(0,i.n)({mutationFn:async e=>{let a=await (0,l.ee)(e);if(!a.ok)throw Error(a.error);return t.dispatch({type:"REMOVE_CUSTOM_COPILOT",customCopilotId:e}),{status:a.status,ok:!0,payload:a.payload}},onSuccess:async()=>{await e.invalidateQueries({queryKey:l.O6})}})}function p(e){let t=(0,o.b)(),{data:a}=f(e,{throwOnError:!1});(0,c.useEffect)(()=>{a&&t.dispatch({type:"SET_CUSTOM_COPILOTS",customCopilots:a})},[a,t])}function f(e,t={}){return(0,s.I)({queryKey:l.O6,queryFn:l.CT,enabled:e,staleTime:3e5,throwOnError:t.throwOnError})}function g(e){return(0,s.I)({queryKey:(0,l.dp)(e),queryFn:async()=>{let t=await (0,l.Lr)(e);if(!t.ok){if(404===t.status)throw new CopilotSpaceNotFoundError;throw Error(t.error)}if(void 0===t.payload.id)throw new CopilotSpaceSSOError(t.payload.protectedOrganizations);return t.payload},enabled:!!e})}function y(e,t){return(0,s.I)({queryKey:["visibility-settings",e,t],queryFn:async()=>(0,l.A2)({owner:e,id:t}),enabled:""!==e&&-1!==t,staleTime:3e5})}function x(){return(0,d.A3)("customCopilotsEnabled")}function v(){let e,t=(e=(0,d.A3)("customCopilots"),e?.length??0);return(0,c.useMemo)(()=>`New Space ${t+1}`,[t])}function _(e){return(0,c.useMemo)(()=>{if(!e)return;let{owner:t}=e,a=u.cg?.location.origin;if(!a)return;let n=(0,m.Cb)(e),r=`${a}${n}`,i=`content_url=${encodeURIComponent(r)}&report=${t}+(user)`;return`${a}/contact/report-content?${i}`},[e])}},87419:(e,t,a)=>{a.d(t,{Y:()=>d});var n=a(21728),r=a(96540),i=a(25641),s=a(79064),l=a(2635),o=a(33592),c=a(72303);function d(e){let t,a,d,u,m,h,p,f,g,y,x=(0,n.c)(26),v=(0,l.Pk)(),_=(0,o.b)(),{currentTopic:C,messages:j,selectedThreadID:b}=v;x[0]!==v?(t=(0,c.W)(v),x[0]=v,x[1]=t):t=x[1];let S=t,w=(0,r.useRef)(null),N=e||w;return x[2]!==_||x[3]!==j.length||x[4]!==S?(a=()=>{S&&j.length>0&&_.showTopicPicker(!1)},d=[S,j.length,_],x[2]=_,x[3]=j.length,x[4]=S,x[5]=a,x[6]=d):(a=x[5],d=x[6]),(0,r.useEffect)(a,d),x[7]!==C||x[8]!==b?(u=()=>{let e=C?(0,i.P)(C)?C.name:String(C.id):null;b&&e&&s.Jt.setSelectedTopic(b,e)},m=[b,C],x[7]=C,x[8]=b,x[9]=u,x[10]=m):(u=x[9],m=x[10]),(0,r.useEffect)(u,m),x[11]!==N?(h=()=>{let e=window.setTimeout(()=>{N.current?.focus()},1);return()=>{window.clearTimeout(e)}},p=[N],x[11]=N,x[12]=h,x[13]=p):(h=x[12],p=x[13]),(0,r.useEffect)(h,p),x[14]!==_||x[15]!==v.context?.[0]||x[16]!==v.currentRepository?(f=()=>{let e;return(e=v.context?.[0]??v.currentRepository)&&_.generateSuggestions(e),()=>{_.clearSuggestions()}},x[14]=_,x[15]=v.context?.[0],x[16]=v.currentRepository,x[17]=f):f=x[17],x[18]!==_||x[19]!==v.context||x[20]!==v.currentRepository||x[21]!==v.currentTopic||x[22]!==v.selectedThreadID?(g=[_,v.context,v.currentTopic,v.currentRepository,v.selectedThreadID],x[18]=_,x[19]=v.context,x[20]=v.currentRepository,x[21]=v.currentTopic,x[22]=v.selectedThreadID,x[23]=g):g=x[23],(0,r.useEffect)(f,g),x[24]!==N?(y={textAreaRef:N},x[24]=N,x[25]=y):y=x[25],y}},88431:(e,t,a)=>{a.d(t,{N:()=>i});var n=a(71315),r=a(96540);let i=void 0!==n.cg?.document?.createElement?r.useLayoutEffect:r.useEffect},91474:(e,t,a)=>{a.d(t,{j:()=>l});var n=a(21728),r=a(38621),i=a(47789),s=a(35247);function l(e){let t,a,l,m=(0,n.c)(8),{enabled:h}=e,p=(0,i.qw)();if(m[0]!==h||m[1]!==p){e:{let e=[];if(!h){t=e;break e}for(let t of p)t.slashCommand&&e.push({key:t.slashCommand.key,name:t.slashCommand.name,description:t.slashCommand.description,icon:t.slashCommand.icon,isNew:t.slashCommand.isNew,order:t.slashCommand.order,suggestions:t.slashCommand.suggestions,enabled:t.slashCommand.enabled,disabledAction:t.slashCommand.disabledAction,execute:async(e,a,n)=>await t.slashCommand.execute(e,a,n)});s.W.planningAgent&&e.push({key:"brainstorm",name:"Brainstorm",description:"Create a plan and turn them into tasks",icon:r.TasklistIcon,order:1,suggestions:[],execute:u}),e.push({key:"create-issue",name:"Create issue",description:"Create a GitHub issue from your conversation",icon:r.IssueDraftIcon,suggestions:["First, create a new draft issue. Then ask for additional information to fill out the issue.","First, create an issue with sub issues. Then ask for additional information to fill out these issues."],execute:d}),t=e.sort(c)}m[0]=h,m[1]=p,m[2]=t}else t=m[2];let f=t;return m[3]!==f?(a=f.map(o),m[3]=f,m[4]=a):a=m[4],m[5]!==f||m[6]!==a?(l={availableCommands:f,availableCommandKeys:a},m[5]=f,m[6]=a,m[7]=l):l=m[7],l}function o(e){return e.key}function c(e,t){return void 0!==e.order&&void 0!==t.order?e.order-t.order:void 0!==e.order?-1:void 0!==t.order?1:e.name.localeCompare(t.name)}function d(){return!1}function u(e,t,a,n){return n.setUsePlanningIntent(!0),!1}},97315:(e,t,a)=>{a.d(t,{P:()=>o});var n=a(74848),r=a(21728),i=a(84078),s=a(96540),l=a(33592);function o(e){let t,a,o,d,u,m,h=(0,r.c)(14),{ambientError:p,useLargerBorderRadius:f}=e,g=(0,l.b)(),[y,x]=(0,s.useState)(0),v=(0,s.useRef)(null);h[0]!==p.message?(t=()=>{if(p.message){x(c);let e=setTimeout(()=>{v.current&&v.current.focus()},250);return()=>clearTimeout(e)}},h[0]=p.message,h[1]=t):t=h[1],h[2]!==p?(a=[p],h[2]=p,h[3]=a):a=h[3],(0,s.useEffect)(t,a);let _=`AmbientErrorBanner-module__ambientErrorBanner--lajPC ${void 0!==f&&f?"AmbientErrorBanner-module__largeBorderRadius--NGjjE":"AmbientErrorBanner-module__mediumBorderRadius--aAp6Z"}`;return h[4]===Symbol.for("react.memo_cache_sentinel")?(o={outline:"none"},h[4]=o):o=h[4],h[5]!==p.message?(d=(0,n.jsx)("div",{ref:v,tabIndex:-1,style:o,children:p.message}),h[5]=p.message,h[6]=d):d=h[6],h[7]!==g?(u=()=>{g.dismissAmbientError()},h[7]=g,h[8]=u):u=h[8],h[9]!==y||h[10]!==_||h[11]!==d||h[12]!==u?(m=(0,n.jsx)(i.l,{"aria-atomic":"true",className:_,description:d,variant:"critical",title:"Error during copilot chat has occurred.",hideTitle:!0,onDismiss:u},y),h[9]=y,h[10]=_,h[11]=d,h[12]=u,h[13]=m):m=h[13],m}function c(e){return e+1}try{o.displayName||(o.displayName="AmbientErrorBanner")}catch{}},97564:(e,t,a)=>{a.d(t,{V:()=>r});var n=a(96379);async function r(e){let t=await (0,n.lS)(`/github-copilot/chat/repositories/${e}`,{method:"GET"});if(!t.ok)throw Error(`Failed to fetch repository details: ${t.status}`);return await t.json()}},97793:(e,t,a)=>{a.d(t,{O:()=>f});var n=a(74848),r=a(96379),i=a(38621),s=a(15220),l=a(86877),o=a(99511),c=a(43371),d=a.n(c),u=a(96540);let m="McpServerDialog-module__inputError--Ojb_P",h="McpServerDialog-module__formField--rsUqW",p=(0,n.jsx)("a",{href:"https://modelcontextprotocol.io/specification/2025-06-18/basic/authorization",target:"_blank",rel:"noopener noreferrer",style:{textDecoration:"underline"},children:"MCP authorization specification"}),f=({isOpen:e,onClose:t,returnUrl:a,onServerAdded:c,returnFocusRef:f,showSettingsLink:g=!0})=>{let[y,x]=(0,u.useState)(""),[v,_]=(0,u.useState)(""),[C,j]=(0,u.useState)(null),[b,S]=(0,u.useState)(null),w=(0,u.useCallback)(()=>{x(""),_(""),j(null),S(null),t()},[t]),N=async e=>{if(e&&e.preventDefault(),""===y.trim()||""===v.trim()){v.trim()||j("MCP server URL is required"),y.trim()||S("Name is required");return}try{if(j(null),!function(e){try{let t=new URL(e.trim(),window.location.origin),a=d()();return"https:"===t.protocol&&!!t.hostname&&/^[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(t.hostname)&&!a.test(e)}catch{return!1}}(v))return void j("Invalid HTTPS URL format");let e=new FormData;e.append("mcp_server_url",v.trim()),e.append("name",y.trim()),a&&e.append("return_url",a);let t=await (0,r.DI)("/copilot/mcp/servers",{method:"POST",body:e});if(!t.ok){let e="Failed to add MCP server";try{let a=await t.text();try{let t=JSON.parse(a);if("unsupported_server_type"===t.error)e=(0,n.jsxs)(n.Fragment,{children:["This server does not conform to the ",p,"."]});else if(t.field_errors){for(let[e,a]of Object.entries(t.field_errors)){let t=a.join(", ");"mcp_server_url"===e?j(t):"display_name"===e&&S(t)}return}else t.message&&(e=t.message)}catch{e=a.includes("well-known/oauth-authorization-server")||"Client setup failed"===a.trim()?(0,n.jsxs)(n.Fragment,{children:["This server does not conform to the ",p,"."]}):a||e}}catch{e="Failed to add MCP server"}j(e);return}let i=(await t.json()).redirect_url;i&&"string"==typeof i?(w(),c?.(),window.location.assign(i)):(w(),c?.())}catch(e){e instanceof Error?j(e.message):j("An unknown error occurred")}};return e?(0,n.jsx)(s.l,{title:"Add MCP server",onClose:w,footerButtons:[{buttonType:"default",content:"Cancel",onClick:w},{buttonType:"primary",content:(0,n.jsxs)(n.Fragment,{children:["Connect to MCP server",(0,n.jsx)("span",{style:{marginLeft:8},children:(0,n.jsx)(i.LinkExternalIcon,{size:16})})]}),onClick:()=>{N()}}],returnFocusRef:f,children:(0,n.jsxs)("form",{className:"McpServerDialog-module__dialogForm--pUtNF",onSubmit:N,autoComplete:"on",children:[(0,n.jsxs)(l.A,{required:!0,className:h,children:[(0,n.jsx)(l.A.Label,{children:"MCP server name"}),(0,n.jsx)(o.A,{name:"mcp-server-name",type:"text",value:y,onChange:e=>{x(e.target.value),S(null)},placeholder:"Enter a name for this MCP server",className:b?m:void 0,autoComplete:"on",block:!0}),b&&(0,n.jsx)(l.A.Validation,{variant:"error",children:b})]}),(0,n.jsxs)(l.A,{required:!0,className:h,children:[(0,n.jsx)(l.A.Label,{children:"MCP server URL"}),(0,n.jsx)(o.A,{name:"mcp-url",type:"url",value:v,onChange:e=>{_(e.target.value),j(null)},placeholder:"https://mcp.example.com",className:C?m:void 0,autoComplete:"on",block:!0}),C&&(0,n.jsx)(l.A.Validation,{variant:"error",children:C})]}),(0,n.jsx)("button",{type:"submit",className:"McpServerDialog-module__hiddenSubmitButton--KcK0s",tabIndex:-1,children:"Submit"}),(0,n.jsxs)("p",{children:["MCP Server data will be processed by models coming from third-party providers. Always review the permissions required by the MCP server and only connect to MCP servers you know and trust.",g&&(0,n.jsxs)(n.Fragment,{children:[" ","You can revoke access for the MCP server at any time in"," ",(0,n.jsx)("a",{href:"/settings",className:"McpServerDialog-module__underline--YKUMk",children:"your settings"}),"."]})]})]})}):null};try{p.displayName||(p.displayName="MCP_SPEC_LINK")}catch{}try{f.displayName||(f.displayName="McpServerDialog")}catch{}},97949:(e,t,a)=>{a.d(t,{U:()=>o});var n=a(99054),r=a(17925),i=a(25641),s=a(35247),l=a(79216);let o=function({references:e,agents:t,commands:a}){this.parser=function(o){let c=o.split(/(\s+)/),d=[];for(let[o,u]of c.entries()){if(s.W.chatInputCommands&&0===o){let e=(0,r.V)(u,a);if(e){d.push({type:"command",value:u,data:{command:e}});continue}}let c=0===o&&n.qj.exec(u)?.groups?.slug,m=c&&t.find(e=>e.slug===c);if(m){d.push({type:"agent-mention",value:u,data:{mentionedAgent:m}});continue}let h=l.Q.parse(u),p=h&&e?.find(e=>l.Q.refersTo(h,e));if(h){d.push({type:"reference-mention",value:u,data:{mentionedReferenceId:p&&(0,i.Vb)(p),referenceMention:h}});continue}let f=d.at(-1);f?.type==="text"?f.value+=u:d.push({type:"text",value:u})}return{type:"root",children:d}}}},99054:(e,t,a)=>{a.d(t,{JE:()=>p,Z3:()=>m,bn:()=>u,kw:()=>f,qj:()=>h});var n=a(21728),r=a(97286),i=a(8625),s=a(14521),l=a(25641),o=a(2635),c=a(33592),d=a(72206);let u="https://github.com/marketplace?type=apps&copilot_app=true",m="@",h=/^@(?<slug>\S+)$/;function p(e){let t,a,i,u,m,h,p=(0,n.c)(25),{agentsPath:f,model:g}=(0,o.bP)("agentsPath","model"),y=(0,d.tD)(),x=(0,c.b)(),v=!!(0,s.G)(),_=g?.hasLimitedCapabilities;p[0]!==y||p[1]!==v||p[2]!==_?(t=e=>{let{messages:t}=y();if(_||v)return{agents:[],showLimit:!1};let a=(0,l.Q7)(t)[0];return a?{agents:e.filter(e=>e.slug===a.name),showLimit:e.length>1}:{agents:e,showLimit:!1}},p[0]=y,p[1]=v,p[2]=_,p[3]=t):t=p[3];let C=t;p[4]!==f?(a=["copilot-chat","agents",f],p[4]=f,p[5]=a):a=p[5],p[6]!==f||p[7]!==x?(i=()=>f?x.fetchAgents(f):[],p[6]=f,p[7]=x,p[8]=i):i=p[8];let j=(void 0===e||e)&&!_&&!v;p[9]!==C||p[10]!==a||p[11]!==i||p[12]!==j?(u={queryKey:a,queryFn:i,select:C,enabled:j},p[9]=C,p[10]=a,p[11]=i,p[12]=j,p[13]=u):u=p[13];let{isLoading:b,data:S,refetch:w,isStale:N,isFetched:I}=(0,r.I)(u);p[14]!==S||p[15]!==I||p[16]!==N||p[17]!==w?(m=async()=>!I||N?(await w()).data:S,p[14]=S,p[15]=I,p[16]=N,p[17]=w,p[18]=m):m=p[18];let E=m,A=S?.agents,T=S?.showLimit??!1;return p[19]!==E||p[20]!==b||p[21]!==A||p[22]!==T||p[23]!==_?(h={loading:b,disabled:_,availableAgents:A,showLimit:T,imperativelyFetch:E},p[19]=E,p[20]=b,p[21]=A,p[22]=T,p[23]=_,p[24]=h):h=p[24],h}function f(e){let t,a,r=(0,n.c)(6),{inputOnChange:s,inputRef:l}=e;r[0]!==s||r[1]!==l?(t={inputRef:l,fallbackEventHandler:s},r[0]=s,r[1]=l,r[2]=t):t=r[2];let o=(0,i.H)(t);return r[3]!==o||r[4]!==l?(a=e=>{l.current?.value&&o(" ",[0,0]);let t=`${m}${void 0===e?"":e}`;o(t,[0,0],t.length)},r[3]=o,r[4]=l,r[5]=a):a=r[5],a}}}]);
//# sourceMappingURL=packages_noop_noop_ts-packages_promise-with-resolvers-polyfill_promise-with-resolvers-polyfil-c8aad9-37e8a63eba30.js.map